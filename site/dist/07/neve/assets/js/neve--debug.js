window.Global={},window.getURL=function(e,t){t||(t="_blank"),window.open(e,t)},"undefined"==typeof console&&(window.console={},console.log=console.error=console.info=console.debug=console.warn=console.trace=function(){}),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()),window.performance=function(){return window.performance&&window.performance.now?window.performance:Date}(),Date.now=Date.now||function(){return+new Date},window.Class=function(e,t){var n=this||window,i=e.toString(),r=i.match(/function ([^\(]+)/)[1],a=null;"function"==typeof t&&(a=t,t=null),t=(t||"").toLowerCase(),e.prototype.__call=function(){this.events&&this.events.scope(this)},t?"static"==t?n[r]=new e:"singleton"==t&&(n[r]=function(){var t,n={};return n.instance=function(){return t||(t=new e),t},n}()):(n[r]=e,a&&a()),this!==window&&(this.__namespace||(this.__namespace=this.constructor.toString().match(/function ([^\(]+)/)[1]),this[r]._namespace=this.__namespace)},window.Inherit=function(e,t,n){"undefined"==typeof n&&(n=e);var i=new t(n,!0),r={};for(var a in i)e[a]=i[a],r[a]=i[a];e.__call&&e.__call(),Render.nextFrame(function(){for(a in i)e[a]&&r[a]&&e[a]!==r[a]&&(e["_"+a]=r[a]);i=r=null,e=t=n=null})},window.Implement=function(e,t){Render.nextFrame(function(){var n=new t;for(var i in n){if("undefined"==typeof e[i])throw"Interface Error: Missing Property: "+i+" ::: "+t;var r=typeof n[i];if(typeof e[i]!=r)throw"Interface Error: Property "+i+" is Incorrect Type ::: "+t}})},window.Namespace=function(e){"string"==typeof e?window[e]={Class:window.Class}:e.Class=window.Class},window.Interface=function(e){var t=e.toString().match(/function ([^\(]+)/)[1];Hydra.INTERFACES[t]=e},window.THREAD=!1,Class(function(e,t,n,i){this._children=new LinkedList,this.__useFragment=i,this._initSelector(e,t,n)},function(){var e=HydraObject.prototype;e._initSelector=function(e,t,n){if(e&&"string"!=typeof e)this.div=e;else{var i=e?e.charAt(0):null,r=e?e.slice(1):null;if("."!=i&&"#"!=i&&(r=e,i="."),n){if("#"!=i)throw"Hydra Selectors Require #ID";this.div=document.getElementById(r)}else this._type=t||"div","svg"==this._type?(this.div=document.createElementNS("http://www.w3.org/2000/svg",this._type),this.div.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")):(this.div=document.createElement(this._type),i&&("#"==i?this.div.id=r:this.div.className=r))}this.div.hydraObject=this},e.addChild=e.add=function(e){var t=this.div;if(this.__useFragment){if(!this._fragment){this._fragment=document.createDocumentFragment();var n=this;defer(function(){return n._fragment&&n.div?(n.div.appendChild(n._fragment),void(n._fragment=null)):n._fragment=null})}t=this._fragment}return e.element&&e.element instanceof HydraObject?(t.appendChild(e.element.div),this._children.push(e.element),e.element._parent=this,e.element.div.parentNode=this.div):e.div?(t.appendChild(e.div),this._children.push(e),e._parent=this,e.div.parentNode=this.div):e.nodeName&&(t.appendChild(e),e.parentNode=this.div),this},e.clone=function(){return $(this.div.cloneNode(!0))},e.create=function(e,t){var n=$(e,t);return this.addChild(n),this.__root&&(this.__root.__append[e]=n,n.__root=this.__root),n},e.empty=function(){for(var e=this._children.start();e;)e&&e.remove&&e.remove(),e=this._children.next();return this.div.innerHTML="",this},e.parent=function(){return this._parent},e.children=function(){return this.div.children?this.div.children:this.div.childNodes},e.append=function(e,t){return this.__root||(this.__root=this,this.__append={}),e.apply(this,t)},e.removeChild=function(e,t){try{e.div.parentNode.removeChild(e.div)}catch(n){}t||this._children.remove(e)},e.remove=e.destroy=function(){this.removed=!0;var e=this._parent;e&&!e.removed&&e.removeChild&&e.removeChild(this,!0);for(var t=this._children.start();t;)t&&t.remove&&t.remove(),t=this._children.next();this._children.destroy(),this.div.hydraObject=null,Utils.nullObject(this)}}),Class(function e(){function t(){return document&&window?window._NODE_?(r.addEvent="addEventListener",r.removeEvent="removeEventListener",setTimeout(n,1)):void(window.addEventListener?(r.addEvent="addEventListener",r.removeEvent="removeEventListener",window.addEventListener("load",n,!1)):(r.addEvent="attachEvent",r.removeEvent="detachEvent",window.attachEvent("onload",n))):setTimeout(t,1)}function n(){window.removeEventListener&&window.removeEventListener("load",n,!1);for(var t=0;t<a.length;t++)a[t]();a=null,r.READY=!0,window.Main&&(e.Main=new window.Main)}var i,r=this,a=[];this.READY=!1,this.HASH=window.location.hash.slice(1),this.LOCAL=location.hostname.indexOf("local")>-1||"10"==location.hostname.split(".")[0]||"192"==location.hostname.split(".")[0],function(){t()}(),this.development=function(e){e?i=setInterval(function(){for(var e in window)if(!e.strpos("webkit")){var t=window[e];if("function"!=typeof t&&e.length>2){if(e.strpos("_ga")||e.strpos("_typeface_js"))continue;var n=e.charAt(0),i=e.charAt(1);if(("_"==n||"$"==n)&&i!==i.toUpperCase())throw console.log(window[e]),"Hydra Warning:: "+e+" leaking into global scope"}}},1e3):clearInterval(i)},this.getArguments=function(e){for(var t=this.arguments,n=[],i=1;i<t.length;i++)null!==t[i]&&n.push(t[i]);return n},this.ready=function(e){return this.READY?e():void a.push(e)},this.$=function(e,t,n){return new HydraObject(e,t,n)},this.__triggerReady=function(){n()},this.INTERFACES={},this.HTML={},this.JSON={},this.$.fn=HydraObject.prototype,window.$=this.$,window.ready=this.ready},"Static"),Hydra.ready(function(){window.__window=$(window),window.__document=$(document),window.__body=$(document.getElementsByTagName("body")[0]),window.Stage=__body.create("#Stage"),Stage.size("100%"),Stage.__useFragment=!0,Stage.width=document.body.clientWidth||document.documentElement.offsetWidth||window.innerWidth,Stage.height=document.body.clientHeight||document.documentElement.offsetHeight||window.innerHeight,function(){function e(){"focus"!=n&&HydraEvents._fireEvent(HydraEvents.BROWSER_FOCUS,{type:"focus"}),n="focus"}function t(){"blur"!=n&&HydraEvents._fireEvent(HydraEvents.BROWSER_FOCUS,{type:"blur"}),n="blur"}var n,i=Date.now();setTimeout(function(){var n,r,a=["hidden","msHidden","webkitHidden"];!function(){for(var e in a)if("undefined"!==document[a[e]]){switch(n=a[e]){case"hidden":r="visibilitychange";break;case"msHidden":r="msvisibilitychange";break;case"webkitHidden":r="webkitvisibilitychange"}return}}(),"undefined"==typeof document[n]?Device.browser.ie?(document.onfocus=e,document.onblur=t):(window.onfocus=e,window.onblur=t):document.addEventListener(r,function(){var r=Date.now();r-i>10&&(document[n]===!1?e():t()),i=r})},250)}(),window.onresize=function(){Device.mobile||(Stage.width=document.body.clientWidth||document.documentElement.offsetWidth||window.innerWidth,Stage.height=document.body.clientHeight||document.documentElement.offsetHeight||window.innerHeight,HydraEvents._fireEvent(HydraEvents.RESIZE))}}),function(){$.fn.text=function(e){return"undefined"!=typeof e?(this.div.textContent=e,this):this.div.textContent},$.fn.html=function(e,t){return!e||e.strpos("<")||t?"undefined"!=typeof e?(this.div.innerHTML=e,this):this.div.innerHTML:this.text(e)},$.fn.hide=function(){return this.div.style.display="none",this},$.fn.show=function(){return this.div.style.display="",this},$.fn.visible=function(){return this.div.style.visibility="visible",this},$.fn.invisible=function(){return this.div.style.visibility="hidden",this},$.fn.setZ=function(e){return this.div.style.zIndex=e,this},$.fn.clearAlpha=function(){return this.div.style.opacity="",this},$.fn.size=function(e,t,n){return"string"==typeof e?("undefined"==typeof t?t="100%":"string"!=typeof t&&(t+="px"),this.div.style.width=e,this.div.style.height=t):(this.div.style.width=e+"px",this.div.style.height=t+"px",n||(this.div.style.backgroundSize=e+"px "+t+"px")),this.width=e,this.height=t,this},$.fn.mouseEnabled=function(e){return this.div.style.pointerEvents=e?"auto":"none",this},$.fn.fontStyle=function(e,t,n,i){var r={};return e&&(r.fontFamily=e),t&&(r.fontSize=t),n&&(r.color=n),i&&(r.fontStyle=i),this.css(r),this},$.fn.bg=function(e,t,n,i){return e?(Hydra.CDN&&!e.strpos("http")&&e.strpos(".")&&(e=Hydra.CDN+e+Config.SALT),e.strpos(".")?this.div.style.backgroundImage="url("+e+")":this.div.style.backgroundColor=e,"undefined"!=typeof t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.div.style.backgroundPosition=t+" "+n),i&&(this.div.style.backgroundSize="",this.div.style.backgroundRepeat=i),("cover"==t||"contain"==t)&&(this.div.style.backgroundSize=t,this.div.style.backgroundPosition="undefined"!=typeof n?n+" "+i:"center"),this):this},$.fn.center=function(e,t,n){var i={};return"undefined"==typeof e?(i.left="50%",i.top="50%",i.marginLeft=-this.width/2,i.marginTop=-this.height/2):(e&&(i.left="50%",i.marginLeft=-this.width/2),t&&(i.top="50%",i.marginTop=-this.height/2)),n&&(delete i.left,delete i.top),this.css(i),this},$.fn.mask=function(e,t,n,i,r){return this.div.style[CSS.prefix("Mask")]=(e.strpos(".")?"url("+e+")":e)+" no-repeat",this},$.fn.blendMode=function(e,t){return t?this.div.style["background-blend-mode"]=e:this.div.style["mix-blend-mode"]=e,this},$.fn.css=function(e,t){if("boolean"==typeof t&&(skip=t,t=null),"object"!=typeof e){if(t)return this.div.style[e]=t,this;var n=this.div.style[e];return"number"!=typeof n&&(n.strpos("px")&&(n=Number(n.slice(0,-2))),"opacity"==e&&(n="number"==typeof this.div.style.opacity?this.div.style.opacity:1)),n||(n=0),n}TweenManager.clearCSSTween(this);for(var i in e){var r=e[i];("string"==typeof r||"number"==typeof r)&&("string"!=typeof r&&"opacity"!=i&&"zIndex"!=i&&(r+="px"),this.div.style[i]=r)}return this},$.fn.transform=function(e){if(!(this.multiTween&&this._cssTweens.length>1&&this.__transformTime&&Render.TIME-this.__transformTime<15)){if(this.__transformTime=Render.TIME,TweenManager.clearCSSTween(this),Device.tween.css2d){if(e)for(var t in e)"number"==typeof e[t]&&(this[t]=e[t]);else e=this;var n;this._matrix?("matrix2"==this._matrix.type?this._matrix.setTRS(this.x,this.y,this.rotation,this.scaleX||this.scale,this.scaleY||this.scale):this._matrix.setTRS(this.x,this.y,this.z,this.rotationX,this.rotationY,this.rotationZ,this.scaleX||this.scale,this.scaleY||this.scale,this.scaleZ||this.scale),n=this._matrix.getCSS()):n=TweenManager.parseTransform(e),this.__transformCache!=n&&(this.div.style[Device.styles.vendorTransform]=n,this.__transformCache=n)}return this}},$.fn.useMatrix3D=function(){return this._matrix=new Matrix4,this.x=0,this.y=0,this.z=0,this.rotationX=0,this.rotationY=0,this.rotationZ=0,this.scale=1,this},$.fn.useMatrix2D=function(){return this._matrix=new Matrix2,this.x=0,this.y=0,this.rotation=0,this.scale=1,this},$.fn.willChange=function(e){if("boolean"==typeof e)e===!0?this._willChangeLock=!0:this._willChangeLock=!1;else if(this._willChangeLock)return;var t="string"==typeof e;this._willChange&&!t||"null"==typeof e?(this._willChange=!1,this.div.style["will-change"]=""):(this._willChange=!0,this.div.style["will-change"]=t?e:Device.transformProperty+", opacity")},$.fn.backfaceVisibility=function(e){e?this.div.style[CSS.prefix("BackfaceVisibility")]="visible":this.div.style[CSS.prefix("BackfaceVisibility")]="hidden"},$.fn.enable3D=function(e,t,n){return this.div.style[CSS.prefix("TransformStyle")]="preserve-3d",e&&(this.div.style[CSS.prefix("Perspective")]=e+"px"),"undefined"!=typeof t&&(t="number"==typeof t?t+"px":t,n="number"==typeof n?n+"px":n,this.div.style[CSS.prefix("PerspectiveOrigin")]=t+" "+n),this},$.fn.disable3D=function(){return this.div.style[CSS.prefix("TransformStyle")]="",this.div.style[CSS.prefix("Perspective")]="",this},$.fn.transformPoint=function(e,t,n){var i="";return"undefined"!=typeof e&&(i+="number"==typeof e?e+"px ":e+" "),"undefined"!=typeof t&&(i+="number"==typeof t?t+"px ":t+" "),"undefined"!=typeof n&&(i+="number"==typeof n?n+"px":n),this.div.style[CSS.prefix("TransformOrigin")]=i,this},$.fn.tween=function(e,t,n,i,r,a){return"boolean"==typeof i?(a=i,i=0,r=null):"function"==typeof i&&(r=i,i=0),"boolean"==typeof r&&(a=r,r=null),i||(i=0),TweenManager._detectTween(this,e,t,n,i,r,a)},$.fn.clearTransform=function(){return"number"==typeof this.x&&(this.x=0),"number"==typeof this.y&&(this.y=0),"number"==typeof this.z&&(this.z=0),"number"==typeof this.scale&&(this.scale=1),"number"==typeof this.scaleX&&(this.scaleX=1),"number"==typeof this.scaleY&&(this.scaleY=1),"number"==typeof this.rotation&&(this.rotation=0),"number"==typeof this.rotationX&&(this.rotationX=0),"number"==typeof this.rotationY&&(this.rotationY=0),"number"==typeof this.rotationZ&&(this.rotationZ=0),"number"==typeof this.skewX&&(this.skewX=0),"number"==typeof this.skewY&&(this.skewY=0),this.div.style[Device.styles.vendorTransform]="",this},$.fn.stopTween=function(){return this._cssTween&&this._cssTween.stop(),this._mathTween&&this._mathTween.stop(),this},$.fn.keypress=function(e){this.div.onkeypress=function(t){t=t||window.event,t.code=t.keyCode?t.keyCode:t.charCode,e&&e(t)}},$.fn.keydown=function(e){this.div.onkeydown=function(t){t=t||window.event,t.code=t.keyCode,e&&e(t)}},$.fn.keyup=function(e){this.div.onkeyup=function(t){t=t||window.event,t.code=t.keyCode,e&&e(t)}},$.fn.attr=function(e,t){if(e&&t)""==t?this.div.removeAttribute(e):this.div.setAttribute(e,t);else if(e)return this.div.getAttribute(e);return this},$.fn.val=function(e){return"undefined"==typeof e?this.div.value:(this.div.value=e,this)},$.fn.change=function(e){var t=this;"select"==this._type&&(this.div.onchange=function(){e({object:t,value:t.div.value||""})})},$.fn.svgSymbol=function(e,t,n){var i=SVG.getSymbolConfig(e),r='<svg viewBox="0 0 '+i.width+" "+i.height+'" width="'+t+'" height="'+n+'"><use xlink:href="#'+i.id+'" x="0" y="0" /></svg>';this.html(r,!0)}}(),function(){var e=!!window.MSGesture,t=function(t){if("attachEvent"==Hydra.addEvent)switch(t){case"click":return"onclick";case"mouseover":return"onmouseover";case"mouseout":return"onmouseleave";case"mousedown":return"onmousedown";case"mouseup":return"onmouseup";case"mousemove":return"onmousemove"}if(e)switch(t){case"touchstart":return"pointerdown";case"touchmove":return"MSGestureChange";case"touchend":return"pointerup"}return t};$.fn.click=function(e){function n(t){return i.div?Mouse._preventClicks?!1:(t.object="hit"==i.div.className?i.parent():i,t.action="click",t.pageX||(t.pageX=t.clientX,t.pageY=t.clientY),e&&e(t),void(Mouse.autoPreventClicks&&Mouse.preventClicks())):!1}var i=this;return this.div[Hydra.addEvent](t("click"),n,!0),this.div.style.cursor="pointer",this},$.fn.hover=function(e){function n(t){if(!a.div)return!1;var n=Date.now(),o=t.toElement||t.relatedTarget;if(r&&5>n-r)return r=n,!1;switch(r=n,t.object="hit"==a.div.className?a.parent():a,t.type){case"mouseout":t.action="out";break;case"mouseleave":t.action="out";break;default:t.action="over"}if(s){if(Mouse._preventClicks)return!1;if("over"==t.action)return!1;if("out"==t.action&&i(a.div,o))return!1;s=!1}else{if("out"==t.action)return!1;s=!0}t.pageX||(t.pageX=t.clientX,t.pageY=t.clientY),e&&e(t)}function i(e,t){for(var n=e.children.length-1,r=n;r>-1;r--)if(t==e.children[r])return!0;for(r=n;r>-1;r--)if(i(e.children[r],t))return!0}var r,a=this,s=!1;return this.div[Hydra.addEvent](t("mouseover"),n,!0),this.div[Hydra.addEvent](t("mouseout"),n,!0),this},$.fn.press=function(e){function n(t){if(!i.div)return!1;switch(t.object="hit"==i.div.className?i.parent():i,t.type){case"mousedown":t.action="down";break;default:t.action="up"}t.pageX||(t.pageX=t.clientX,t.pageY=t.clientY),e&&e(t)}var i=this;return this.div[Hydra.addEvent](t("mousedown"),n,!0),this.div[Hydra.addEvent](t("mouseup"),n,!0),this},$.fn.bind=function(n,i){function r(t){e&&o.msGesture&&"touchstart"==n&&o.msGesture.addPointer(t.pointerId);var i=Utils.touchEvent(t);if(e){var r=t;t={},t.x=Number(r.pageX||r.clientX),t.y=Number(r.pageY||r.clientY),t.target=r.target,t.currentTarget=r.currentTarget,t.path=[];for(var s=t.target;s;)t.path.push(s),s=s.parentElement||null;t.windowsPointer=!0}else t.x=i.x,t.y=i.y;for(var u=0;u<a.length;u++){var c=a[u];c.target==t.currentTarget&&c.callback(t)}}if(this._events||(this._events={}),e&&this==__window)return Stage.bind(n,i);"touchstart"==n?Device.mobile||(n="mousedown"):"touchmove"==n?(Device.mobile||(n="mousemove"),e&&!this.div.msGesture&&(this.div.msGesture=new MSGesture,this.div.msGesture.target=this.div)):"touchend"==n&&(Device.mobile||(n="mouseup")),this._events["bind_"+n]=this._events["bind_"+n]||[];var a=this._events["bind_"+n],s={},o=this.div;return s.callback=i,s.target=this.div,a.push(s),this._events["fn_"+n]||(this._events["fn_"+n]=r,this.div[Hydra.addEvent](t(n),r,!0)),this},$.fn.unbind=function(n,i){if(this._events||(this._events={}),e&&this==__window)return Stage.unbind(n,i);"touchstart"==n?Device.mobile||(n="mousedown"):"touchmove"==n?Device.mobile||(n="mousemove"):"touchend"==n&&(Device.mobile||(n="mouseup"));var r=this._events["bind_"+n];if(!r)return this;for(var a=0;a<r.length;a++){var s=r[a];s.callback==i&&r.splice(a,1)}return this._events["fn_"+n]&&!r.length&&(this.div[Hydra.removeEvent](t(n),this._events["fn_"+n],!0),this._events["fn_"+n]=null),this},$.fn.interact=function(e,t){this.hit||(this.hit=$(".hit"),this.hit.css({width:"100%",height:"100%",zIndex:99999,top:0,left:0,position:"absolute",background:"rgba(255, 255, 255, 0)"}),this.addChild(this.hit)),Device.mobile?this.hit.touchClick(e,t):this.hit.hover(e).click(t)},$.fn.touchSwipe=function(e,n){function i(e){var n=Utils.touchEvent(e);return u.div?void(1==e.touches.length&&(s=n.x,o=n.y,l=!0,u.div.addEventListener(t("touchmove"),r))):!1}function r(t){if(!u.div)return!1;if(l){var n=Utils.touchEvent(t),i=s-n.x,r=o-n.y;h.direction=null,h.moving=null,h.x=null,h.y=null,h.evt=t,Math.abs(i)>=c?(a(),i>0?h.direction="left":h.direction="right"):Math.abs(r)>=c?(a(),r>0?h.direction="up":h.direction="down"):(h.moving=!0,h.x=i,h.y=r),e&&e(h,t)}}function a(e){return u.div?(s=o=l=!1,void u.div.removeEventListener(t("touchmove"),r)):!1}if(!window.addEventListener)return this;var s,o,u=this,c=n||75,l=!1,h={};return Device.mobile&&(this.div.addEventListener(t("touchstart"),i),this.div.addEventListener(t("touchend"),a),this.div.addEventListener(t("touchcancel"),a)),this},$.fn.touchClick=function(e,n){function i(e){return c.div?(h=Utils.touchEvent(e),void(u=Utils.findDistance(l,h)>5?!0:!1)):!1}function r(e){var t=Utils.touchEvent(e);e.touchX=t.x,e.touchY=t.y,l.x=e.touchX,l.y=e.touchY}function a(t){return c.div?(o=Date.now(),t.action="over",t.object="hit"==c.div.className?c.parent():c,r(t),void(e&&!u&&e(t))):!1}function s(t){if(!c.div)return!1;var i=Date.now(),a=!1;if(t.object="hit"==c.div.className?c.parent():c,r(t),o&&750>i-o){if(Mouse._preventClicks)return!1;n&&!u&&(a=!0,t.action="click",n&&!u&&n(t),Mouse.autoPreventClicks&&Mouse.preventClicks())}e&&(t.action="out",Mouse._preventFire||e(t)),u=!1}if(!window.addEventListener)return this;var o,u,c=this,l={},h={};return Device.mobile&&(this.div.addEventListener(t("touchmove"),i,!1),this.div.addEventListener(t("touchstart"),a,!1),this.div.addEventListener(t("touchend"),s,!1)),this}}(),Class(function(){function e(e,n){t[n]={},Object.defineProperty(e,n,{set:function(i){t[n]&&t[n].s&&t[n].s.call(e,i),i=null},get:function(){return t[n]&&t[n].g?t[n].g.apply(e):void 0}})}Inherit(this,Events);var t={},n={},r=[];this.classes={},this.set=function(n,i){t[n]||e(this,n),t[n].s=i},this.get=function(n,i){t[n]||e(this,n),t[n].g=i},this.delayedCall=function(e,t,n){var i=this,a=Timer.create(function(){i.destroy&&e(n),i=e=null},t||0);return r.push(a),r.length>20&&r.shift(),a},this.initClass=function(e,t,n,i,r,a,s,o){var u=Utils.timestamp();window.Hydra&&(Hydra.arguments=arguments);var c=new e(t,n,i,r,a,s,o);window.Hydra&&(Hydra.arguments=null),c.parent=this,c.destroy&&(this.classes[u]=c,this.classes[u].__id=u);var l=arguments[arguments.length-1];return Array.isArray(l)&&1==l.length&&l[0]instanceof HydraObject?l[0].addChild(c):this.element&&null!==l&&this.element.addChild(c),c},this.destroy=function(){for(var e in this.classes){var t=this.classes[e];t&&t.destroy&&t.destroy()}return this.clearTimers&&this.clearTimers(),this.classes=null,this.events&&(this.events=this.events.destroy()),this.element&&this.element.remove&&(this.element=this.container=this.element.remove()),this.parent&&this.parent.__destroyChild&&this.parent.__destroyChild(this.__id),Utils.nullObject(this)},this.clearTimers=function(){for(i=0;i<r.length;i++)clearTimeout(r[i]);r.length=0},this.active=function(e,t){return"undefined"==typeof t?n[e]:void(n[e]=t)},this.__destroyChild=function(e){delete this.classes[e]}}),Class(function(e){Inherit(this,MVC);var t={};this.push=function(e,n){t[e]=n},this.pull=function(e){return t[e]},this.initWithData=function(e){this.STATIC_DATA=e;for(var t in this){var n=this[t],i=!1;for(var r in e)r.toLowerCase().replace(/-/g,"")==t.toLowerCase()&&(i=!0,n.init&&n.init(e[r]));!i&&n.init&&n.init()}},this.loadData=function(e,t){var n=this;XHR.get(e+"?"+Utils.timestamp(),function(e){n.initWithData(e),t(e)})},this.Class=function(e){var t=e.toString().match(/function ([^\(]+)/)[1];this[t]=new e}}),Class(function(e){Inherit(this,MVC);var t,n=e.constructor.toString().match(/function ([^\(]+)/)[1];this.element=$("."+n),this.element.__useFragment=!0,this.css=function(e){return this.element.css(e),this},this.transform=function(e){return this.element.transform(e||this),this},this.tween=function(e,t,n,i,r,a){return this.element.tween(e,t,n,i,r,a)};var i=Hydra.INTERFACES[n]||Hydra.INTERFACES[n+"UI"];if(i){this.ui={};var r=Hydra.getArguments();r.push(e),t=this.element.append(i,r);var a=this.element.__append;for(var s in a)this.ui[s]=a[s];t&&(this.resize=function(){t.apply(this.ui,arguments)})}this.__call=function(){this.events.scope(this)}}),Class(function(e){Inherit(this,MVC),e=e.constructor.toString().match(/function ([^\(]+)/)[1],this.element=this.container=$("#"+e),this.element.__useFragment=!0,this.css=function(e){this.container.css(e)}}),Class(function(){Inherit(this,MVC),this.__call=function(){this.events.scope(this),delete this.__call}}),Class(function(){function e(e,n){return t(Math.random(),e,n)}function t(e,t,n){return t+(n-t)*e}var n=this;"undefined"==typeof Float32Array&&(Float32Array=Array),this.doRandom=function(t,n){return Math.round(e(t-.5,n+.5))},this.headsTails=function(e,t){return n.doRandom(0,1)?t:e},this.toDegrees=function(e){return e*(180/Math.PI)},this.toRadians=function(e){return e*(Math.PI/180)},this.findDistance=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},this.timestamp=function(){var e=Date.now()+n.doRandom(0,99999);return e.toString()},this.hitTestObject=function(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,s=t.x,o=t.y,u=t.width,c=t.height,l=n+r,h=i+a,d=s+u,f=o+c;if(s>=n&&l>=s){if(o>=i&&h>=o)return!0;if(i>=o&&f>=i)return!0}else if(n>=s&&d>=n){if(o>=i&&h>=o)return!0;if(i>=o&&f>=i)return!0}return!1},this.randomColor=function(){var e="#"+Math.floor(16777215*Math.random()).toString(16);return e.length<7&&(e=this.randomColor()),e},this.touchEvent=function(e){var t={};return t.x=0,t.y=0,e.windowsPointer?e:e?(Device.mobile&&(e.touches||e.changedTouches)?e.changedTouches.length?(t.x=e.changedTouches[0].pageX,t.y=e.changedTouches[0].pageY-Mobile.scrollTop):(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY-Mobile.scrollTop):(t.x=e.pageX,t.y=e.pageY),t):t},this.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},this.constrain=function(e,t,n){return Math.min(Math.max(e,Math.min(t,n)),Math.max(t,n))},this.nullObject=function(e){if(e.destroy||e.div)for(var t in e)"undefined"!=typeof e[t]&&(e[t]=null);return null},this.convertRange=this.range=function(e,t,i,r,a,s){var o=i-t,u=a-r,c=(e-t)*u/o+r;return s?n.clamp(c,r,a):c},String.prototype.strpos=function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(this.indexOf(e[t])>-1)return!0;return!1}return-1!=this.indexOf(e)},String.prototype.clip=function(e,t){return this.length>e?this.slice(0,e)+t:this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Array.prototype.findAndRemove=function(e){var t=this.indexOf(e);return t>-1?this.splice(t,1):void 0}},"Static"),Class(function(){function e(e){var t=e.match(/[A-Z]/),n=t?t.index:null;if(n){var i=e.slice(0,n),r=e.slice(n);e=i+"-"+r.toLowerCase()}return e}function t(e){var t=e.match(/\-/),n=t?t.index:null;if(n){var i=e.slice(0,n),r=e.slice(n).slice(1),a=r.charAt(0);r=r.slice(1),r=a.toUpperCase()+r,e=i+r}return e}function n(){i.innerHTML=r,a=!1}var i,r,a;Hydra.ready(function(){r="",i=document.createElement("style"),i.type="text/css",document.getElementsByTagName("head")[0].appendChild(i)}),this._read=function(){return r},this._write=function(e){r=e,a||(a=!0,Render.nextFrame(n))},this._toCSS=e,this.style=function(t,n){var r=t+" {";for(var a in n){var s=e(a),o=n[a];"string"!=typeof o&&"opacity"!=a&&(o+="px"),r+=s+":"+o+"!important;"}r+="}",i.innerHTML+=r},this.get=function(e,n){for(var r=new Object,a=i.innerHTML.split(e+" {"),s=0;s<a.length;s++){var o=a[s];if(o.length){var u=o.split("!important;");for(var c in u)if(u[c].strpos(":")){var l=u[c].split(":");"px"==l[1].slice(-2)&&(l[1]=Number(l[1].slice(0,-2))),r[t(l[0])]=l[1]}}}return n?r[n]:r},this.textSize=function(e){var t=e.clone();t.css({position:"relative",cssFloat:"left",styleFloat:"left",marginTop:-99999,width:"",height:""}),__body.addChild(t);var n=t.div.offsetWidth,i=t.div.offsetHeight;return t.remove(),{width:n,height:i}},this.prefix=function(e){return""==Device.styles.vendor?e.charAt(0).toLowerCase()+e.slice(1):Device.styles.vendor+e}},"Static"),Class(function t(){function e(e){var t=i||document.createElement("div"),n="Khtml ms O Moz Webkit".split(" "),r=n.length;if(i=t,e in t.style)return!0;for(e=e.replace(/^[a-z]/,function(e){return e.toUpperCase()});r--;)if(n[r]+e in t.style)return!0;return!1}function n(){r.getFullscreen()||(HydraEvents._fireEvent(HydraEvents.FULLSCREEN,{fullscreen:!1}),Render.stop(n))}var i,r=this;this.agent=navigator.userAgent.toLowerCase(),this.detect=function(e){"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)if(this.agent.strpos(e[t]))return!0;return!1};var a=function(){var e="";if(window._NODE_)e="webkit";else{var t=window.getComputedStyle(document.documentElement,"");e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];var n="WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1]}var i=r.detect("trident");return{unprefixed:i&&!r.detect("msie 9"),dom:n,lowercase:e,css:"-"+e+"-",js:(i?e[0]:e[0].toUpperCase())+e.substr(1)}}();this.mobile=!window._NODE_&&("ontouchstart"in window||"onpointerdown"in window)&&this.detect(["ios","iphone","ipad","windows","android","blackberry"])?{}:!1,this.mobile&&this.detect("windows")&&!this.detect("touch")&&(this.mobile=!1),this.mobile&&(this.mobile.tablet=screen.width>1e3||screen.height>900,this.mobile.phone=!this.mobile.tablet),this.browser={},this.browser.ie=function(){return r.detect("msie")?!0:r.detect("trident")&&r.detect("rv:")?!0:r.detect("windows")&&r.detect("edge")?!0:void 0}(),this.browser.chrome=!this.browser.ie&&this.detect("chrome"),this.browser.safari=!this.browser.chrome&&!this.browser.ie&&this.detect("safari"),this.browser.firefox=this.detect("firefox"),this.browser.version=function(){try{if(r.browser.chrome)return Number(r.agent.split("chrome/")[1].split(".")[0]);if(r.browser.firefox)return Number(r.agent.split("firefox/")[1].split(".")[0]);if(r.browser.safari)return Number(r.agent.split("version/")[1].split(".")[0].charAt(0));if(r.browser.ie)return r.detect("msie")?Number(r.agent.split("msie ")[1].split(".")[0]):r.detect("rv:")?Number(r.agent.split("rv:")[1].split(".")[0]):Number(r.agent.split("edge/")[1].split(".")[0])}catch(e){return-1}}(),this.vendor=a.css,this.transformProperty=function(){switch(a.lowercase){case"moz":return"-moz-transform";case"webkit":return"-webkit-transform";case"o":return"-o-transform";case"ms":return"-ms-transform";default:return"transform"}}(),this.system={},this.system.retina=window.devicePixelRatio>1,this.system.webworker="undefined"!=typeof window.Worker,this.system.offline="undefined"!=typeof window.applicationCache,window._NODE_||(this.system.geolocation="undefined"!=typeof navigator.geolocation,this.system.pushstate="undefined"!=typeof window.history.pushState),this.system.webcam=!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),this.system.language=window.navigator.userLanguage||window.navigator.language,this.system.webaudio="undefined"!=typeof window.AudioContext;try{this.system.localStorage="undefined"!=typeof window.localStorage}catch(s){this.system.localStorage=!1}this.system.fullscreen="undefined"!=typeof document[a.lowercase+"CancelFullScreen"],this.system.os=function(){return r.detect("mac os")?"mac":r.detect("windows nt 6.3")?"windows8.1":r.detect("windows nt 6.2")?"windows8":r.detect("windows nt 6.1")?"windows7":r.detect("windows nt 6.0")?"windowsvista":r.detect("windows nt 5.1")?"windowsxp":r.detect("windows")?"windows":r.detect("linux")?"linux":"undetected"}(),this.pixelRatio=window.devicePixelRatio,this.media={},this.media.audio=function(){return document.createElement("audio").canPlayType?r.detect(["firefox","opera"])?"ogg":"mp3":!1}(),this.media.video=function(){var e=document.createElement("video");return e.canPlayType?t.mobile?"mp4":r.browser.chrome?"webm":r.browser.firefox||r.browser.opera?e.canPlayType('video/webm; codecs="vorbis,vp8"')?"webm":"ogv":"mp4":!1}(),this.graphics={},this.graphics.webgl=function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){}}(),this.graphics.canvas=function(){var e=document.createElement("canvas");return e.getContext?!0:!1}(),this.styles={},this.styles.filter=e("filter"),this.styles.blendMode=e("mix-blend-mode"),this.styles.vendor=a.unprefixed?"":a.js,this.styles.vendorTransition=this.styles.vendor.length?this.styles.vendor+"Transition":"transition",this.styles.vendorTransform=this.styles.vendor.length?this.styles.vendor+"Transform":"transform",this.tween={},this.tween.transition=e("transition"),this.tween.css2d=e("transform"),this.tween.css3d=e("perspective"),this.tween.complete=function(){return a.unprefixed?"transitionend":a.lowercase+"TransitionEnd"}(),this.test=function(e,t){this[e]=t()},this.openFullscreen=function(e){e=e||__body,e&&r.system.fullscreen&&(e==__body&&e.css({top:0}),e.div[a.lowercase+"RequestFullScreen"](),HydraEvents._fireEvent(HydraEvents.FULLSCREEN,{fullscreen:!0}),Render.start(n,10))},this.closeFullscreen=function(){r.system.fullscreen&&document[a.lowercase+"CancelFullScreen"](),Render.stop(n)},this.getFullscreen=function(){return r.browser.firefox?document.mozFullScreen:document[a.lowercase+"IsFullScreen"]}},"Static"),Class(function n(e){var t=n.prototype;if(e)for(var i in e)this[i]=e[i];"undefined"==typeof t.tween&&(t.tween=function(e,t,n,i,r,a){return"number"!=typeof i&&(a=r,r=i,i=0),this.stopTween(),"function"!=typeof a&&(a=null),"function"!=typeof r&&(r=null),this._tween=TweenManager.tween(this,e,t,n,i,a,r),this._tween},t.stopTween=function(){var e=this._tween;e&&e.stop&&e.stop()},t.pause=function(){var e=this._tween;e&&e.pause&&e.pause()},t.resume=function(){var e=this._tween;e&&e.resume&&e.resume()},t.copy=function(e){var t=e&&e.get?e.get():new n;for(var i in this)"number"==typeof this[i]&&(t[i]=this[i]);return t},t.copyFrom=function(e){for(var t in e)"number"==typeof e[t]&&(this[t]=e[t])},t.copyTo=function(e){for(var t in e)"number"==typeof this[t]&&(e[t]=this[t])},t.clear=function(){for(var e in this)"function"!=typeof this[e]&&delete this[e];return this})}),Class(function(e,t){Inherit(this,Component);var n=[];!function(){if(e){t=t||10,e=e||Object;for(var i=0;t>i;i++)n.push(new e)}}(),
this.get=function(){return n.shift()},this.empty=function(){n.length=0},this.put=function(e){e&&n.push(e)},this.insert=function(e){"undefined"==typeof e.push&&(e=[e]);for(var t=0;t<e.length;t++)n.push(e[t])},this.destroy=function(){for(var e=0;e<n.length;e++)n[e].destroy&&n[e].destroy();return n=null,this._destroy()}}),Class(function r(){var e=r.prototype;this.length=0,this.first=null,this.last=null,this.current=null,this.prev=null,"undefined"==typeof e.push&&(e.push=function(e){this.first?(e.__next=this.first,e.__prev=this.last,this.last.__next=e,this.last=e):(this.first=e,this.last=e,e.__prev=e,e.__next=e),this.length++},e.remove=function(e){e&&e.__next&&(this.length<=1?this.empty():(e==this.first?(this.first=e.__next,this.last.__next=this.first,this.first.__prev=this.last):e==this.last?(this.last=e.__prev,this.last.__next=this.first,this.first.__prev=this.last):(e.__prev.__next=e.__next,e.__next.__prev=e.__prev),this.length--),e.__prev=null,e.__next=null)},e.empty=function(){this.first=null,this.last=null,this.current=null,this.prev=null,this.length=0},e.start=function(){return this.current=this.first,this.prev=this.current,this.current},e.next=function(){return this.current&&(this.current=this.current.__next,1!=this.length&&this.prev.__next!=this.first)?(this.prev=this.current,this.current):void 0},e.destroy=function(){return Utils.nullObject(this),null})}),Class(function(){var e=this;Namespace(this),this.create=function(){return new e.Broadcaster(arguments)},this.batch=function(){return new e.Batch}},"Static"),Pact.Class(function(e){function t(e){for(var t=[],n=e[0],i=1;i<e.length;i++)t.push(e[i]);t.push(a._fire),n.apply(n,t)}var n,i,r,a=this,s=[];this._fire=this.fire=function(){if(!r){r=!0;var e=arguments,t=!1;Render.nextFrame(function(){if(i||n){var o=e[0],u=e[1];o instanceof Error?(i&&i.apply(a,[o]),t=!0):u instanceof Error?(i&&i.apply(a,[u]),t=!0):(!o&&u&&n&&(n.apply(a,[u]),t=!0),!u&&o&&n&&(n.apply(a,[o]),t=!0))}if(!t&&s.length){var c=s.shift();c.apply(a,e),s.length&&(r=!1)}})}},this.exec=function(){return t(arguments),this},this.then=function(e){return s.push(e),this},this.error=function(e){return i=e,this},this.success=function(e){return n=e,this},e.length&&t(e)}),Pact.Class(function(){function e(){this.data=arguments,o.push(this),i(),r.events.fire(HydraEvents.UPDATE)}function t(){this.data=arguments,u.push(this),i(),r.events.fire(HydraEvents.UPDATE)}function n(){this.data=arguments,s.push(this),i(),r.events.fire(HydraEvents.UPDATE)}function i(){a++,a==c.length&&r.events.fire(HydraEvents.COMPLETE,{complete:s,success:o,error:u})}Inherit(this,Events);var r=this,a=0,s=[],o=[],u=[],c=[];this.push=function(i){i.then(n).error(t).success(e),c.push(i)},this.timeout=function(){r.events.fire(HydraEvents.COMPLETE,{complete:s,success:o,error:u})}}),Class(function(){function e(e){if(n.ready=!0,e.windowsPointer)n.x=e.x,n.y=e.y;else{var t=Utils.touchEvent(e);n.x=t.x,n.y=t.y}}var t,n=this;this.x=0,this.y=0,this.autoPreventClicks=!1,this.capture=function(i,r){return t?!1:(t=!0,n.x=i||0,n.y=r||0,void(Device.mobile?(__window.bind("touchmove",e),__window.bind("touchstart",e)):__window.bind("mousemove",e)))},this.stop=function(){return t?(t=!1,n.x=0,n.y=0,void(Device.mobile?(__window.unbind("touchmove",e),__window.unbind("touchstart",e)):__window.unbind("mousemove",e))):!1},this.preventClicks=function(){n._preventClicks=!0,n.delayedCall(function(){n._preventClicks=!1},500)},this.preventFireAfterClick=function(){n._preventFire=!0}},"Static"),Class(function(){function e(){var n=Date.now(),i=n-c,r=0,s=60;a&&(r=n-a,s=1e3/r),a=n,o.FPS=s,o.TIME=n,o.DELTA=r;for(var l=u.length-1;l>-1;l--){var h=u[l];if(h.fps){if(f+=r>200?0:r,f<1e3/h.fps)continue;f-=1e3/h.fps}h(n,i,r,s,h.frameCount++)}d.length&&t(),requestAnimationFrame(e)}function t(){var e=d;d=d==l?h:l;for(var t=e.start();t;){var n=t;t(),t=e.next(),n.__prev=n.__next=n=null}e.empty()}function n(){HydraEvents._addEvent(HydraEvents.BROWSER_FOCUS,i,o)}function i(e){"focus"==e.type&&(a=Date.now())}var r,a,s,o=this,u=[],c=Date.now(),l=new LinkedList,h=new LinkedList,d=l,f=0;this.TIME=Date.now(),this.TARGET_FPS=60,function(){THREAD||(requestAnimationFrame(e),Hydra.ready(n))}(),this.startRender=this.start=function(e,t){u.length-1;this.TARGET_FPS<60&&(t=this.TARGET_FPS),"number"==typeof t&&(e.fps=t),e.frameCount=0,-1==u.indexOf(e)&&u.push(e)},this.stopRender=this.stop=function(e){var t=u.indexOf(e);t>-1&&u.splice(t,1)},this.startTimer=function(e){s=e||"Timer",console.time&&!window._NODE_?console.time(s):r=Date.now()},this.stopTimer=function(){console.time&&!window._NODE_?console.timeEnd(s):console.log("Render "+s+": "+(Date.now()-r))},this.nextFrame=function(e){d.push(e)},this.setupTween=function(e){o.nextFrame(function(){o.nextFrame(e)})},window.defer=this.nextFrame},"Static"),Class(function a(){var e=[],t={};this.BROWSER_FOCUS="hydra_focus",this.HASH_UPDATE="hydra_hash_update",this.COMPLETE="hydra_complete",this.PROGRESS="hydra_progress",this.UPDATE="hydra_update",this.LOADED="hydra_loaded",this.END="hydra_end",this.FAIL="hydra_fail",this.SELECT="hydra_select",this.ERROR="hydra_error",this.READY="hydra_ready",this.RESIZE="hydra_resize",this.CLICK="hydra_click",this.HOVER="hydra_hover",this.MESSAGE="hydra_message",this.ORIENTATION="orientation",this.BACKGROUND="background",this.BACK="hydra_back",this.PREVIOUS="hydra_previous",this.NEXT="hydra_next",this.RELOAD="hydra_reload",this.FULLSCREEN="hydra_fullscreen",this._checkDefinition=function(e){if("undefined"==typeof e)throw"Undefined event"},this._addEvent=function(t,n,i){this._checkDefinition&&this._checkDefinition(t);var r=new Object;r.evt=t,r.object=i,r.callback=n,e.push(r)},this._removeEvent=function(t,n){this._checkDefinition&&this._checkDefinition(t),defer(function(){for(var i=e.length-1;i>-1;i--)e[i].evt==t&&e[i].callback==n&&(e[i]=null,e.splice(i,1))})},this._destroyEvents=function(t){for(var n=e.length-1;n>-1;n--)e[n].object==t&&(e[n]=null,e.splice(n,1))},this._fireEvent=function(n,i){this._checkDefinition&&this._checkDefinition(n);var r=!0;i=i||t,i.cancel=function(){r=!1};for(var a=0;a<e.length;a++)if(e[a].evt==n){if(!r)return!1;e[a].callback(i)}},this._consoleEvents=function(){console.log(e)},this.createLocalEmitter=function(e){var t=new a;e.on=t._addEvent,e.off=t._removeEvent,e.fire=t._fireEvent}},"Static"),Class(function(e){this.events={};var t={},n={};this.events.subscribe=function(t,n){return HydraEvents._addEvent(t,n._fire?n._fire:n,e),n},this.events.unsubscribe=function(e,t){HydraEvents._removeEvent(e,t._fire?t._fire:t)},this.events.fire=function(i,r,a){r=r||n,HydraEvents._checkDefinition(i),t[i]?(r.target=r.target||e,t[i](r),r.target=null):a||HydraEvents._fireEvent(i,r)},this.events.add=function(e,n){return HydraEvents._checkDefinition(e),t[e]=n._fire?n._fire:n,n},this.events.remove=function(e){HydraEvents._checkDefinition(e),t[e]&&delete t[e]},this.events.bubble=function(e,t){HydraEvents._checkDefinition(t);var n=this;e.events.add(t,function(e){n.fire(t,e)})},this.events.scope=function(t){e=t},this.events.destroy=function(){return HydraEvents._destroyEvents(e),t=null,e=null,null}}),Class(function(){function e(){Device.mobile.tablet=function(){return Stage.width>Stage.height?document.body.clientWidth>900:document.body.clientHeight>900}(),Device.mobile.phone=!Device.mobile.tablet,p.phone=Device.mobile.phone,p.tablet=Device.mobile.tablet}function t(){clearTimeout(p.fireResize),p.allowScroll||(document.body.scrollTop=0),p.fireResize=p.delayedCall(function(){Stage.width=document.body.clientWidth,Stage.height=document.body.clientHeight,e();var t=p.phone?"phone":"tablet";"iOS"==p.os&&t!=f&&p.autoResizeReload&&window.location.reload(),p.orientation=Stage.width>Stage.height?"landscape":"portrait",p.events.fire(HydraEvents.RESIZE)},100)}function n(e){var t=Utils.touchEvent(e),n=e.target,i="INPUT"==n.nodeName||"TEXTAREA"==n.nodeName||"SELECT"==n.nodeName||"A"==n.nodeName;if(!p.allowScroll&&!i){if(c){if(!l)return;if("Chrome"==p.browser&&t.y<50)return void e.stopPropagation()}if(v)return e.preventDefault();var r=!0;for(n=e.target;n.parentNode;)n._scrollParent&&(r=!1,m.target=n,m.y=t.y),n=n.parentNode;r&&e.preventDefault()}}function i(){var e=Date.now();o&&e-o>p.sleepTime&&p.events.fire(HydraEvents.BACKGROUND),o=e}function r(){u=!0,v=!1,c=Stage.height,__body.css({height:3*Stage.height}),Stage.css({position:"fixed"}),__window.bind("scroll",a),setInterval(s,1e3)}function a(e){d||(Stage.width=document.body.clientWidth,Stage.height=document.body.clientHeight,p.scrollTop=document.body.scrollTop,Stage.height!=h&&p.events.fire(HydraEvents.RESIZE),h=Stage.height,p.scrollTop>20&&(l||p.events.fire(HydraEvents.FULLSCREEN,{fullscreen:!0}),l=!0,clearTimeout(p.changeHeight),p.changeHeight=p.delayedCall(function(){c=Stage.height},100)),s())}function s(e){(document.body.clientHeight<c&&l||e)&&(Stage.height=document.body.clientHeight,l=!1,c=Stage.height,document.body.scrollTop=0,t(),p.events.fire(HydraEvents.FULLSCREEN,{fullscreen:!1}))}Inherit(this,Component);var o,u,c,l,h,d,f,p=this,v=!0,m={};if(this.sleepTime=1e4,this.scrollTop=0,this.autoResizeReload=!0,Device.mobile){for(var y in Device.browser)Device.browser[y]=!1;setInterval(i,250),this.phone=Device.mobile.phone,this.tablet=Device.mobile.tablet,this.orientation=90==Math.abs(window.orientation)?"landscape":"portrait",this.os=function(){return Device.detect("windows","iemobile")?"Windows":Device.detect(["ipad","iphone"])?"iOS":Device.detect(["android","kindle"])?"Android":Device.detect("blackberry")?"Blackberry":"Unknown"}(),this.version=function(){try{if("iOS"==p.os){var e=Device.agent.split("os ")[1].split("_"),t=e[0],n=e[1].split(" ")[0];return Number(t+"."+n)}if("Android"==p.os){var i=Device.agent.split("android ")[1].split(";")[0];return i.length>3&&(i=i.slice(0,-2)),Number(i)}if("Windows"==p.os)return Device.agent.strpos("rv:11")?11:Number(Device.agent.split("windows phone ")[1].split(";")[0])}catch(r){}return-1}(),this.browser=function(){return"iOS"==p.os?Device.detect("crios")?"Chrome":Device.detect("safari")?"Safari":"Unknown":"Android"==p.os?Device.detect("chrome")?"Chrome":Device.detect("firefox")?"Firefox":"Browser":"Windows"==p.os?"IE":"Unknown"}(),Hydra.ready(function(){window.onresize=t,"Safari"!=p.browser||p.NativeCore&&p.NativeCore.active||(document.body.scrollTop=0,__body.css({height:"101%"})),Stage.width=document.body.clientWidth,Stage.height=document.body.clientHeight,p.orientation=Stage.width>Stage.height?"landscape":"portrait",p.NativeCore&&p.NativeCore.active?Stage.css({overflow:"hidden"}):window.addEventListener("touchstart",n),e(),f=p.phone?"phone":"tablet","Android"==p.os&&p.delayedCall(t,50)})}this.Class=window.Class,this.fullscreen=function(){return p.NativeCore&&p.NativeCore.active?void 0:"Android"==p.os?(__window.bind("touchstart",function(){Device.openFullscreen()}),!0):"iOS"==p.os&&p.version>=7&&("Chrome"==p.browser||"Safari"==p.browser)?(r(),!0):!1},this.overflowScroll=function(e,t){if(!Device.mobile)return!1;var n=!!t.x,i=!!t.y,r={"-webkit-overflow-scrolling":"touch"};(!n&&!i||n&&i)&&(r.overflow="scroll"),!n&&i&&(r.overflowY="scroll",r.overflowX="hidden"),n&&!i&&(r.overflowX="scroll",r.overflowY="hidden"),e.css(r),e.div._scrollParent=!0,v=!1,e.div._preventEvent=function(e){e.stopPropagation()},e.div.addEventListener("touchmove",e.div._preventEvent)},this.removeOverflowScroll=function(e){e.css({overflow:"hidden",overflowX:"",overflowY:"","-webkit-overflow-scrolling":""}),e.div.removeEventListener("touchmove",e.div._preventEvent)},this.setOrientation=function(e){return p.System&&p.NativeCore.active?void(p.System.orientation=p.System[e.toUpperCase()]):void(window.screen&&(window.screen.lockOrientation&&("landscape"==e?window.screen.lockOrientation("landscape-primary","landscape-secondary"):window.screen.lockOrientation("portrait-primary","portrait-secondary")),window.screen.orientation&&("landscape"==e?window.screen.orientation.lock("landscape-primary","landscape-secondary"):window.screen.orientation.lock("portrait-primary","portrait-secondary"))))},this.isNative=function(){return p.NativeCore&&p.NativeCore.active}},"Static"),Class(function(){function e(){for(var e in n)for(var t in n[e]){var i=n[e][t];i._ready||(i._ready=!0,i.exec&&i.exec())}}function t(e,t){var i=n[e][t];return i._ready||(i._ready=!0,i.exec&&i.exec()),i}var n={};!function(){defer(e)}(),this.push=function(e){},this.Module=function(e){var t=new e,i=e.toString().slice(0,100).match(/function ([^\(]+)/);i?(t._ready=!0,i=i[1],n[i]={index:t}):(n[t.module]||(n[t.module]={}),n[t.module][t.path]=t)},this.require=function(e){var n;return e.strpos("/")?(n=e.split("/")[0],e=e.replace(n+"/","")):(n=e,e="index"),t(n,e).exports},window.Module=this.Module,window._NODE_||(window.requireNative=window.require,window.require=this.require)},"Static"),Class(function(){function e(e,t,n){for(var r=0;r<i.length;r++){var a=i[r];a.current+=n,a.current>=a.time&&(a(),i.findAndRemove(a))}}function t(e){for(var t=i.length-1;t>-1;t--){var n=i[t];if(n.ref==e)return n}}var n,i=[];!function(){Render.start(e)}(),n=window.clearTimeout,window.clearTimeout=function(e){var r=t(e);r?i.findAndRemove(r):n(e)},this.create=function(e,t){return e.time=t,e.current=0,e.ref=Utils.timestamp(),i.push(e),e.ref}},"static"),Class(function s(e){function t(e){e instanceof s?n(e):"number"==typeof e?i(e):Array.isArray(e)?r(e):i(Number("0x"+e.slice(1)))}function n(e){c.r=e.r,c.g=e.g,c.b=e.b}function i(e){e=Math.floor(e),c.r=(e>>16&255)/255,c.g=(e>>8&255)/255,c.b=(255&e)/255}function r(e){c.r=e[0],c.g=e[1],c.b=e[2]}function a(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}Inherit(this,Component);var o,u,c=this;this.r=1,this.g=1,this.b=1,function(){t(e)}(),this.set=function(e){return t(e),this},this.setRGB=function(e,t,n){return this.r=e,this.g=t,this.b=n,this},this.setHSL=function(e,t,n){if(0===t)this.r=this.g=this.b=n;else{var i=.5>=n?n*(1+t):n+t-n*t,r=2*n-i;this.r=a(r,i,e+1/3),this.g=a(r,i,e),this.b=a(r,i,e-1/3)}return this},this.offsetHSL=function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},this.getStyle=function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},this.getHex=function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},this.getHexString=function(){return"#"+("000000"+this.getHex().toString(16)).slice(-6)},this.getHSL=function(){o=o||{h:0,s:0,l:0};var e,t,n=o,i=this.r,r=this.g,a=this.b,s=Math.max(i,r,a),u=Math.min(i,r,a),c=(u+s)/2;if(u===s)e=0,t=0;else{var l=s-u;switch(t=.5>=c?l/(s+u):l/(2-s-u),s){case i:e=(r-a)/l+(a>r?6:0);break;case r:e=(a-i)/l+2;break;case a:e=(i-r)/l+4}e/=6}return n.h=e,n.s=t,n.l=c,n},this.add=function(e){this.r+=e.r,this.g+=e.g,this.b+=e.b},this.mix=function(e,t){this.r=this.r*(1-t)+e.r*t,this.g=this.g*(1-t)+e.g*t,this.b=this.b*(1-t)+e.b*t},this.addScalar=function(e){this.r+=e,this.g+=e,this.b+=e},this.multiply=function(e){this.r*=e.r,this.g*=e.g,this.b*=e.b},this.multiplyScalar=function(e){this.r*=e,this.g*=e,this.b*=e},this.clone=function(){return new s([this.r,this.g,this.b])},this.toArray=function(){return u||(u=[]),u[0]=this.r,u[1]=this.g,u[2]=this.b,u}}),Class(function(){function e(e,t,n){this.x=e,this.y=t,this.z=n}function t(e){return e*e*e*(e*(6*e-15)+10)}function n(e,t,n){return(1-n)*e+n*t}var i=this;e.prototype.dot2=function(e,t){return this.x*e+this.y*t},e.prototype.dot3=function(e,t,n){return this.x*e+this.y*t+this.z*n};var r=[new e(1,1,0),new e(-1,1,0),new e(1,-1,0),new e(-1,-1,0),new e(1,0,1),new e(-1,0,1),new e(1,0,-1),new e(-1,0,-1),new e(0,1,1),new e(0,-1,1),new e(0,1,-1),new e(0,-1,-1)],a=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),o=new Array(512);i.seed=function(e){e>0&&1>e&&(e*=65536),e=Math.floor(e),256>e&&(e|=e<<8);for(var t=0;256>t;t++){var n;n=1&t?a[t]^255&e:a[t]^e>>8&255,s[t]=s[t+256]=n,o[t]=o[t+256]=r[n%12]}},i.seed(0);var u=.5*(Math.sqrt(3)-1),c=(3-Math.sqrt(3))/6,l=1/3,h=1/6;i.simplex2=function(e,t){var n,i,r,a,l,h=(e+t)*u,d=Math.floor(e+h),f=Math.floor(t+h),p=(d+f)*c,v=e-d+p,m=t-f+p;v>m?(a=1,l=0):(a=0,l=1);var y=v-a+c,g=m-l+c,w=v-1+2*c,b=m-1+2*c;d&=255,f&=255;var _=o[d+s[f]],E=o[d+a+s[f+l]],T=o[d+1+s[f+1]],C=.5-v*v-m*m;0>C?n=0:(C*=C,n=C*C*_.dot2(v,m));var S=.5-y*y-g*g;0>S?i=0:(S*=S,i=S*S*E.dot2(y,g));var x=.5-w*w-b*b;return 0>x?r=0:(x*=x,r=x*x*T.dot2(w,b)),70*(n+i+r)},i.simplex3=function(e,t,n){var i,r,a,u,c,d,f,p,v,m,y=(e+t+n)*l,g=Math.floor(e+y),w=Math.floor(t+y),b=Math.floor(n+y),_=(g+w+b)*h,E=e-g+_,T=t-w+_,C=n-b+_;E>=T?T>=C?(c=1,d=0,f=0,p=1,v=1,m=0):E>=C?(c=1,d=0,f=0,p=1,v=0,m=1):(c=0,d=0,f=1,p=1,v=0,m=1):C>T?(c=0,d=0,f=1,p=0,v=1,m=1):C>E?(c=0,d=1,f=0,p=0,v=1,m=1):(c=0,d=1,f=0,p=1,v=1,m=0);var S=E-c+h,x=T-d+h,M=C-f+h,R=E-p+2*h,I=T-v+2*h,H=C-m+2*h,A=E-1+3*h,D=T-1+3*h,O=C-1+3*h;g&=255,w&=255,b&=255;var z=o[g+s[w+s[b]]],k=o[g+c+s[w+d+s[b+f]]],N=o[g+p+s[w+v+s[b+m]]],P=o[g+1+s[w+1+s[b+1]]],L=.6-E*E-T*T-C*C;0>L?i=0:(L*=L,i=L*L*z.dot3(E,T,C));var U=.6-S*S-x*x-M*M;0>U?r=0:(U*=U,r=U*U*k.dot3(S,x,M));var j=.6-R*R-I*I-H*H;0>j?a=0:(j*=j,a=j*j*N.dot3(R,I,H));var F=.6-A*A-D*D-O*O;return 0>F?u=0:(F*=F,u=F*F*P.dot3(A,D,O)),32*(i+r+a+u)},i.perlin=function(e){return i.perlin2(e,0)},i.perlin2=function(e,i){var r=Math.floor(e),a=Math.floor(i);e-=r,i-=a,r=255&r,a=255&a;var u=o[r+s[a]].dot2(e,i),c=o[r+s[a+1]].dot2(e,i-1),l=o[r+1+s[a]].dot2(e-1,i),h=o[r+1+s[a+1]].dot2(e-1,i-1),d=t(e);return n(n(u,l,d),n(c,h,d),t(i))},i.perlin3=function(e,i,r){var a=Math.floor(e),u=Math.floor(i),c=Math.floor(r);e-=a,i-=u,r-=c,a=255&a,u=255&u,c=255&c;var l=o[a+s[u+s[c]]].dot3(e,i,r),h=o[a+s[u+s[c+1]]].dot3(e,i,r-1),d=o[a+s[u+1+s[c]]].dot3(e,i-1,r),f=o[a+s[u+1+s[c+1]]].dot3(e,i-1,r-1),p=o[a+1+s[u+s[c]]].dot3(e-1,i,r),v=o[a+1+s[u+s[c+1]]].dot3(e-1,i,r-1),m=o[a+1+s[u+1+s[c]]].dot3(e-1,i-1,r),y=o[a+1+s[u+1+s[c+1]]].dot3(e-1,i-1,r-1),g=t(e),w=t(i),b=t(r);return n(n(n(l,p,g),n(h,v,g),b),n(n(d,m,g),n(f,y,g),b),w)}},"Static"),Class(function o(){function e(e){e=e||_.data,e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}function t(e){return e=Math.abs(e)<1e-6?0:e}var n,i,r,a,s,u,c,l,h,d,f,p,v,m,y,g,w,b,_=this,E=o.prototype;this.type="matrix2",this.data=new Float32Array(9),function(){e()}(),"undefined"==typeof E.identity&&(E.identity=function(t){return e(t),this},E.transformVector=function(e){var t=this.data,n=e.x,i=e.y;return e.x=t[0]*n+t[1]*i+t[2],e.y=t[3]*n+t[4]*i+t[5],e},E.setTranslation=function(e,t,n){var i=n||this.data;return i[0]=1,i[1]=0,i[2]=e,i[3]=0,i[4]=1,i[5]=t,i[6]=0,i[7]=0,i[8]=1,this},E.getTranslation=function(e){var t=this.data;return e=e||new Vector2,e.x=t[2],e.y=t[5],e},E.setScale=function(e,t,n){var i=n||this.data;return i[0]=e,i[1]=0,i[2]=0,i[3]=0,i[4]=t,i[5]=0,i[6]=0,i[7]=0,i[8]=1,this},E.setShear=function(e,t,n){var i=n||this.data;return i[0]=1,i[1]=e,i[2]=0,i[3]=t,i[4]=1,i[5]=0,i[6]=0,i[7]=0,i[8]=1,this},E.setRotation=function(e,t){var n=t||this.data,i=Math.cos(e),r=Math.sin(e);return n[0]=i,n[1]=-r,n[2]=0,n[3]=r,n[4]=i,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},E.setTRS=function(e,t,n,i,r){var a=this.data,s=Math.cos(n),o=Math.sin(n);return a[0]=s*i,a[1]=-o*r,a[2]=e,a[3]=o*i,a[4]=s*r,a[5]=t,a[6]=0,a[7]=0,a[8]=1,this},E.translate=function(e,t){return this.identity(o.__TEMP__),this.setTranslation(e,t,o.__TEMP__),this.multiply(o.__TEMP__)},E.rotate=function(e){return this.identity(o.__TEMP__),this.setTranslation(e,o.__TEMP__),this.multiply(o.__TEMP__)},E.scale=function(e,t){return this.identity(o.__TEMP__),this.setScale(e,t,o.__TEMP__),this.multiply(o.__TEMP__)},E.shear=function(e,t){return this.identity(o.__TEMP__),this.setRotation(e,t,o.__TEMP__),this.multiply(o.__TEMP__)},E.multiply=function(e){var t=this.data,o=e.data||e;return n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],d=o[0],f=o[1],p=o[2],v=o[3],m=o[4],y=o[5],g=o[6],w=o[7],b=o[8],t[0]=n*d+i*v+r*g,t[1]=n*f+i*m+r*w,t[2]=n*p+i*y+r*b,t[3]=a*d+s*v+u*g,t[4]=a*f+s*m+u*w,t[5]=a*p+s*y+u*b,this},E.inverse=function(e){e=e||this;var t=e.data,o=this.data;n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8];var d=e.determinant();Math.abs(d)<1e-7;var f=1/d;return o[0]=(s*h-l*u)*f,o[1]=(r*l-i*h)*f,o[2]=(i*u-r*s)*f,o[3]=(u*c-a*h)*f,o[4]=(n*h-r*c)*f,o[5]=(a*r-n*u)*f,o[6]=(a*l-c*s)*f,o[7]=(c*i-n*l)*f,o[8]=(n*s-a*i)*f,e},E.determinant=function(){var e=this.data;return n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],n*(s*h-l*u)-i*(a*h-u*c)+r*(a*l*s*c)},E.copyTo=function(e){var t=this.data,n=e.data||e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],e},E.copyFrom=function(e){var t=this.data,n=e.data||e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},E.getCSS=function(e){var n=this.data;return Device.tween.css3d&&!e?"matrix3d("+t(n[0])+", "+t(n[3])+", 0, 0, "+t(n[1])+", "+t(n[4])+", 0, 0, 0, 0, 1, 0, "+t(n[2])+", "+t(n[5])+", 0, 1)":"matrix("+t(n[0])+", "+t(n[3])+", "+t(n[1])+", "+t(n[4])+", "+t(n[2])+", "+t(n[5])+")"})},function(){Matrix2.__TEMP__=(new Matrix2).data}),Class(function u(){function e(e){var t=e||n.data;t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1}function t(e){return Math.abs(e)<1e-6?0:e}var n=this,i=u.prototype;this.type="matrix4",this.data=new Float32Array(16),function(){e()}(),"undefined"==typeof i.identity&&(i.identity=function(){return e(),this},i.transformVector=function(e,t){var n=this.data,i=e.x,r=e.y,a=e.z,s=e.w;return t=t||e,t.x=n[0]*i+n[4]*r+n[8]*a+n[12]*s,t.y=n[1]*i+n[5]*r+n[9]*a+n[13]*s,t.z=n[2]*i+n[6]*r+n[10]*a+n[14]*s,t},i.multiply=function(e,t){var n,i,r,a,s,o,u,c,l,h,d,f,p,v,m,y,g,w,b,_,E,T,C,S,x,M,R,I,H,A,D,O,z=this.data,k=e.data||e;return n=z[0],i=z[1],r=z[2],a=z[3],s=z[4],o=z[5],u=z[6],c=z[7],l=z[8],h=z[9],d=z[10],f=z[11],p=z[12],v=z[13],m=z[14],y=z[15],g=k[0],w=k[1],b=k[2],_=k[3],E=k[4],T=k[5],C=k[6],S=k[7],x=k[8],M=k[9],R=k[10],I=k[11],H=k[12],A=k[13],D=k[14],O=k[15],z[0]=n*g+s*w+l*b+p*_,z[1]=i*g+o*w+h*b+v*_,z[2]=r*g+u*w+d*b+m*_,z[3]=a*g+c*w+f*b+y*_,z[4]=n*E+s*T+l*C+p*S,z[5]=i*E+o*T+h*C+v*S,z[6]=r*E+u*T+d*C+m*S,z[7]=a*E+c*T+f*C+y*S,z[8]=n*x+s*M+l*R+p*I,z[9]=i*x+o*M+h*R+v*I,z[10]=r*x+u*M+d*R+m*I,z[11]=a*x+c*M+f*R+y*I,z[12]=n*H+s*A+l*D+p*O,z[13]=i*H+o*A+h*D+v*O,z[14]=r*H+u*A+d*D+m*O,z[15]=a*H+c*A+f*D+y*O,this},i.setTRS=function(t,n,i,r,a,s,o,u,c,l){l=l||this;var h=l.data;e(l);var d=Math.sin(r),f=Math.cos(r),p=Math.sin(a),v=Math.cos(a),m=Math.sin(s),y=Math.cos(s);return h[0]=(v*y+p*d*m)*o,h[1]=(-v*m+p*d*y)*o,h[2]=p*f*o,h[4]=m*f*u,h[5]=y*f*u,h[6]=-d*u,h[8]=(-p*y+v*d*m)*c,h[9]=(m*p+v*d*y)*c,h[10]=v*f*c,h[12]=t,h[13]=n,h[14]=i,l},i.setScale=function(t,n,i,r){r=r||this;var a=r.data||r;return e(r),a[0]=t,a[5]=n,a[10]=i,r},i.setTranslation=function(t,n,i,r){r=r||this;var a=r.data||r;return e(r),a[12]=t,a[13]=n,a[14]=i,r},i.setRotation=function(t,n,i,r){r=r||this;var a=r.data||r;e(r);var s=Math.sin(t),o=Math.cos(t),u=Math.sin(n),c=Math.cos(n),l=Math.sin(i),h=Math.cos(i);return a[0]=c*h+u*s*l,a[1]=-c*l+u*s*h,a[2]=u*o,a[4]=l*o,a[5]=h*o,a[6]=-s,a[8]=-u*h+c*s*l,a[9]=l*u+c*s*h,a[10]=c*o,r},i.setLookAt=function(e,t,n,i){i=i||this;var r=i.data||i,a=D3.m4v31,s=D3.m4v32,o=D3.m4v33;return a.subVectors(t,e).normalize(),s.cross(a,n).normalize(),o.cross(s,a),r[0]=s.x,r[1]=o.x,r[2]=-a.x,r[3]=0,r[4]=s.y,r[5]=o.y,r[6]=-a.y,r[7]=0,r[8]=s.z,r[9]=o.z,r[10]=-a.z,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this.translate(-e.x,-e.y,-e.z),this},i.setPerspective=function(e,t,n,i,r){var a,s,o,u;if(n===i||0===t)throw"null frustum";if(0>=n)throw"near <= 0";if(0>=i)throw"far <= 0";if(e=Math.PI*e/180/2,o=Math.sin(e),0===o)throw"null frustum";s=1/(i-n),u=Math.cos(e)/o,a=r?r.data||r:this.data,a[0]=u/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-(i+n)*s,a[11]=-1,a[12]=0,a[13]=0,a[14]=-2*n*i*s,a[15]=0},i.perspective=function(e,t,n,i){return this.setPerspective(e,t,n,i,u.__TEMP__),this.multiply(u.__TEMP__)},i.lookAt=function(e,t,n){return this.setLookAt(e,t,n,u.__TEMP__),this.multiply(u.__TEMP__)},i.translate=function(e,t,n){return this.setTranslation(e,t,n,u.__TEMP__),this.multiply(u.__TEMP__)},i.rotate=function(e,t,n){return this.setRotation(e,t,n,u.__TEMP__),this.multiply(u.__TEMP__)},i.scale=function(e,t,n){return this.setScale(e,t,n,u.__TEMP__),this.multiply(u.__TEMP__)},i.copyTo=function(e){for(var t=this.data,n=e.data||e,i=0;16>i;i++)n[i]=t[i]},i.copyFrom=function(e){for(var t=this.data,n=e.data||e,i=0;16>i;i++)t[i]=n[i];return this},i.copyRotationTo=function(e){var t=this.data,n=e.data||e;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],e},i.copyPosition=function(e){var t=this.data,n=e.data||e;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},i.getCSS=function(){var e=this.data;return"matrix3d("+t(e[0])+","+t(e[1])+","+t(e[2])+","+t(e[3])+","+t(e[4])+","+t(e[5])+","+t(e[6])+","+t(e[7])+","+t(e[8])+","+t(e[9])+","+t(e[10])+","+t(e[11])+","+t(e[12])+","+t(e[13])+","+t(e[14])+","+t(e[15])+")"},i.extractPosition=function(e){e=e||new Vector3;var t=this.data;return e.set(t[12],t[13],t[14]),e},i.determinant=function(){var e=this.data;return e[0]*(e[5]*e[10]-e[9]*e[6])+e[4]*(e[9]*e[2]-e[1]*e[10])+e[8]*(e[1]*e[6]-e[5]*e[2])},i.inverse=function(e){var t=this.data,n=e?e.data||e:this.data,i=this.determinant();if(Math.abs(i)<1e-4)return console.warn("Attempt to inverse a singular Matrix4. ",this.data),console.trace(),e;var r=t[0],a=t[4],s=t[8],o=t[12],u=t[1],c=t[5],l=t[9],h=t[13],d=t[2],f=t[6],p=t[10],v=t[14];return i=1/i,n[0]=(c*p-l*f)*i,n[1]=(s*f-a*p)*i,n[2]=(a*l-s*c)*i,n[4]=(l*d-u*p)*i,n[5]=(r*p-s*d)*i,n[6]=(s*u-r*l)*i,n[8]=(u*f-c*d)*i,n[9]=(a*d-r*f)*i,n[10]=(r*c-a*u)*i,n[12]=-(o*n[0]+h*n[4]+v*n[8]),n[13]=-(o*n[1]+h*n[5]+v*n[9]),n[14]=-(o*n[2]+h*n[6]+v*n[10]),e},i.transpose=function(e){var t=this.data,n=e?e.data||e:this.data,i=t[0],r=t[4],a=t[8],s=t[1],o=t[5],u=t[9],c=t[2],l=t[6],h=t[10];n[0]=i,n[1]=r,n[2]=a,n[4]=s,n[5]=o,n[6]=u,n[8]=c,n[9]=l,n[10]=h})},function(){Matrix4.__TEMP__=(new Matrix4).data}),Class(function c(e,t){var n=c.prototype;this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.type="vector2","undefined"==typeof n.set&&(n.set=function(e,t){return this.x=e,this.y=t,this},n.clear=function(){return this.x=0,this.y=0,this},n.copyTo=function(e){return e.x=this.x,e.y=this.y,this},n.copyFrom=n.copy=function(e){return this.x=e.x,this.y=e.y,this},n.addVectors=function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},n.subVectors=function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},n.multiplyVectors=function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this},n.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.sub=function(e){this.x-=e.x,this.y-=e.y},n.multiply=function(e){return this.x*=e,this.y*=e,this},n.divide=function(e){return this.x/=e,this.y/=e,this},n.lengthSq=function(){return this.x*this.x+this.y*this.y||1e-5},n.length=function(){return Math.sqrt(this.lengthSq())},n.setLength=function(e){return this.normalize().multiply(e),this},n.normalize=function(){var e=this.length();return this.x/=e,this.y/=e,this},n.perpendicular=function(e,t){var n=this.x,i=this.y;return this.x=-i,this.y=n,this},n.lerp=function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},n.interp=function(e,t,n){var i=0,r=TweenManager.Interpolation.convertEase(n),a=c.__TEMP__;a.subVectors(this,e);var s=Utils.clamp(Utils.range(a.lengthSq(),0,25e6,1,0),0,1)*(t/10);i="function"==typeof r?r(s):TweenManager.Interpolation.solve(r,s),this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i},n.setAngleRadius=function(e,t){return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this},n.addAngleRadius=function(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this},n.clone=function(){return new c(this.x,this.y)},n.dot=function(e,t){return t=t||this,e.x*t.x+e.y*t.y},n.distanceTo=function(e,t){var n=this.x-e.x,i=this.y-e.y;return t?n*n+i*i:Math.sqrt(n*n+i*i)},n.solveAngle=function(e,t){return t||(t=this),Math.atan2(e.y-t.y,e.x-t.x)},n.equals=function(e){return this.x==e.x&&this.y==e.y},n.console=function(){console.log(this.x,this.y)})},function(){Vector2.__TEMP__=new Vector2}),Class(function l(e,t,n,i){var r=l.prototype;this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.z="number"==typeof n?n:0,this.w="number"==typeof i?i:1,this.type="vector3","undefined"==typeof r.set&&(r.set=function(e,t,n,i){return this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||1,this},r.clear=function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},r.copyTo=function(e){return e.x=this.x,e.y=this.y,e.z=this.z,e.w=this.w,e},r.copyFrom=r.copy=function(e){return this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this.w=e.w||1,this},r.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},r.length=function(){return Math.sqrt(this.lengthSq())},r.normalize=function(){var e=1/this.length();return this.set(this.x*e,this.y*e,this.z*e),this},r.setLength=function(e){return this.normalize().multiply(e),this},r.addVectors=function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},r.subVectors=function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},r.multiplyVectors=function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},r.add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},r.sub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},r.multiply=function(e){return this.x*=e,this.y*=e,this.z*=e,this},r.divide=function(e){return this.x/=e,this.y/=e,this.z/=e,this},r.limit=function(e){this.length()>e&&(this.normalize(),this.multiply(e))},r.heading2D=function(){var e=Math.atan2(-this.y,this.x);return-e},r.lerp=function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},r.deltaLerp=function(e,t,n){n=n||1;for(var i=0;n>i;i++){this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t}return this},r.interp=function(e,t,n,i){l.__TEMP__||(l.__TEMP__=new l),i=i||5e3;var r=0,a=TweenManager.Interpolation.convertEase(n),s=l.__TEMP__;s.subVectors(this,e);var i=Utils.clamp(Utils.range(s.lengthSq(),0,i*i,1,0),0,1)*(t/10);r="function"==typeof a?a(i):TweenManager.Interpolation.solve(a,i),this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r},r.setAngleRadius=function(e,t){return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this.z=Math.sin(e)*t,this},r.addAngleRadius=function(e,t){return this.x+=Math.cos(e)*t,this.y+=Math.sin(e)*t,this.z+=Math.sin(e)*t,this},r.dot=function(e,t){return t=t||this,e.x*t.x+e.y*t.y+e.z*t.z},r.clone=function(){return new l(this.x,this.y,this.z)},r.cross=function(e,t){t||(t=this);var n=e.y*t.z-e.z*t.y,i=e.z*t.x-e.x*t.z,r=e.x*t.y-e.y*t.x;return this.set(n,i,r,this.w),this},r.distanceTo=function(e,t){var n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t?n*n+i*i+r*r:Math.sqrt(n*n+i*i+r*r)},r.solveAngle=function(e,t){return t||(t=this),Math.acos(e.dot(t)/(e.length()*t.length()))},r.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},r.console=function(){console.log(this.x,this.y,this.z)})},function(){Vector3.__TEMP__=new Vector3}),Mobile.Class(function(){function e(e){switch(window.orientation){case 0:t.x=-e.accelerationIncludingGravity.x,t.y=e.accelerationIncludingGravity.y,t.z=e.accelerationIncludingGravity.z,
e.rotationRate&&(t.alpha=e.rotationRate.beta*t.toRadians,t.beta=-e.rotationRate.alpha*t.toRadians,t.gamma=e.rotationRate.gamma*t.toRadians);break;case 180:t.x=e.accelerationIncludingGravity.x,t.y=-e.accelerationIncludingGravity.y,t.z=e.accelerationIncludingGravity.z,e.rotationRate&&(t.alpha=-e.rotationRate.beta*t.toRadians,t.beta=e.rotationRate.alpha*t.toRadians,t.gamma=e.rotationRate.gamma*t.toRadians);break;case 90:t.x=e.accelerationIncludingGravity.y,t.y=e.accelerationIncludingGravity.x,t.z=e.accelerationIncludingGravity.z,e.rotationRate&&(t.alpha=e.rotationRate.alpha*t.toRadians,t.beta=e.rotationRate.beta*t.toRadians,t.gamma=e.rotationRate.gamma*t.toRadians);break;case-90:t.x=-e.accelerationIncludingGravity.y,t.y=-e.accelerationIncludingGravity.x,t.z=e.accelerationIncludingGravity.z,e.rotationRate&&(t.alpha=-e.rotationRate.alpha*t.toRadians,t.beta=-e.rotationRate.beta*t.toRadians,t.gamma=e.rotationRate.gamma*t.toRadians)}}var t=this;this.x=0,this.y=0,this.z=0,this.toRadians="iOS"==Mobile.os?Math.PI/180:1,this.capture=function(){window.ondevicemotion=e},this.stop=function(){window.ondevicemotion=null,t.x=t.y=t.z=0}},"Static"),Class(function(){Namespace(this)},"static"),Interaction.Class(function(e){function t(){e.bind("touchstart",n)}function n(e){a.velocity.clear(),s.copyFrom(e),__window.bind("touchmove",i),__window.bind("touchend",r),__window.bind("touchcancel",r),__window.bind("contextmenu",r),a.onStart&&defer(function(){a.onStart&&a.onStart(e)})}function i(e){o.subVectors(e,s),c=Render.TIME-l||.01,c>=16&&(a.velocity.subVectors(e,u),a.velocity.divide(c),l=Render.TIME,u.copyFrom(e)),a.onUpdate&&defer(function(){a.onUpdate&&a.onUpdate(o,e)})}function r(e){__window.unbind("touchmove",i),__window.unbind("touchend",r),__window.unbind("touchcancel",r),__window.unbind("contextmenu",r),a.onEnd&&defer(function(){a.onEnd&&a.onEnd(e)})}Inherit(this,Component);var a=this,s=new Vector2,o=new Vector2,u=new Vector2,c=Render.TIME,l=Render.TIME;this.velocity=new Vector2,function(){e instanceof HydraObject&&t()}(),this.attach=function(i){e instanceof HydraObject&&e.unbind("touchstart",n),e=i,t()},this.touchStart=function(e){n({x:Mouse.x,y:Mouse.y})},this.end=function(){r()},this.destroy=function(){return e.unbind("touchstart",n),__window.unbind("touchmove",i),__window.unbind("touchend",r),__window.unbind("touchcancel",r),this._destroy()}}),Class(function(e){function t(e){for(var t=s.initializers.start();t;)t(e),t=s.initializers.next()}function n(e){for(var t=s.springs.start();t;)t.update(e),t=s.springs.next()}function i(){for(var e=d.length-1;e>-1;e--){var t=d[e];s.particles.remove(t),t.system=null}d.length=0}function r(e){for(var t=0,n=s.particles.start();n;){if(!n.disabled){for(var i=s.behaviors.start();i;)i.applyBehavior(n,e,t),i=s.behaviors.next();n.behaviors.length&&n.update(e,t)}t++,n=s.particles.next()}}function a(t){r(t),s.springs.length&&n(t),s.skipIntegration||e.integrate(s.particles,t,s.friction)}Inherit(this,Component);var s=this;e=e||new EulerIntegrator;var o=1/60,u=0,c=0,l=null,h=0,d=[];this.friction=1,this.maxSteps=1,this.emitters=new LinkedList,this.initializers=new LinkedList,this.behaviors=new LinkedList,this.particles=new LinkedList,this.springs=new LinkedList,this.addEmitter=function(e){if(!(e instanceof Emitter))throw"Emitter must be Emitter";this.emitters.push(e),e.parent=e.system=this},this.removeEmitter=function(e){if(!(e instanceof Emitter))throw"Emitter must be Emitter";this.emitters.remove(e),e.parent=e.system=null},this.addInitializer=function(e){if("function"!=typeof e)throw"Initializer must be a function";this.initializers.push(e)},this.removeInitializer=function(e){this.initializers.remove(e)},this.addBehavior=function(e){this.behaviors.push(e),e.system=this},this.removeBehavior=function(e){this.behaviors.remove(e)},this.addParticle=function(n){e.type||("number"==typeof n.pos.z?e.type="3D":e.type="2D"),n.system=this,this.particles.push(n),this.initializers.length&&t(n)},this.removeParticle=function(e){e.system=null,d.push(e)},this.addSpring=function(e){e.system=this,this.springs.push(e)},this.removeSpring=function(e){e.system=null,this.springs.remove(e)},this.update=function(e){l||(l=THREAD?Date.now():Render.TIME);var t=THREAD?Date.now():Render.TIME,n=t-l;if(e||!(0>=n)){if(n*=.001,l=t,h+=n,e)a(.016);else for(var r=0;h>=o&&r++<s.maxSteps;)a(o),h-=o,u+=o;c=Date.now()-t,d.length&&i()}}}),Class(function h(e,t,n){function i(){var t="number"==typeof e.z?Vector3:Vector2;e=e||new t,r=new t,a=new t,s={},s.pos=new t,s.acc=new t,s.vel=new t,s.pos.copyFrom(e),o.pos=o.position=e,o.vel=o.velocity=r,o.acc=o.acceleration=a,o.old=s}var r,a,s,o=this,u=h.prototype;this.mass=t||1,this.massInv=1/this.mass,this.radius=n||1,this.radiusSq=this.radius*this.radius,this.behaviors=new LinkedList,this.fixed=!1,function(){i()}(),this.moveTo=function(t){e.copyFrom(t),s.pos.copyFrom(e),a.clear(),r.clear()},"undefined"==typeof u.setMass&&(u.setMass=function(e){this.mass=e||1,this.massInv=1/this.mass},u.setRadius=function(e){this.radius=e,this.radiusSq=e*e},u.update=function(e){if(this.behaviors.length)for(var t=this.behaviors.start();t;)t.applyBehavior(this,e),t=this.behaviors.next()},u.applyForce=function(e){this.acc.add(e)},u.addBehavior=function(e){if(!e||"undefined"==typeof e.applyBehavior)throw"Behavior must have applyBehavior method";this.behaviors.push(e)},u.removeBehavior=function(e){if(!e||"undefined"==typeof e.applyBehavior)throw"Behavior must have applyBehavior method";this.behaviors.remove(e)},u.destroy=function(){this.system&&this.system.removeParticle(this)})}),Class(function(){function e(){var e="3D"==i.type?Vector3:Vector2;t=new e,n=new e}Inherit(this,Component);var t,n,i=this;this.useDeltaTime=!1,this.integrate=function(i,r,a){t||e();for(var s=r*r,o=i.start();o;)o.fixed||o.disabled||(o.old.pos.copyFrom(o.pos),o.acc.multiply(o.massInv),t.copyFrom(o.vel),n.copyFrom(o.acc),this.useDeltaTime?(o.pos.add(t.multiply(r)).add(n.multiply(.5*s)),o.vel.add(o.acc.multiply(r))):(o.pos.add(t).add(n.multiply(.5)),o.vel.add(o.acc)),a&&o.vel.multiply(a),o.acc.clear()),o.saveTo&&o.pos.copyTo(o.saveTo),o=i.next()}}),Class(function(e){Inherit(this,Component);if(this.force=e,!e)throw"Force requires parameter Vector";this.applyBehavior=function(t,n){t.acc.add(e)}}),Class(function(e,t){function n(){r=a.initClass(ObjectPool)}function i(e){s+=e;for(var t=[],n=0;e>n;n++)t.push(new Particle);r.insert(t)}Inherit(this,Component);var r,a=this,s=0;"vector3"==e.type?Vector3:Vector2;this.initializers=[],this.position=e,this.autoEmit=1,function(){n(),0!=t&&i(t||100)}(),this.addInitializer=function(e){if("function"!=typeof e)throw"Initializer must be a function";this.initializers.push(e)},this.removeInitializer=function(e){var t=this.initializers.indexOf(e);t>-1&&this.initializers.splice(t,1)},this.emit=function(e){if(!this.parent)throw"Emitter needs to be added to a System";e=e||this.autoEmit;for(var t=0;e>t;t++){var n=r.get();if(!n)return;n.moveTo(this.position),n.emitter=this,n.system||this.parent.addParticle(n);for(var i=0;i<this.initializers.length;i++)this.initializers[i](n)}},this.remove=function(e){r.put(e),a.parent.removeParticle(e)},this.addToPool=function(e){r.put(e)}}),Class(function(){function e(e){var t=[],i=e.div.innerHTML,r=i.split("");e.div.innerHTML="";for(var a=0;a<r.length;a++){" "==r[a]&&(r[a]="&nbsp;");var s=$("t","span");s.html(r[a],!0).css(n),t.push(s),e.addChild(s)}return t}function t(e){var t=[],i=e.div.innerHTML,r=i.split(" ");e.empty();for(var a=0;a<r.length;a++){var s=$("t","span"),o=$("t","span");s.html(r[a]).css(n),o.html("&nbsp",!0).css(n),t.push(s),t.push(o),e.addChild(s),e.addChild(o)}return t}var n={display:"block",position:"relative",padding:0,margin:0,cssFloat:"left",styleFloat:"left",width:"auto",height:"auto"};this.split=function(n,i){return"word"==i?t(n):e(n)}},"Static"),Class(function(){function e(){o.playing=!1,o.events&&o.events.fire(HydraEvents.COMPLETE,null,!0)}function t(){var e=CSS._read(),t="/*"+u+"*/",n="@"+Device.vendor+"keyframes "+u+" {\n",i=t+n;if(e.strpos(u)){var a=e.split(t);e=e.replace(t+a[1]+t,"")}for(var s=r.length-1,o=Math.round(100/s),c=0,l=0;l<r.length;l++){var h=r[l];l==r.length-1&&(c=100),i+=(h.percent||c)+"% {\n";var d=!1,f={},p={};for(var v in h)TweenManager.checkTransform(v)?(f[v]=h[v],d=!0):p[v]=h[v];d&&(i+=Device.vendor+"transform: "+TweenManager.parseTransform(f)+";");for(v in p){var m=p[v];"string"!=typeof m&&"opacity"!=v&&"zIndex"!=v&&(m+="px"),i+=CSS._toCSS(v)+": "+m+";"}i+="\n}\n",c+=o}i+="}"+t,e+=i,CSS._write(e)}function n(){var e=CSS._read(),t="/*"+u+"*/";if(e.strpos(u)){var n=e.split(t);e=e.replace(t+n[1]+t,"")}CSS._write(e)}function i(e){for(var t=v.length-1;t>-1;t--)e(v[t])}Inherit(this,Component);var r,a,s,o=this,u="a"+Utils.timestamp(),c=1e3,l="linear",h=0,d=!1,f=1,p=null,v=[];this.set("frames",function(e){r=e,t()}),this.set("steps",function(e){p=e,o.playing&&i(function(t){t.div.style[CSS.prefix("AnimationTimingFunction")]="steps("+e+")"})}),this.set("duration",function(e){c=Math.round(e),o.playing&&i(function(e){e.div.style[CSS.prefix("AnimationDuration")]=o.duration+"ms"})}),this.get("duration",function(){return c}),this.set("ease",function(e){l=e,o.playing&&i(function(e){e.div.style[CSS.prefix("AnimationTimingFunction")]=TweenManager.getEase(l)})}),this.get("ease",function(){return l}),this.set("loop",function(e){d=e,o.playing&&i(function(e){e.div.style[CSS.prefix("AnimationIterationCount")]=d?"infinite":f})}),this.get("loop",function(){return d}),this.set("count",function(e){f=e,o.playing&&i(function(e){e.div.style[CSS.prefix("AnimationIterationCount")]=d?"infinite":f})}),this.get("count",function(){return f}),this.set("delay",function(e){h=e,o.playing&&i(function(e){e.div.style[CSS.prefix("AnimationDelay")]=h+"ms"})}),this.get("delay",function(){return h}),this.play=function(){i(function(e){e.div.style[CSS.prefix("AnimationName")]=u,e.div.style[CSS.prefix("AnimationDuration")]=o.duration+"ms",e.div.style[CSS.prefix("AnimationTimingFunction")]=p?"steps("+p+")":TweenManager.getEase(l),e.div.style[CSS.prefix("AnimationIterationCount")]=d?"infinite":f,e.div.style[CSS.prefix("AnimationPlayState")]="running",e.div.style[CSS.prefix("AnimationDelay")]=h+"ms"}),o.playing=!0,clearTimeout(a),o.loop||(s=Date.now(),a=o.delayedCall(e,f*c))},this.pause=function(){o.playing=!1,clearTimeout(a),i(function(e){e.div.style[CSS.prefix("AnimationPlayState")]="paused"})},this.stop=function(){o.playing=!1,clearTimeout(a),i(function(e){e.div.style[CSS.prefix("AnimationName")]=""})},this.applyTo=function(e){v.push(e),o.playing&&(e.div.style[CSS.prefix("AnimationName")]=u,e.div.style[CSS.prefix("AnimationDuration")]=o.duration+"ms",e.div.style[CSS.prefix("AnimationTimingFunction")]=p?"steps("+p+")":TweenManager.getEase(l),e.div.style[CSS.prefix("AnimationIterationCount")]=d?"infinite":f,e.div.style[CSS.prefix("AnimationPlayState")]="running")},this.remove=function(e){e.div.style[CSS.prefix("AnimationName")]="";var t=v.indexOf(e);t>-1&&v.splice(t,1)},this.destroy=function(){return this.stop(),r=null,n(),this._destroy()}}),Class(function(e,t,n){function i(){var i="c"+Utils.timestamp();v.context=document.getCSSCanvasContext("2d",i,e,t),v.background="-"+Device.styles.vendor.toLowerCase()+"-canvas("+i+")",n.css({backgroundImage:v.background}),n=null}function r(){v.div=document.createElement("canvas"),v.context=v.div.getContext("2d"),v.object=$(v.div)}function a(e,t,n){var i=n&&Device.system.retina?2:1;v.div&&(v.div.width=e*i,v.div.height=t*i),v.width=e,v.height=t,v.scale=i,v.object&&v.object.size(v.width,v.height),Device.system.retina&&n&&(v.context.scale(i,i),v.div.style.width=e+"px",v.div.style.height=t+"px")}function s(e){e=Utils.touchEvent(e),e.x-=v.offset.x,e.y-=v.offset.y,e.width=1,e.height=1;for(var t=v.children.length-1;t>-1;t--){var n=v.children[t].hit(e);if(n)return n}return!1}function o(e){var t=s(e);return t?(v.interacting=!0,d=t,void(Device.mobile&&(t.events.fire(HydraEvents.HOVER,{action:"over"},!0),t.__time=Date.now()))):v.interacting=!1}function u(e){var t=s(e);t?v.interacting=!0:v.interacting=!1,Device.mobile||(t&&h?t!=h&&(h.events.fire(HydraEvents.HOVER,{action:"out"},!0),t.events.fire(HydraEvents.HOVER,{action:"over"},!0),h=t):t&&!h?(h=t,t.events.fire(HydraEvents.HOVER,{action:"over"},!0)):!t&&h&&(h&&h.events.fire(HydraEvents.HOVER,{action:"out"},!0),h=null))}function c(e){var t=s(e);t?v.interacting=!0:v.interacting=!1,(d||t)&&(Device.mobile?(d&&d.events.fire(HydraEvents.HOVER,{action:"out"},!0),t==d&&Date.now()-d.__time<750&&t.events.fire(HydraEvents.CLICK,{action:"click"},!0)):t&&t==d&&t.events.fire(HydraEvents.CLICK,{action:"click"},!0),d=null)}Inherit(this,Component);var l,h,d,f,p,v=this;this.children=[],this.offset={x:0,y:0},this.retina=n,function(){n instanceof HydraObject?i(n):r(),v.width=e,v.height=t,v.context._matrix=new Matrix2,a(e,t,n)}(),this.set("interactive",function(e){!l&&e?(Stage.bind("touchstart",o),Stage.bind("touchmove",u),Stage.bind("touchend",c)):l&&!e&&(Stage.unbind("touchstart",o),Stage.unbind("touchmove",u),Stage.unbind("touchend",c)),l=e}),this.get("interactive",function(){return l}),this.toDataURL=function(e,t){return v.div.toDataURL(e,t)},this.sort=function(){_objects.sort(function(e,t){return e.z-t.z})},this.render=function(e){"boolean"==typeof e&&e||v.clear();for(var t=v.children.length,n=0;t>n;n++)v.children[n].render()},this.clear=function(){v.context.clearRect(0,0,v.div.width,v.div.height)},this.add=function(e){e.setCanvas(this),e._parent=this,this.children.push(e),e._z=this.children.length},this.remove=function(e){e._canvas=null,e._parent=null;var t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)},this.destroy=function(){l&&(Stage.unbind("touchstart",o),Stage.unbind("touchmove",u),Stage.unbind("touchend",c)),this.stopRender();for(var e=0;e<this.children.length;e++)this.children[e].destroy&&this.children[e].destroy();return this._destroy()},this.startRender=function(){Render.startRender(v.render)},this.stopRender=function(){Render.stopRender(v.render)},this.getImageData=function(e,t,n,i){return this.imageData=this.context.getImageData(e||0,t||0,n||this.width,i||this.height),this.imageData},this.getPixel=function(e,t,n){(!this.imageData||n)&&v.getImageData(0,0,v.width,v.height),p||(p={});var i=4*(e+t*v.width),r=this.imageData.data;return p.r=r[i],p.g=r[i+1],p.b=r[i+2],p.a=r[i+3],p},this.texture=function(e){var t=new Image;return t.src=e,t},this.localizeMouse=function(){return f=f||{},f.x=Mouse.x-v.offset.x,f.y=Mouse.y-v.offset.y,f},this.size=a}),Class(function(){function e(){r._dynamicPool=new ObjectPool(DynamicObject,100),r._arrayPool=new ObjectPool(Array,100),r._dynamicPool.debug=!0}function t(e){for(var t=0;t<a.length;t++)a[t].update(e)}function n(e){for(var t=e.split("(")[1].slice(0,-1).split(","),n=0;n<t.length;n++)t[n]=parseFloat(t[n]);return t}function i(e){for(var t=r.CSSEases,n=t.length-1;n>-1;n--)if(t[n].name==e)return t[n];return!1}Namespace(this);var r=this,a=[];!function(){window.Hydra&&(Hydra.ready(e),Render.startRender(t))}(),this._addMathTween=function(e){a.push(e)},this._removeMathTween=function(e){a.findAndRemove(e)},this._detectTween=function(e,t,n,i,a,s){return"spring"===i?new SpringTween(e,t,n,i,a,s):r.useCSSTrans(t,i,e)?Device.tween.webAnimation?new CSSWebAnimation(e,t,n,i,a,s):new CSSTransition(e,t,n,i,a,s):new FrameTween(e,t,n,i,a,s)},this.tween=function(e,t,n,i,r,a,s,o){return"number"!=typeof r&&(s=a,a=r,r=0),"spring"===i?new SpringTween(e,t,n,i,r,s,a):new MathTween(e,t,n,i,r,s,a,o)},this.iterate=function(e,t,n,i,r,a,s){if("number"!=typeof a&&(s=a,a=0),t=new DynamicObject(t),!e.length)throw"TweenManager.iterate :: array is empty";for(var o=e.length,u=0;o>u;u++){var c=e[u],l=u==o-1?s:null;c.tween(t.copy(),n,i,a+r*u,l)}},this.clearTween=function(e){if(e._mathTween&&e._mathTween.stop&&e._mathTween.stop(),e._mathTweens){for(var t=e._mathTweens,n=0;n<t.length;n++){var i=t[n];i&&i.stop&&i.stop()}e._mathTweens=null}},this.clearCSSTween=function(e){e&&!e._cssTween&&e.div._transition&&(e.div.style[Device.styles.vendorTransition]="",e.div._transition=!1,e._cssTween=null)},this.checkTransform=function(e){var t=r.Transforms.indexOf(e);return t>-1},this.addCustomEase=function(e){var t=!0;if("object"!=typeof e||!e.name||!e.curve)throw"TweenManager :: addCustomEase requires {name, curve}";for(var i=r.CSSEases.length-1;i>-1;i--)e.name==r.CSSEases[i].name&&(t=!1);return t&&("m"==e.curve.charAt(0).toLowerCase()?e.path=new EasingPath(e.curve):e.values=n(e.curve),r.CSSEases.push(e)),e},this.getEase=function(e,t){if(Array.isArray(e)){var r=i(e[0]),a=i(e[1]);if(!r||!a)throw"Multi-ease tween missing values "+JSON.stringify(e);return r.values||(r.values=n(r.curve)),a.values||(a.values=n(a.curve)),t?[r.values[0],r.values[1],a.values[2],a.values[3]]:"cubic-bezier("+r.values[0]+","+r.values[1]+","+a.values[2]+","+a.values[3]+")"}var s=i(e);return s?t?s.path?s.path.solve:s.values:s.curve:!1},this.inspectEase=function(e){return i(e)},this.getAllTransforms=function(e){for(var t={},n=r.Transforms.length-1;n>-1;n--){var i=r.Transforms[n],a=e[i];0!==a&&"number"==typeof a&&(t[i]=a)}return t},this.parseTransform=function(e){var t="",n="";if(e.perspective>0&&(t+="perspective("+e.perspective+"px)"),"undefined"!=typeof e.x||"undefined"!=typeof e.y||"undefined"!=typeof e.z){var i=e.x||0,r=e.y||0,a=e.z||0;n+=i+"px, ",n+=r+"px",Device.tween.css3d?(n+=", "+a+"px",t+="translate3d("+n+")"):t+="translate("+n+")"}return"undefined"!=typeof e.scale?t+="scale("+e.scale+")":("undefined"!=typeof e.scaleX&&(t+="scaleX("+e.scaleX+")"),"undefined"!=typeof e.scaleY&&(t+="scaleY("+e.scaleY+")")),"undefined"!=typeof e.rotation&&(t+="rotate("+e.rotation+"deg)"),"undefined"!=typeof e.rotationX&&(t+="rotateX("+e.rotationX+"deg)"),"undefined"!=typeof e.rotationY&&(t+="rotateY("+e.rotationY+"deg)"),"undefined"!=typeof e.rotationZ&&(t+="rotateZ("+e.rotationZ+"deg)"),"undefined"!=typeof e.skewX&&(t+="skewX("+e.skewX+"deg)"),"undefined"!=typeof e.skewY&&(t+="skewY("+e.skewY+"deg)"),t},this.interpolate=function(e,t,n){var i=r.Interpolation.convertEase(n);return e*("function"==typeof i?i(t):r.Interpolation.solve(i,t))},this.interpolateValues=function(e,t,n,i){var a=r.Interpolation.convertEase(i);return e+(t-e)*("function"==typeof a?a(n):r.Interpolation.solve(a,n))}},"Static"),function(){TweenManager.Transforms=["scale","scaleX","scaleY","x","y","z","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective"],TweenManager.CSSEases=[{name:"easeOutCubic",curve:"cubic-bezier(0.215, 0.610, 0.355, 1.000)"},{name:"easeOutQuad",curve:"cubic-bezier(0.250, 0.460, 0.450, 0.940)"},{name:"easeOutQuart",curve:"cubic-bezier(0.165, 0.840, 0.440, 1.000)"},{name:"easeOutQuint",curve:"cubic-bezier(0.230, 1.000, 0.320, 1.000)"},{name:"easeOutSine",curve:"cubic-bezier(0.390, 0.575, 0.565, 1.000)"},{name:"easeOutExpo",curve:"cubic-bezier(0.190, 1.000, 0.220, 1.000)"},{name:"easeOutCirc",curve:"cubic-bezier(0.075, 0.820, 0.165, 1.000)"},{name:"easeOutBack",curve:"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},{name:"easeInCubic",curve:"cubic-bezier(0.550, 0.055, 0.675, 0.190)"},{name:"easeInQuad",curve:"cubic-bezier(0.550, 0.085, 0.680, 0.530)"},{name:"easeInQuart",curve:"cubic-bezier(0.895, 0.030, 0.685, 0.220)"},{name:"easeInQuint",curve:"cubic-bezier(0.755, 0.050, 0.855, 0.060)"},{name:"easeInSine",curve:"cubic-bezier(0.470, 0.000, 0.745, 0.715)"},{name:"easeInCirc",curve:"cubic-bezier(0.600, 0.040, 0.980, 0.335)"},{name:"easeInBack",curve:"cubic-bezier(0.600, -0.280, 0.735, 0.045)"},{name:"easeInOutCubic",curve:"cubic-bezier(0.645, 0.045, 0.355, 1.000)"},{name:"easeInOutQuad",curve:"cubic-bezier(0.455, 0.030, 0.515, 0.955)"},{name:"easeInOutQuart",curve:"cubic-bezier(0.770, 0.000, 0.175, 1.000)"},{name:"easeInOutQuint",curve:"cubic-bezier(0.860, 0.000, 0.070, 1.000)"},{name:"easeInOutSine",curve:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},{name:"easeInOutExpo",curve:"cubic-bezier(1.000, 0.000, 0.000, 1.000)"},{name:"easeInOutCirc",curve:"cubic-bezier(0.785, 0.135, 0.150, 0.860)"},{name:"easeInOutBack",curve:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},{name:"easeInOut",curve:"cubic-bezier(.42,0,.58,1)"},{name:"linear",curve:"linear"}],TweenManager.useCSSTrans=function(e,t,n){return e.math?!1:"string"==typeof t&&(t.strpos("Elastic")||t.strpos("Bounce"))?!1:n.multiTween||TweenManager.inspectEase(t).path?!1:Device.tween.transition?!0:!1}}(),Class(function(e,t,n,i,r,a){function s(){return!_||_.kill||!e||!e.div}function o(){var n=TweenManager.getAllTransforms(e),i=[];for(var r in t)TweenManager.checkTransform(r)?(n.use=!0,n[r]=t[r],delete t[r]):("number"==typeof t[r]||r.strpos("-"))&&i.push(r);n.use&&i.push(Device.transformProperty),delete n.use,v=n,m=i}function u(){c();var e=0,a=function(e,t,n,i,r,a){var s=r[_];return s&&(e+=s),TweenManager.interpolateValues(e,t,n,i)};y=[],g=0;for(var s in i){var o=s.strpos("%")?Number(s.replace("%",""))/100:(Number(s)+1)/i.length;if(!isNaN(o)){var u=i[s];g++;var h={},d={},f=y[y.length-1],p=f?f.props:{},m=!f;for(var _ in v)w[_]||(w[_]=_.strpos("scale")?1:0),h[_]=a(w[_],v[_],o,u,p,_),m&&(p[_]=w[_]);for(_ in t)d[_]=a(b[_],t[_],o,u,p,_),m&&(p[_]=b[_]);var E=o*n-e;e+=E,y.push({percent:o,ease:u,transform:h,props:d,delay:1==g?r:0,time:E})}}l(y.shift())}function c(){w=TweenManager.getAllTransforms(e);var n=TweenManager.parseTransform(w);if(!n.length)for(var i=TweenManager.Transforms.length-1;i>-1;i--){var r=TweenManager.Transforms[i];w[r]="scale"==r?1:0}b={};for(r in t)b[r]=e.css(r)}function l(o){if(!s()){e._cssTween&&(e._cssTween.kill=!0),e._cssTween=_,e.div._transition=!0;var u=function(){return o?d(o.time,o.ease,o.delay):d(n,i,r)}();e.willChange(u.props);var c=o?o.time:n,l=o?o.delay:r,m=o?o.props:t,g=o?o.transform:v;Render.setupTween(function(){s()||(e.div.style[Device.styles.vendorTransition]=u.transition,_.playing=!0,Device.browser.safari?Render.setupTween(function(){s()||(e.css(m),e.transform(g))}):(e.css(m),e.transform(g)),a||y?Timer.create(function(){s()||(y?h():(f(),a&&a()))},c+l):e.div.addEventListener(Device.tween.complete,p,!1))})}}function h(){if(!s()){var t=y.shift();if(t){var n=d(t.time,t.ease,t.delay);e.div.style[Device.styles.vendorTransition]=n.transition,e.css(t.props),e.transform(t.transform),Timer.create(h,t.time)}else f()}}function d(e,t,n){for(var i="",r="",a=m.length,s=0;a>s;s++){var o=m[s];i+=(i.length?", ":"")+o,r+=(r.length?", ":"")+o+" "+e+"ms "+TweenManager.getEase(t)+" "+n+"ms"}return{props:i,transition:r}}function f(){e&&e.div&&e.div.removeEventListener(Device.tween.complete,p,!1),s()||(_.playing=!1,e._cssTween=null,e.willChange(null),e=t=null,_=null,Utils.nullObject(this))}function p(){!a&&_.playing&&f()}var v,m,y,g,w,b,_=this;this.playing=!0,function(){if("number"!=typeof n)throw"CSSTween Requires object, props, time, ease";o(),"object"!=typeof i||Array.isArray(i)?l():u()}(),this.stop=function(){e&&e.div&&e.div.removeEventListener(Device.tween.complete,p,!1),this.playing&&(this.kill=!0,this.playing=!1,e.div.style[Device.styles.vendorTransition]="",e.div._transition=!1,e.willChange(null),e._cssTween=null,_=null,Utils.nullObject(this))}}),Class(function(e,t,n,i,r,a,s){function o(){return E.kill||!e||!e.div}function u(){t.math&&delete t.math,Device.tween.transition&&e.div._transition&&(e.div.style[Device.styles.vendorTransition]="",e.div._transition=!1),f=new DynamicObject,p=new DynamicObject,v=new DynamicObject,m=new DynamicObject,e.multiTween||("undefined"==typeof t.x&&(t.x=e.x),"undefined"==typeof t.y&&(t.y=e.y),"undefined"==typeof t.z&&(t.z=e.z));for(var n in t)if(TweenManager.checkTransform(n))y=!0,v[n]=e[n]||("scale"==n?1:0),p[n]=t[n];else{g=!0;var i=t[n];"string"==typeof i?e.div.style[n]=i:"number"==typeof i&&(m[n]=Number(e.css(n)),f[n]=i)}}function c(){!e._cssTween||s||e.multiTween||(e._cssTween.kill=!0),e.multiTween&&(e._cssTweens||(e._cssTweens=[]),e._cssTweens.push(E)),e._cssTween=E,E.playing=!0,t=m.copy(),w=v.copy(),g&&(b=TweenManager.tween(t,f,n,i,r,d,h,s)),y&&(_=TweenManager.tween(w,p,n,i,r,g?null:d,g?null:h,s))}function l(){e._cssTweens&&e._cssTweens.findAndRemove(E),E.playing=!1,e._cssTween=null,e=t=null}function h(){if(!o()&&(g&&e.css(t),y))if(e.multiTween){for(var n in w)"number"==typeof w[n]&&(e[n]=w[n]);e.transform()}else e.transform(w)}function d(){E.playing&&(l(),a&&a())}var f,p,v,m,y,g,w,b,_,E=this;this.playing=!0,function(){if("object"==typeof i&&(i="easeOutCubic"),e&&t){if("number"!=typeof n)throw"FrameTween Requires object, props, time, ease";u(),c()}}(),this.stop=function(){this.playing&&(b&&b.stop&&b.stop(),_&&_.stop&&_.stop(),l())},this.interpolate=function(e){b&&b.interpolate(e),_&&_.interpolate(e),h()},this.setEase=function(e){b&&b.setEase(e),_&&_.setEase(e)}}),Class(function(e,t,n,i,r,a){function s(){var n=[],i=!1;for(var r in t)TweenManager.checkTransform(r)?i=!0:("number"==typeof t[r]||r.strpos("-"))&&n.push(r);i&&n.push(Device.transformProperty),e.willChange(n),e._cssTween&&(e._cssTween.kill=!0),e._cssTween=T,e.div._transition=!0}function o(){var n=TweenManager.getAllTransforms(e);for(var i in t)TweenManager.checkTransform(i)&&(n[i]=t[i],delete t[i]);_=n,y=TweenManager.parseTransform(n)}function u(){E=TweenManager.getAllTransforms(e);var n=TweenManager.parseTransform(E);if(!n.length){n="translate3d(0, 0, 0)";for(var i=TweenManager.Transforms.length-1;i>-1;i--){var r=TweenManager.Transforms[i];E[r]="scale"==r?1:0}}g={},y&&(g.transform=n);for(var r in t)g[r]=e.css(r)}function c(){w={},y&&(w.transform=y);for(var e in t)w[e]=t[e]}function l(){T.playing=!0,b=e.div.animate([g,w],{duration:n,delay:r,easing:TweenManager.getEase(i),fill:"forwards"}),b.addEventListener("finish",m)}function h(){return!T||T.kill||!e||!e.div}function d(){T.playing=!1,e=t=null,T=null,b=null,Utils.nullObject(this)}function f(){e.css(t),e.transform(_)}function p(e,t,n){return TweenManager.interpolate(e+(t-e),n,i)}function v(){if(b){var i=b.currentTime/n,r={},a={};for(var s in _)r[s]=p(E[s],_[s],i);for(s in t)a[s]=TweenManager.interpolate(g[s],t[s],i);e.css(a),e.transform(r)}}function m(){h()||(f(),e.willChange(null),a&&Render.nextFrame(a),d())}var y,g,w,b,_,E,T=this;!function(){e._cssTween&&e._cssTween.stop(),s(),o(),u(),c(),Render.setupTween(l)}(),this.stop=function(){T&&T.playing&&(v(),T.kill=!0,T.playing=!1,e.willChange(null),b.pause(),d())}}),TweenManager.Class(function(){function e(e,t,n){return((i(t,n)*e+r(t,n))*e+a(t))*e}function t(t,i,r){for(var a=t,s=0;4>s;s++){var o=n(a,i,r);if(0==o)return a;var u=e(a,i,r)-t;a-=u/o}return a}function n(e,t,n){return 3*i(t,n)*e*e+2*r(t,n)*e+a(t)}function i(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function a(e){return 3*e}this.convertEase=function(e){var t=function(){switch(e){case"easeInQuad":return TweenManager.Interpolation.Quad.In;case"easeInCubic":return TweenManager.Interpolation.Cubic.In;case"easeInQuart":return TweenManager.Interpolation.Quart.In;case"easeInQuint":return TweenManager.Interpolation.Quint.In;case"easeInSine":return TweenManager.Interpolation.Sine.In;case"easeInExpo":return TweenManager.Interpolation.Expo.In;case"easeInCirc":return TweenManager.Interpolation.Circ.In;case"easeInElastic":return TweenManager.Interpolation.Elastic.In;case"easeInBack":return TweenManager.Interpolation.Back.In;case"easeInBounce":return TweenManager.Interpolation.Bounce.In;case"easeOutQuad":return TweenManager.Interpolation.Quad.Out;case"easeOutCubic":return TweenManager.Interpolation.Cubic.Out;case"easeOutQuart":return TweenManager.Interpolation.Quart.Out;case"easeOutQuint":return TweenManager.Interpolation.Quint.Out;case"easeOutSine":return TweenManager.Interpolation.Sine.Out;case"easeOutExpo":return TweenManager.Interpolation.Expo.Out;case"easeOutCirc":return TweenManager.Interpolation.Circ.Out;case"easeOutElastic":return TweenManager.Interpolation.Elastic.Out;case"easeOutBack":return TweenManager.Interpolation.Back.Out;case"easeOutBounce":return TweenManager.Interpolation.Bounce.Out;case"easeInOutQuad":return TweenManager.Interpolation.Quad.InOut;case"easeInOutCubic":return TweenManager.Interpolation.Cubic.InOut;case"easeInOutQuart":return TweenManager.Interpolation.Quart.InOut;case"easeInOutQuint":return TweenManager.Interpolation.Quint.InOut;case"easeInOutSine":return TweenManager.Interpolation.Sine.InOut;case"easeInOutExpo":return TweenManager.Interpolation.Expo.InOut;case"easeInOutCirc":return TweenManager.Interpolation.Circ.InOut;case"easeInOutElastic":return TweenManager.Interpolation.Elastic.InOut;case"easeInOutBack":return TweenManager.Interpolation.Back.InOut;case"easeInOutBounce":return TweenManager.Interpolation.Bounce.InOut;case"linear":return TweenManager.Interpolation.Linear.None}}();if(!t){var n=TweenManager.getEase(e,!0);t=n?n:TweenManager.Interpolation.Cubic.Out}return t},this.solve=function(n,i){return n[0]==n[1]&&n[2]==n[3]?i:e(t(i,n[0],n[2]),n[1],n[3])},this.Linear={None:function(e){return e}},this.Quad={In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},this.Cubic={In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},this.Quart={In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},this.Quint={In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},this.Sine={In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},this.Expo={In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},this.Circ={In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},this.Elastic={In:function(e){var t,n=.1,i=.4;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=i/4):t=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)))},Out:function(e){var t,n=.1,i=.4;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=i/4):t=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},InOut:function(e){var t,n=.1,i=.4;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=i/4):t=i*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)}},this.Back={In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},this.Bounce={In:function(e){return 1-this.Bounce.Out(1-e)},Out:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*this.Bounce.In(2*e):.5*this.Bounce.Out(2*e-1)+.5}}},"Static"),Class(function(e){function t(){w=b.initClass(ObjectPool,Object,100)}function n(){m=document.createElementNS("http://www.w3.org/2000/svg","path"),m.setAttributeNS(null,"d",r(e)),g=m.getTotalLength()}function i(){var e,t,n,i,r,a;for(e=t=0,a=_;a>=0?a>=t:t>=a;e=a>=0?++t:--t)r=e*E,n=g*r,i=m.getPointAtLength(n),R.push({point:i,length:n,progress:r})}function r(e){var t=/[M|L|H|V|C|S|Q|T|A]/gim,n=e.split(t);n.shift();var i=e.match(t),r=0;n[r]=a(n[r],0);var o=n.length-1;return n[o]=a(n[o],T),s(i,n)}function a(e,t){t=t||0,e=e.trim();var n=/(-|\+)?((\d+(\.(\d|\e(-|\+)?)+)?)|(\.?(\d|\e|(\-|\+))+))/gim,i=o(e.match(n)),r=i[i.length-1],a=r[0],s=Number(a);if(s!==t){e="",r[0]=t;for(var u=0;u<i.length;u++){var c=i[u],l=0===u?"":" ";e+=""+l+c[0]+","+c[1]}}return e}function s(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i],a=0===i?"":" ";n+=""+a+r+t[i].trim()}return n}function o(e){if(e.length%2!==0)throw"EasingPath :: Failed to parse path -- segment pairs are not even.";
for(var t=[],n=0;n<e.length;n+=2){var i=(e[n],[e[n],e[n+1]]);t.push(i)}return t}function u(e,t){if(t==x)return M;y||(y=0);var n,i,r,a=e.length;x>t?(n=0,i="reverse"):(n=a,i="forward"),"forward"==i?(r=e[0],end=e[e.length-1]):(r=e[e.length-1],end=e[0]);var s,o,u,c,l;for(s=o=u=y,c=n;c>=u?c>o:o>c;s=c>=u?++o:--o){var h=e[s],d=h.point.x/T,f=t;if("reverse"==i&&(l=d,d=f,f=l),!(f>d)){end=h;break}r=h,y=s}return x=t,M.start=r,M.end=end,M}function c(e,t){var n=d(e,t.start.point);return n?n:d(e,t.end.point)}function l(e,t,n,i){i=i||C;var r=h(t,n,e),a=m.getPointAtLength(r),s=a.x/T;if(f(e,s))return p(a);if(i--<1)return p(a);var o=w.get();return o.point=a,o.length=r,I.push(o),s>e?l(e,t,o,i):l(e,o,n,i)}function h(e,t,n){var i=t.point.x-e.point.x,r=(n-e.point.x/T)/(i/T);return e.length+r*(t.length-e.length)}function d(e,t){return f(e,t.x/T)?p(t):void 0}function f(e,t){return Math.abs(e-t)<S}function p(e){return 1-e.y/T}function v(){for(var e=I.length-1;e>-1;e--)w.put(I[e]);I.length=0}Inherit(this,Component);var m,y,g,w,b=this,_=1450,E=1/_,T=100,C=5,S=.001,x=-1,M={},R=[],I=[];!function(){t(),n(),i()}(),this.solve=function(e){e=Utils.clamp(e,0,1);var t=u(R,e),n=c(e,t),i=n;return i||(i=l(e,t.start,t.end)),v(),i}}),Class(function(e,t,n,i,r,a,s,o){function u(){e.multiTween||!e._mathTween||o||TweenManager.clearTween(e),o||TweenManager._addMathTween(_),e._mathTween=_,e.multiTween&&(e._mathTweens||(e._mathTweens=[]),e._mathTweens.push(_)),"string"==typeof i?(i=TweenManager.Interpolation.convertEase(i),y="function"==typeof i):Array.isArray(i)&&(y=!1,i=TweenManager.getEase(i,!0)),f=Date.now(),f+=r,v=t,p={},_.startValues=p;for(var n in v)"number"==typeof e[n]&&(p[n]=e[n])}function c(){var e=0,t=function(e,t,n,i,r,a){var s=r[a];return s&&(e+=s),TweenManager.interpolateValues(e,t,n,i)};b=[];for(var r in i){var a=r.strpos("%")?Number(r.replace("%",""))/100:(Number(r)+1)/i.length;if(!isNaN(a)){var s=i[r],o=b[b.length-1],u={},c=o?o.end:{},l=!o;for(var h in p)u[h]=t(p[h],v[h],a,s,c,h),l&&(c[h]=p[h]);var d=a*n-e;e+=d,b.push({percent:a,ease:s,start:c,end:u,time:d})}}m=b.shift()}function l(){return e||t?(e._mathTween=null,TweenManager._removeMathTween(_),Utils.nullObject(_),void(e._mathTweens&&e._mathTweens.findAndRemove(_))):!1}function h(t){E=(t-f)/n,E=E>1?1:E;var r=y?i(E):TweenManager.Interpolation.solve(i,E);for(var o in p)if("number"==typeof p[o]){var u=p[o],c=v[o];e[o]=u+(c-u)*r}a&&a(r),1==E&&(s&&s(),l())}function d(t){var n=m;if(n.elapsed||(n.elapsed=0,n.timer=0),n.timer+=Render.DELTA,n.elapsed=n.timer/n.time,n.elapsed<1){for(var i in n.start)e[i]=TweenManager.interpolateValues(n.start[i],n.end[i],n.elapsed,n.ease);a&&a(n.elapsed)}else m=b.shift(),m||(s&&s(),l())}var f,p,v,m,y,g,w,b,_=this,E=0;!function(){if(e&&t){if("number"!=typeof n)throw"MathTween Requires object, props, time, ease";u(),"object"!=typeof i||Array.isArray(i)||c()}}(),this.update=function(e){g||f>e||(b?d(e):h(e))},this.pause=function(){g=!0},this.resume=function(){g=!1,f=Date.now()-E*n},this.stop=function(){return _.stopped=!0,l(),null},this.setEase=function(e){w!=e&&(w=e,i=TweenManager.Interpolation.convertEase(e),y="function"==typeof i)},this.interpolate=function(t){var n=y?i(t):TweenManager.Interpolation.solve(i,t);for(var r in p)if("number"==typeof p[r]&&"number"==typeof v[r]){var a=p[r],s=v[r];e[r]=a+(s-a)*n}}}),Class(function(e,t,n,i,r,a,s){function o(){TweenManager.clearTween(e),e._mathTween=m,TweenManager._addMathTween(m),c=Date.now(),c+=r,h={},d={},l={},(t.x||t.y||t.z)&&("undefined"==typeof t.x&&(t.x=e.x),"undefined"==typeof t.y&&(t.y=e.y),"undefined"==typeof t.z&&(t.z=e.z)),p=0,f=t.damping||.5,delete t.damping;for(var n in t)"number"==typeof t[n]&&(l[n]=0,h[n]=t[n]);for(n in t)"number"==typeof e[n]&&(d[n]=e[n]||0,t[n]=d[n])}function u(t){if(e&&(e._mathTween=null,!t)){for(var n in h)"number"==typeof h[n]&&(e[n]=h[n]);e.transform&&e.transform()}TweenManager._removeMathTween(m)}var c,l,h,d,f,n,p,v,m=this;!function(){if(e&&t){if("number"!=typeof n)throw"SpringTween Requires object, props, time, ease";o()}}(),this.update=function(i){if(!(c>i||v)){var r;for(var o in d)if("number"==typeof d[o]){var m=(d[o],h[o]),y=t[o],g=m-y,w=g*f;l[o]+=w,l[o]*=n,t[o]+=l[o],e[o]=t[o],r=l[o]}Math.abs(r)<.1&&(p++,p>30&&(s&&s.apply(e),u())),a&&a(i),e.transform&&e.transform()}},this.pause=function(){v=!0},this.stop=function(){return u(!0),null}}),Class(function(){function e(){a.sort(function(e,t){var n=e.time+e.delay,i=t.time+t.delay;return i-n});var e=a[0];r=e.time+e.delay}function t(){for(var e=i.elapsed*r,t=a.length-1;t>-1;t--){var n=a[t],s=e-n.delay,o=Utils.clamp(s/n.time,0,1);n.interpolate(o)}}Inherit(this,Component);var n,i=this,r=0,a=[];this.elapsed=0,this.add=function(t,n,i,r,s){var o;return o=t instanceof HydraObject?new FrameTween(t,n,i,r,s,null,!0):new MathTween(t,n,i,r,s,null,null,!0),a.push(o),o.time=i,o.delay=s||0,e(),o},this.tween=function(e,t,r,a,s){this.stopTween(),n=TweenManager.tween(i,{elapsed:e},t,r,a,s)},this.stopTween=function(){n&&n.stop&&n.stop()},this.startRender=function(){Render.startRender(t)},this.stopRender=function(){Render.stopRender(t)},this.update=function(){t()},this.destroy=function(){Render.stopRender(t);for(var e=0;e<a.length;e++)a[e].stop();return this._destroy()}}),Class(function(){function e(e){var t=e.split("{@}");t.shift();for(var n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];i[r]=a}}function t(){for(var e in i){var t=i[e];"string"==typeof t&&(i[e]=n(t))}}function n(e){if(!e.strpos("require"))return e;for(e=e.replace(/# require/g,"#require");e.strpos("#require");){var t=e.split("#require("),n=t[1].split(")")[0];if(n=n.replace(/ /g,""),!i[n])throw"Shader required "+n+", but not found in compiled shaders.\n"+e;e=e.replace("#require("+n+")",i[n])}return e}var i=this;this.parse=function(n,r){n.strpos("{@}")?(e(n),t()):(r=r.split("/"),r=r[r.length-1],i[r]=n)},this.getShader=function(e){return i.FALLBACKS&&i.FALLBACKS[e]&&(e=i.FALLBACKS[e]),i[e]}},"static"),Class(function(){Inherit(this,Component);var e,t=[],n=[];this.enabled=!0,this.pastFrames=60,this.time=function(){if(this.enabled)if(e){var i=performance.now()-e;e=null,t.unshift(i),t.length>this.pastFrames&&t.pop(),n.unshift(Render.FPS),n.length>this.pastFrames&&n.pop(),this.average=0;for(var r=t.length,a=0;r>a;a++)this.average+=t[a];for(this.average/=r,this.averageFPS=0,r=n.length,a=0;r>a;a++)this.averageFPS+=n[a];this.averageFPS/=r}else e=performance.now()},this.clear=function(){t.length=0},this.dump=function(){console.log(t)},this.get("times",function(){return t}),this.get("median",function(){return t.sort(function(e,t){return e-t}),t[~~(t.length/2)]})}),Class(function(){function e(e){for(var t=0;t<n.length;t++)if(n[t].id==e)return!0}function t(e){for(var t=0;t<n.length;t++)if(n[t].id==e)return n[t]}var n=[];!function(){!function(e){var t=["SVGSVGElement","SVGGElement"],n=document.createElement("dummy");if(!t[0]in e)return!1;if(Object.defineProperty){var i={get:function(){return n.innerHTML="",Array.prototype.slice.call(this.childNodes).forEach(function(e){n.appendChild(e.cloneNode(!0))}),n.innerHTML},set:function(e){var t=this,i=Array.prototype.slice.call(t.childNodes),r=function(e,t){if(1!==t.nodeType)return!1;var n=document.createElementNS("http://www.w3.org/2000/svg",t.nodeName.toLowerCase());Array.prototype.slice.call(t.attributes).forEach(function(e){n.setAttribute(e.name,e.value)}),"TEXT"===t.nodeName&&(n.textContent=t.innerHTML),e.appendChild(n),t.childNodes.length&&Array.prototype.slice.call(t.childNodes).forEach(function(e){r(n,e)})},e=e.replace(/<(\w+)([^<]+?)\/>/,"<$1$2></$1>");i.forEach(function(e){e.parentNode.removeChild(e)}),n.innerHTML=e,Array.prototype.slice.call(n.childNodes).forEach(function(e){r(t,e)})},enumerable:!0,configurable:!0};try{t.forEach(function(e){Object.defineProperty(window[e].prototype,"innerHTML",i)})}catch(r){}}else Object.prototype.__defineGetter__&&t.forEach(function(e){window[e].prototype.__defineSetter__("innerHTML",i.set),window[e].prototype.__defineGetter__("innerHTML",i.get)})}(window)}(),this.defineSymbol=function(t,i,r,a){if(e(t))throw"SVG symbol "+t+" is already defined";var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("style","display: none;"),s.setAttribute("width",i),s.setAttribute("height",r),s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),s.innerHTML='<symbol id="'+t+'">'+a+"</symbol>",document.body.insertBefore(s,document.body.firstChild),n.push({id:t,width:i,height:r})},this.getSymbolConfig=function(e){var n=t(e);if("undefined"==typeof n)throw"SVG symbol "+e+" is not defined";return n}},"Static"),Class(function(e,t,n){function i(){for(var t=0;t<e.length;t++)"undefined"!=typeof e[t]&&(p++,c.push(e[t]))}function r(){l=Math.round(.5*p);for(var e=0;l>e;e++)s(c[e])}function a(){if(c){for(var e=[],t=0;t<c.length;t++){for(var n=!1,i=0;i<d.length;i++)d[i]==c[t]&&(n=!0);n||e.push(c[t])}e.length&&(console.log("AssetLoader Files Failed To Load:"),console.log(e))}}function s(e){if(e){var t=e.split("/");t=t[t.length-1];var i=t.split("."),r=i[i.length-1].split("?")[0];switch(r){case"html":XHR.get(e,function(t){Hydra.HTML[i[0]]=t,u(e)},"text");break;case"js":case"php":case void 0:XHR.get(e,function(t){t=t.replace("use strict",""),eval.call(window,t),u(e)},"text");break;case"csv":case"json":XHR.get(e,function(t){Hydra.JSON[i[0]]=t,u(e)},"csv"==r?"text":null);break;case"fs":case"vs":XHR.get(e,function(t){Shaders.parse(t,e),u(e)},"text");break;default:var a=new Image;a.crossOrigin="",a.src=e,a.onload=function(){u(e),n&&(n[e]=a)}}}}function o(){if(v==l&&p>v){var e=l;l*=2;for(var t=e;l>t;t++)c[t]&&s(c[t])}}function u(e){c&&(v++,f.events.fire(HydraEvents.PROGRESS,{percent:v/p}),d.push(e),clearTimeout(h),o(),v==p?(f.complete=!0,Render.nextFrame(function(){f.events&&f.events.fire(HydraEvents.COMPLETE,null,!0),t&&t()})):h=f.delayedCall(a,5e3))}Inherit(this,Component);var c,l,h,d,f=this,p=0,v=0,m=0,y=0;!function(){"function"!=typeof t&&(n=t,t=null),c=[],d=[],i(),f.delayedCall(r,10)}(),this.add=function(e){p+=e,m+=e},this.trigger=function(e){e=e||1;for(var t=0;e>t;t++)u("trigger")},this.triggerPercent=function(e,t){t=t||m;var n=Math.ceil(t*e);n>y&&this.trigger(n-y),y=n},this.destroy=function(){return e=null,v=null,c=null,l=null,this._destroy()}},function(){AssetLoader.loadAllAssets=function(e,t){t=t||"";for(var n=[],i=0;i<ASSETS.length;i++)n.push(t+ASSETS[i]);var r=new AssetLoader(n,function(){e&&e(),r=r.destroy()})},AssetLoader.loadAssets=function(e,t){var n=new AssetLoader(e,function(){t&&t(),n=n.destroy()})}}),Class(function(e,t){function n(){Array.isArray(e)||(e=[e]),r=Stage.create("FontLoader");for(var t=0;t<e.length;t++){var n=r.create("font");n.fontStyle(e[t],12,"#000").text("LOAD").css({top:-999})}}function i(){a.delayedCall(function(){r.remove(),t?t():a.events.fire(HydraEvents.COMPLETE)},500)}Inherit(this,Component);var r,a=this;!function(){n(),i()}()},function(){FontLoader.loadFonts=function(e,t){var n=new FontLoader(e,function(){t&&t(),n=null})}}),Class(function(){function e(n,i){if("object"==typeof i)for(var r in i){var a=n+"["+r+"]";"object"==typeof i[r]?e(a,i[r]):t.push(a+"="+i[r])}else t.push(n+"="+i)}var t,n=this,i=window.location.href.strpos("file://");this.headers={},this.get=function(e,t,r,a){if("function"==typeof t)a=r,r=t,t=null;else if("object"==typeof t){var s="?";for(var o in t)s+=o+"="+t[o]+"&";s=s.slice(0,-1),e+=s}var u=new XMLHttpRequest;u.open("GET",e,!0);for(var o in n.headers)u.setRequestHeader(o,n.headers);u.send(),u.onreadystatechange=function(){if(4==u.readyState&&(i||200==u.status)){if("function"==typeof r){var t=u.responseText;if("text"==a)r(t);else try{r(JSON.parse(t))}catch(n){console.error("XHR Parse: "+e+" : "+n.message)}}u=null}}},this.post=function(r,a,s,o,u){if("function"==typeof a)u=o,o=s,s=a,a=null;else if("object"==typeof a)if("json"==s||"json"==o||"json"==u)a=JSON.stringify(a);else{t=new Array;for(var c in a)e(c,a[c]);a=t.join("&"),a=a.replace(/\[/g,"%5B"),a=a.replace(/\]/g,"%5D"),t=null}var l=new XMLHttpRequest;switch(l.open("POST",r,!0),u){case"upload":u="application/upload";break;default:u="application/x-www-form-urlencoded"}l.setRequestHeader("Content-type",u);for(var c in n.headers)l.setRequestHeader(c,n.headers);l.onreadystatechange=function(){if(4==l.readyState&&(i||200==l.status)){if("function"==typeof s){var e=l.responseText;if("text"==o)s(e);else try{s(JSON.parse(e))}catch(t){console.error("XHR Parse: "+r+" : "+t.message)}}l=null}},l.send(a)}},"Static"),Class(function d(e){function t(){c=d.PATH,u={},o=new Worker(c+"assets/js/hydra/hydra-thread.js")}function n(){i(Utils),i(MVC),i(Component),i(Events),i(e,!0)}function i(e,t){if(e){var n,i;if(t){n=e.toString().replace("{","!!!"),n=n.split("!!!")[1];for(var a=window._MINIFIED_?"=":" ";n.strpos("this");){var s=n.slice(n.indexOf("this.")),u=s.split("this.")[1].split(a)[0];n=n.replace("this","self"),r(u)}n=n.slice(0,-1)}else"function"!=typeof e?(i=e.constructor._namespace?e.constructor._namespace+".":"",n=i+"Class("+e.constructor.toString()+', "static");'):(i=e._namespace?e._namespace+".":"",n=i+"Class("+e.toString()+");");o.postMessage({code:n})}}function r(e){l[e]=function(t,n){l.send(e,t,n)}}function a(){o.addEventListener("message",s)}function s(e){if(e.data.console)console.log(e.data.message);else if(e.data.id){var t=u[e.data.id];t&&t(e.data.message),delete u[e.data.id]}else if(e.data.emit){var t=u[e.data.evt];t&&t(e.data.msg)}else{var t=u.transfer;t&&t(e.data)}}Inherit(this,Component);var o,u,c,l=this;!function(){t(),n(),a()}(),this.on=function(e,t){u[e]=t},this.off=function(e){delete u[e]},this.loadFunctions=function(){for(var e=0;e<arguments.length;e++)this.loadFunction(arguments[e])},this.loadFunction=function(e){e=e.toString(),e=e.replace("(","!!!");var t=e.split("!!!"),n=t[0].split(" ")[1];e="self."+n+" = function("+t[1],o.postMessage({code:e}),r(n)},this.importScript=function(e){o.postMessage({path:e,importScript:!0})},this.importClass=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];i(t)}},this.send=function(e,t,n){if("string"==typeof e){t=t||{},t.fn=e}else n=t,t=e;var i=Utils.timestamp();n&&(u[i]=n),t.transfer?(t.msg.id=i,t.msg.fn=t.fn,t.msg.transfer=!0,o.postMessage(t.msg,t.buffer)):o.postMessage({message:t,id:i})},this.destroy=function(){return o.terminate&&o.terminate(),this._destroy()}},function(){Thread.PATH=""}),Class(function(){function e(){window.onerror=function(e,r,a){var s=e+" ::: "+r+" : "+a;i&&alert(s),n&&XHR.post(n+"/api/data/debug",t(s),"json")}}function t(e){var t={};return t.err=e,t.ua=Device.agent,t.browser={width:Stage.width,height:Stage.height},t}var n,i;!function(){Hydra.LOCAL&&Hydra.development(!0)}(),this.alertErrors=function(t){i=!0,"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)if(location.href.strpos(t[n])||location.hash.strpos(t[n]))return e()},this.postErrors=function(t,i){n=i,"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++)if(location.href.strpos(t[r]))return e()},this.expose=function(e,t,n){(Hydra.LOCAL||n)&&(window[e]=t)}},"Static"),window.ASSETS=["assets/geometry/hut.json","assets/geometry/tree.json","assets/images/dome/sky-negx.jpg","assets/images/dome/sky-negy.jpg","assets/images/dome/sky-negz.jpg","assets/images/dome/sky-posx.jpg","assets/images/dome/sky-posy.jpg","assets/images/dome/sky-posz.jpg","assets/images/flakes/particle.png","assets/images/ice/depth.jpg","assets/images/ice/normal.jpg","assets/images/rock/normal.jpg","assets/images/snow/diffuse.jpg","assets/images/snow/noise.jpg","assets/images/snow/normal.jpg","assets/images/snow/reflect.jpg","assets/images/snow/stamp.png","assets/images/soil/diffuse0.jpg","assets/images/soil/diffuse1.jpg","assets/images/soil/noise0.jpg","assets/images/soil/normal.jpg","assets/images/stars/center.jpg","assets/images/stars/flare.jpg","assets/images/stars/map.jpg","assets/images/storm/cloud.png","assets/images/textures/hut.jpg","assets/images/textures/leaf.png","assets/images/ui/bg.jpg","assets/images/ui/cardboard.png","assets/images/ui/loader-bg.png","assets/images/ui/loader.png","assets/images/ui/logo.png","assets/images/ui/sound.png","assets/images/ui/stars.png","assets/images/ui/vr.png","assets/js/lib/three.min.js","assets/shaders/compiled.vs"],Class(function(){var e=this;this.CDN=function(){return window.location.href.strpos("neve.activetheory")?"http://at-neve.s3-us-west-1.amazonaws.com/":""}(),this.SALT="?07011989",Hydra.ready(function(){Hydra.CDN=e.CDN,Utils3D.PATH=e.CDN,AssetUtil.PATH=e.CDN,window.location.href.strpos("neve.activetheory")&&(Thread.PATH="http://neve.activetheory.net/cdn/")})},"static"),Class(function(){this.READY="ready"},"static"),Class(function(){function e(e){for(var t=0;t<i.length;t++){var n=i[t];if(e.strpos(n))return!1}return!0}var t=this,n={},i=["!!!"];this.PATH="",this.loadAssets=function(e){for(var i=this.get(e),r=[],a=i.length-1;a>-1;a--){var s=i[a];n[s]||(r.push(t.PATH+s),n[s]=1)}return r},this.get=function(t){Array.isArray(t)||(t=[t]);for(var n=[],i=ASSETS.length-1;i>-1;i--)for(var r=ASSETS[i],a=t.length-1;a>-1;a--){var s=t[a];r.strpos(s)&&e(r)&&n.push(r+Config.SALT)}return n},this.exclude=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)i.push(e[t])},this.loadAllAssets=function(e){var n=t.loadAssets(e||"/");new AssetLoader(n)}},"Static"),Class(function(){this.CARDBOARD=window.location.search.strpos("cardboard"),this.OCULUS=window.location.search.strpos("webvr"),this.VR=this.CARDBOARD||this.OCULUS,this.NO_INTERACTION=!1,this.NO_FX=function(){return"mac"==Device.system.os&&2==Device.pixelRatio&&1280==document.documentElement.clientWidth&&800==document.documentElement.clientHeight?!0:!1}()},"static"),Class(function(){Inherit(this,NukePass);this.fragmentShader=["varying vec2 vUv;","uniform sampler2D tDiffuse;","void main() {","gl_FragColor = texture2D(tDiffuse, vUv);","}"],this.init(this.fragmentShader)}),Class(function(e,t){function n(){var e=s.stage.width*d,t=s.stage.height*d;o=new THREE.WebGLRenderTarget(e,t,f),u=new THREE.WebGLRenderTarget(e,t,f),h=new THREE.OrthographicCamera(s.stage.width/-2,s.stage.width/2,s.stage.height/2,s.stage.height/-2,1,1e3),c=new THREE.Scene;var n=new THREE.PlaneBufferGeometry(2,2,1,1);l=new THREE.Mesh(n,new THREE.MeshBasicMaterial),c.add(l)}function i(e,t){s.rtt?s.renderer.render(e,t||s.camera,s.rtt,!0):s.renderer.render(e,t||s.camera)}function r(){s.events.subscribe(HydraEvents.RESIZE,a)}function a(){var e=s.stage.width*d,t=s.stage.height*d;o&&o.dispose(),u&&u.dispose(),o=new THREE.WebGLRenderTarget(e,t,f),u=new THREE.WebGLRenderTarget(e,t,f),h.left=s.stage.width/-2,h.right=s.stage.width/2,h.top=s.stage.height/2,h.bottom=s.stage.height/-2,h.updateProjectionMatrix()}Inherit(this,Component);var s=this;t.renderer||console.error("Nuke :: Must define renderer"),s.stage=e,s.renderer=t.renderer,s.camera=t.camera,s.scene=t.scene,s.rtt=t.rtt,s.enabled=t.enabled||!0,s.passes=t.passes||[];var o,u,c,l,h,d=t.dpr||1,f={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};!function(){n(),r()}(),s.add=function(e,t){return"number"==typeof t?void s.passes.splice(t,0,e):void s.passes.push(e)},s.remove=function(e){"number"==typeof e?s.passes.splice(e):s.passes.findAndRemove(e)},s.renderToTexture=function(e,t){s.renderer.render(s.scene,s.camera,t||o,"boolean"==typeof e?e:!0)},s.render=function(){if(!s.enabled||!s.passes.length)return void i(s.scene);s.multiRender||s.renderer.render(s.scene,s.camera,o,!0);for(var e=!0,t=0;t<s.passes.length-1;t++)l.material=s.passes[t].pass,l.material.uniforms.tDiffuse.value=e?o:u,s.renderer.render(c,h,e?u:o),e=!e;l.material=s.passes[s.passes.length-1].pass,l.material.uniforms.tDiffuse.value=e?o:u,i(c,h)},s.set("dpr",function(e){d=e||Device.pixelRatio,a()}),this.get("dpr",function(){return d})}),Class(function(e,t){Inherit(this,Component);var n=this;this.init=function(e){n=this;var i=e||this.constructor.toString().match(/function ([^\(]+)/)[1],r=Array.isArray(e)?e.join(""):null;n.uniforms=n.uniforms||{},n.uniforms.tDiffuse={type:"t",value:null},n.pass=new THREE.ShaderMaterial({uniforms:n.uniforms,vertexShader:"string"==typeof t?Shaders[i+".vs"]:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4(position, 1.0); }",fragmentShader:r||Shaders[i+".fs"]}),n.uniforms=n.pass.uniforms},this.set=function(e,t){this.uniforms[e].value=t},this.tween=function(e,t,i,r,a,s,o){TweenManager.tween(n.uniforms[e],{value:t},i,r,a,s,o)},"string"==typeof e&&this.init(e)}),Class(function(e){function t(e){var t;return t=Array.isArray(e)?a.intersectObjects(e):a.intersectObject(e),s&&n(),t}function n(){var e=s.geometry.vertices;e[0].copy(a.ray.origin.clone()),e[1].copy(a.ray.origin.clone().add(a.ray.direction.clone().multiplyScalar(1e4))),e[0].x+=1,s.geometry.verticesNeedUpdate=!0}Inherit(this,Component);var i=this,r=new THREE.Vector3,a=new THREE.Raycaster,s=null;this.set("camera",function(t){e=t}),this.debug=function(e){var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3(-100,0,0)),t.vertices.push(new THREE.Vector3(100,0,0));var n=new THREE.LineBasicMaterial({color:16711680});s=new THREE.Line(t,n),e.add(s)},this.checkHit=function(n,s){s=s||Mouse;var o=i.rect||Stage;return r.x=s.x/o.width*2-1,r.y=2*-(s.y/o.height)+1,a.setFromCamera(r,e),t(n)},this.checkFromValues=function(e,n,i){return a.set(n,i,0,Number.POSITIVE_INFINITY),t(e)}}),Class(function(e){Inherit(this,Component);var t=this,n=new THREE.Vector3,i=new THREE.Vector3;this.set("camera",function(t){e=t}),this.unproject=function(r){var a=t.rect||Stage;n.set(r.x/a.width*2-1,2*-(r.y/a.height)+1,.5),n.unproject(e);var s=e.position;n.sub(s).normalize();var o=-s.z/n.z;return i.copy(s).add(n.multiplyScalar(o)),i},this.project=function(t,i){return i=i||Stage,t instanceof THREE.Object3D?(t.updateMatrixWorld(),n.set(0,0,0).setFromMatrixPosition(t.matrixWorld)):n.copy(t),n.project(e),n.x=(n.x+1)/2*i.width,n.y=-(n.y-1)/2*i.height,n}}),Class(function(e){function t(){n={},n.x=Utils.doRandom(0,2),n.y=Utils.doRandom(0,2),n.z=Utils.doRandom(0,2),n.vx=.0025*Utils.doRandom(-5,5),n.vy=.0025*Utils.doRandom(-5,5),n.vz=.0025*Utils.doRandom(-5,5)}var n,i=this,r=["x","y","z"];this.speed=1,function(){t()}(),this.update=function(){for(var t=Render.TIME,a=0;3>a;a++){var s=r[a];switch(n[s]){case 0:e.rotation[s]+=Math.cos(Math.sin(.25*t))*n["v"+s]*i.speed;break;case 1:e.rotation[s]+=Math.cos(Math.sin(.25*t))*n["v"+s]*i.speed;break;case 2:e.rotation[s]+=Math.cos(Math.cos(.25*t))*n["v"+s]*i.speed}}}}),Class(function f(e,t,n,i){function r(){Dev.expose(n,a)}Inherit(this,Component);var a=this;!function(){Hydra.LOCAL&&n&&r(),i&&(a.uniforms=i.uniforms,a.attributes=i.attributes)}(),this.get("material",function(){if(!i){var n={};n.vertexShader=Shaders.getShader(e+".vs"),n.fragmentShader=Shaders.getShader(t+".fs"),a.attributes&&(n.attributes=a.attributes),a.uniforms&&(n.uniforms=a.uniforms),i=new THREE.ShaderMaterial(n),i.shader=a}return i}),this.set=function(e,t){return"undefined"!=typeof t&&(a.uniforms[e].value=t),a.uniforms[e].value},this.getValues=function(){var e={};for(var t in a.uniforms)e[t]=a.uniforms[t].value;return e},this.copyUniformsTo=function(e){for(var t in a.uniforms)e.uniforms[t]=a.uniforms[t]},this.tween=function(e,t,n,i,r,s,o){TweenManager.tween(a.uniforms[e],{value:t},n,i,r,s,o)},this.clone=function(i){return new f(e,t,i||n,a.material.clone())}}),Class(function(){var e,t,n,i=this,r={};this.PATH="",this.decompose=function(e,t){e.matrixWorld.decompose(t.position,t.quaternion,t.scale)},this.createDebug=function(e,t){var n=new THREE.IcosahedronGeometry(e||40,1),i=t?new THREE.MeshBasicMaterial({color:t}):new THREE.MeshNormalMaterial;return new THREE.Mesh(n,i)},this.createRT=function(e,t){var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1};return new THREE.WebGLRenderTarget(e,t,n)},this.getTexture=function(e,t){if(!r[e]){var n=new Image;n.crossOrigin="",n.src=i.PATH+e+Config.SALT;var a=new THREE.Texture(n);n.onload=function(){a.needsUpdate=!0,a.onload&&(a.onload(),a.onload=null)},r[e]=a,t||(a.minFilter=THREE.LinearFilter)}return r[e]},this.setInfinity=function(e){var t=Number.POSITIVE_INFINITY;return e.set(t,t,t),e},this.freezeMatrix=function(e){e.matrixAutoUpdate=!1,e.updateMatrix()},this.getCubemap=function(e){var t="cube_"+(Array.isArray(e)?e[0]:e);if(!r[t]){for(var n=[],a=0;6>a;a++){var s=new Image;s.crossOrigin="",s.src=i.PATH+(Array.isArray(e)?e[a]:e)+Config.SALT,n.push(s),s.onload=function(){r[t].needsUpdate=!0}}r[t]=new THREE.Texture,r[t].image=n,r[t].minFilter=THREE.LinearFilter}return r[t]},this.loadObject=function(t){return e||(e=new THREE.ObjectLoader),e.parse(Hydra.JSON[t])},this.loadGeometry=function(e){t||(t=new THREE.JSONLoader),n||(n=new THREE.BufferGeometryLoader);var i=Hydra.JSON[e];return"BufferGeometry"==i.type?n.parse(i):t.parse(i.data).geometry},this.disposeAllTextures=function(){for(var e in r)r[e].dispose()},this.disableWarnings=function(){window.console.warn=function(e,t){},window.console.error=function(){}}},"static"),Class(function(){Inherit(this,Component);this.getRepeatTexture=function(e){var t=Utils3D.getTexture(e);return t.wrapS=t.wrapT=THREE.RepeatWrapping,t}},"static"),Class(function p(){function e(e){var t=e.touches[0],n=e.touches[1];t&&u.set(t.pageX,t.pageY),n&&c.set(n.pageX,n.pageY)}function t(){Stage.bind("touchstart",i),Stage.bind("touchend",a),Stage.bind("touchcancel",a)}function n(){Stage.unbind("touchstart",i),Stage.unbind("touchend",a),Stage.unbind("touchcancel",a),Stage.unbind("touchmove",r)}function i(t){2!=t.touches.length||m||(m=!0,d=f,e(t),Stage.bind("touchmove",r),h=l.subVectors(u,c).length())}function r(t){e(t);var n=l.subVectors(u,c).length(),i=n-h,r=Utils.range(i,0,s.max,0,1);f=Utils.clamp(d+r,0,1),o.delta=n>v?1:-1,o.percent=f,s.events.fire(p.UPDATE,o,!0),v=n}function a(e){m&&(m=!1,d=f,Stage.unbind("touchmove",r),s.events.fire(p.END,null,!0))}Inherit(this,Component);var s=this,o={percent:0},u=new Vector2,c=new Vector2,l=new Vector2,h=0,d=0,f=0,v=0,m=!1;this.max=150,this.set("percent",function(e){f=e}),this.start=function(){t()},this.stop=function(){n()},this.snapTo=function(e,t){var n=new DynamicObject({v:f});n.tween({v:e},t,"linear",function(){o.delta=0,o.percent=n.v,d=n.v,s.events.fire(HydraEvents.UPDATE,o,!0)})}},function(){PinchMechanism.END="pinch_end",PinchMechanism.UPDATE="pinch_update"}),Class(function(){function e(){return Device.browser.ie?o=2:void(o="mac"==Device.system.os?Device.browser.chrome||Device.browser.safari?40:1:Device.browser.chrome?15:.5)}function t(){Device.mobile?(__window.bind("touchstart",n),__window.bind("touchend",r),__window.bind("touchcancel",r)):(__window.bind("DOMMouseScroll",a),__window.bind("mousewheel",a))}function n(e){c.y=e.y,c.time=Date.now(),__window.bind("touchmove",i)}function i(e){var t=e.y-c.y;c.y=e.y,c.velocity=t/(c.time-Date.now()),c.time=Date.now(),s(-t)}function r(e){__window.unbind("touchmove",i),s(100*c.velocity,c)}function a(e){e.preventDefault&&e.preventDefault();var t=e.wheelDelta||-e.detail;if("undefined"!=typeof e.deltaX||e.key)l.x=.4*-e.deltaX,l.y=.4*e.deltaY;else{l.x=0;var n=Math.ceil(-t/o);e.preventDefault&&e.preventDefault(),0>=n&&(n-=1),n=Utils.clamp(n,-60,60),l.y=3.5*n}s(l)}function s(e){for(var t=0;t<u.length;t++)u[t](e)}Inherit(this,Component);var o,u=[],c={y:0,save:0},l={};!function(){e(),Hydra.ready(t)}(),this.reset=function(){this.value=0},this.link=function(e){u.push(e)},this.unlink=function(e){var t=u.indexOf(e);t>-1&&u.splice(t,1)}},"Static"),Class(function(){Inherit(this,NukePass);this.uniforms={blur:{type:"f",value:100},gradientBlur:{type:"f",value:600},start:{type:"v2",value:new THREE.Vector2(0,Stage.height/2)},end:{type:"v2",value:new THREE.Vector2(600,Stage.height/2)},delta:{type:"v2",value:new THREE.Vector2(30,30)},texSize:{type:"v2",value:new THREE.Vector2(Stage.width,Stage.height)}},this.init()}),Class(function(){function e(){i=s.initClass(TiltShiftX),r=s.initClass(TiltShiftY),s.x=i,s.y=r}function t(){s.events.subscribe(HydraEvents.RESIZE,n)}function n(){if(i.set("texSize",new THREE.Vector2(Stage.width,Stage.height)),r.set("texSize",new THREE.Vector2(Stage.width,Stage.height)),!a){var e=new Vector2(0,Stage.height/2),t=new Vector2(600,Stage.height/2);i.set("start",e),r.set("start",e),i.set("end",t),r.set("end",t),i.update(),r.update()}}Inherit(this,Component);var i,r,a,s=this;!function(){e(),t()}(),this.set("blur",function(e){i.set("blur",e),r.set("blur",e)}),this.set("gradientBlur",function(e){i.set("gradientBlur",e),r.set("gradientBlur",e)}),this.set("start",function(e){a=!0,i.set("start",e),r.set("start",e),i.update(),r.update()}),this.set("end",function(e){a=!0,i.set("end",e),r.set("end",e),i.update(),r.update()})}),Class(function(){function e(){var e=t.uniforms.end.value.x-t.uniforms.start.value.x,n=t.uniforms.end.value.y-t.uniforms.start.value.y,i=Math.sqrt(e*e+n*n);t.uniforms.delta.value.x=e/i,t.uniforms.delta.value.y=n/i}Inherit(this,TiltShift);var t=this;!function(){e()}(),this.update=e}),Class(function(){function e(){var e=t.uniforms.end.value.x-t.uniforms.start.value.x,n=t.uniforms.end.value.y-t.uniforms.start.value.y,i=Math.sqrt(e*e+n*n);t.uniforms.delta.value.x=-n/i,t.uniforms.delta.value.y=e/i}Inherit(this,TiltShift);var t=this;!function(){e()}(),this.update=e}),Class(function(e){Inherit(this,Component);var t=this,n=Utils.toRadians(Utils.doRandom(0,360)),i=new Vector3,r=new Vector3;this.target=i,this.scale=.1,this.alpha=.025,this.speed=1,this.zMove=2,this.enabled=!0,function(){e&&r.copyFrom(e)}(),this.update=function(){if(t.enabled&&!t.disabled){var a=window.Render?Render.TIME:Date.now();i.x=Math.cos(n+a*(75e-5*t.speed))*(n+200*Math.sin(a*(95e-5*t.speed))),i.y=Math.sin(Math.asin(Math.cos(n+a*(85e-5*t.speed))))*(150*Math.sin(n+a*(75e-5*t.speed))),i.x*=2*Math.sin(n+a*(75e-5*t.speed)),i.y*=1.75*Math.cos(n+a*(65e-5*t.speed)),i.x*=1.1*Math.cos(n+a*(75e-5*t.speed)),i.y*=1.15*Math.sin(n+a*(25e-5*t.speed)),i.z=Math.sin(n+.0025*i.x)*(100*t.zMove),i.multiply(t.scale),i.add(r),e&&e.lerp(i,t.alpha)}},this.copyOrigin=function(){r.copyFrom(e)}}),Class(function(){function e(){c=document.createElement("audio"),c.src=Config.CDN+"assets/sound/track."+Device.media.audio+Config.SALT,l=new Howl({urls:[Config.CDN+"assets/sound/snow.mp3"+Config.SALT,Config.CDN+"assets/sound/snow.ogg"+Config.SALT],loop:!0,volume:0}),"Android"==Mobile.os?Stage.bind("touchstart",r):"iOS"==Mobile.os&&(Stage.bind("touchstart",n),Stage.bind("touchend",i))}function t(e){p.tween({v:e},300,"linear",function(){l.volume(p.v)})}function n(e){f.copyFrom(e)}function i(e){f.subVectors(e,f).length()<10&&(l.play(),c.play(),Stage.unbind("touchend",i),Stage.unbind("touchstart",n))}function r(){l.play(),c.play(),Stage.unbind("touchstart",r)}function a(){Howler.mute(),c.volume=0}function s(){Howler.unmute(),c.volume=1}function o(){d.events.subscribe(HydraEvents.BROWSER_FOCUS,u)}function u(e){"blur"==e.type?a():h||s()}Inherit(this,Model);var c,l,h,d=this,f=new Vector2,p=new DynamicObject({v:0});!function(){Hydra.ready(e),o()}(),this.start=function(){Device.mobile||(l.play(),c.play())},this.startSnow=function(){l.active||(l.active=!0,t(.6))},this.stopSnow=function(){l.active&&(l.active=!1,t(0))},this.toggleMute=function(){h?(h=!1,s()):(h=!0,a())}},"static"),!function(){var e={},t=null,n=!0,i=!1;try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:n=!1}catch(r){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(r){i=!0}else i=!0;if(n){var a="undefined"==typeof t.createGain?t.createGainNode():t.createGain();a.gain.value=1,a.connect(t.destination)}var s=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=n,this.ctx=t,this.noAudio=i,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};s.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&1>=e){t._volume=e,n&&(a.gain.value=e);for(var i in t._howls)if(t._howls.hasOwnProperty(i)&&t._howls[i]._webAudio===!1)for(var r=0;r<t._howls[i]._audioNode.length;r++)t._howls[i]._audioNode[r].volume=t._howls[i]._volume*t._volume;return t;
}return n?a.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,n&&(a.gain.value=e?0:t._volume);for(var i in t._howls)if(t._howls.hasOwnProperty(i)&&t._howls[i]._webAudio===!1)for(var r=0;r<t._howls[i]._audioNode.length;r++)t._howls[i]._audioNode[r].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var n=function(){var i=t.createBuffer(1,1,22050),r=t.createBufferSource();r.buffer=i,r.connect(t.destination),"undefined"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",n,!1))},0)};return window.addEventListener("touchend",n,!1),e}}};var o=null,u={};i||(o=new Audio,u={mp3:!!o.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var c=new s(u),l=function(e){var i=this;i._autoplay=e.autoplay||!1,i._buffer=e.buffer||!1,i._duration=e.duration||0,i._format=e.format||null,i._loop=e.loop||!1,i._loaded=!1,i._sprite=e.sprite||{},i._src=e.src||"",i._pos3d=e.pos3d||[0,0,-.5],i._volume=void 0!==e.volume?e.volume:1,i._urls=e.urls||[],i._rate=e.rate||1,i._model=e.model||null,i._onload=[e.onload||function(){}],i._onloaderror=[e.onloaderror||function(){}],i._onend=[e.onend||function(){}],i._onpause=[e.onpause||function(){}],i._onplay=[e.onplay||function(){}],i._onendTimer=[],i._webAudio=n&&!i._buffer,i._audioNode=[],i._webAudio&&i._setupAudioNode(),"undefined"!=typeof t&&t&&c.iOSAutoEnable&&c._enableiOSAudio(),c._howls.push(i),i.load()};if(l.prototype={load:function(){var e=this,t=null;if(i)return void e.on("loaderror");for(var n=0;n<e._urls.length;n++){var r,a;if(e._format)r=e._format;else{if(a=e._urls[n],r=/^data:audio\/([^;,]+);/i.exec(a),r||(r=/\.([^.]+)$/.exec(a.split("?",1)[0])),!r)return void e.on("loaderror");r=r[1].toLowerCase()}if(u[r]){t=e._urls[n];break}}if(!t)return void e.on("loaderror");if(e._src=t,e._webAudio)h(e,t);else{var o=new Audio;o.addEventListener("error",function(){o.error&&4===o.error.code&&(s.noAudio=!0),e.on("loaderror",{type:o.error?o.error.code:0})},!1),e._audioNode.push(o),o.src=t,o._pos=0,o.preload="auto",o.volume=c._muted?0:e._volume*c.volume();var l=function(){e._duration=Math.ceil(10*o.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),o.removeEventListener("canplaythrough",l,!1)};o.addEventListener("canplaythrough",l,!1),o.load()}return e},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,n){var i=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),i._loaded?i._sprite[e]?(i._inactiveNode(function(r){r._sprite=e;var a=r._pos>0?r._pos:i._sprite[e][0]/1e3,s=0;i._webAudio?(s=i._sprite[e][1]/1e3-r._pos,r._pos>0&&(a=i._sprite[e][0]/1e3+a)):s=i._sprite[e][1]/1e3-(a-i._sprite[e][0]/1e3);var o,u=!(!i._loop&&!i._sprite[e][2]),l="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:l,sprite:e,loop:u};o=setTimeout(function(){!i._webAudio&&u&&i.stop(t.id).play(e,t.id),i._webAudio&&!u&&(i._nodeById(t.id).paused=!0,i._nodeById(t.id)._pos=0,i._clearEndTimer(t.id)),i._webAudio||u||i.stop(t.id),i.on("end",l)},1e3*s),i._onendTimer.push({timer:o,id:t.id})}(),i._webAudio){var h=i._sprite[e][0]/1e3,d=i._sprite[e][1]/1e3;r.id=l,r.paused=!1,p(i,[u,h,d],l),i._playStart=t.currentTime,r.gain.value=i._volume,"undefined"==typeof r.bufferSource.start?u?r.bufferSource.noteGrainOn(0,a,86400):r.bufferSource.noteGrainOn(0,a,s):u?r.bufferSource.start(0,a,86400):r.bufferSource.start(0,a,s)}else{if(4!==r.readyState&&(r.readyState||!navigator.isCocoonJS))return i._clearEndTimer(l),function(){var t=i,a=e,s=n,o=r,u=function(){t.play(a,s),o.removeEventListener("canplaythrough",u,!1)};o.addEventListener("canplaythrough",u,!1)}(),i;r.readyState=4,r.id=l,r.currentTime=a,r.muted=c._muted||r.muted,r.volume=i._volume*c.volume(),setTimeout(function(){r.play()},0)}return i.on("play"),"function"==typeof n&&n(l),i}),i):("function"==typeof n&&n(),i):(i.on("load",function(){i.play(e,n)}),i)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=t.pos(null,e),t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=0,t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.muted=!1),t},volume:function(e,t){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;var i=t?n._nodeById(t):n._activeNode();return i&&(n._webAudio?i.gain.value=e:i.volume=e*c.volume()),n}return n._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,n){var i=this;if(!i._loaded)return i.on("load",function(){i.pos(e)}),"number"==typeof e?i:i._pos||0;e=parseFloat(e);var r=n?i._nodeById(n):i._activeNode();if(r)return e>=0?(i.pause(n),r._pos=e,i.play(r._sprite,n),i):i._webAudio?r._pos+(t.currentTime-i._playStart):r.currentTime;if(e>=0)return i;for(var a=0;a<i._audioNode.length;a++)if(i._audioNode[a].paused&&4===i._audioNode[a].readyState)return i._webAudio?i._audioNode[a]._pos:i._audioNode[a].currentTime},pos3d:function(e,t,n,i){var r=this;if(t="undefined"!=typeof t&&t?t:0,n="undefined"!=typeof n&&n?n:-.5,!r._loaded)return r.on("play",function(){r.pos3d(e,t,n,i)}),r;if(!(e>=0||0>e))return r._pos3d;if(r._webAudio){var a=i?r._nodeById(i):r._activeNode();a&&(r._pos3d=[e,t,n],a.panner.setPosition(e,t,n),a.panner.panningModel=r._model||"HRTF")}return r},fade:function(e,t,n,i,r){var a=this,s=Math.abs(e-t),o=e>t?"down":"up",u=s/.01,c=n/u;if(!a._loaded)return a.on("load",function(){a.fade(e,t,n,i,r)}),a;a.volume(e,r);for(var l=1;u>=l;l++)!function(){var e=a._volume+("up"===o?.01:-.01)*l,n=Math.round(1e3*e)/1e3,s=t;setTimeout(function(){a.volume(n,r),n===s&&i&&i()},c*l)}()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,i){var r=this;return r.fade(r._volume,e,t,function(){n&&n(),r.pause(i),r.on("end")},i)},_nodeById:function(e){for(var t=this,n=t._audioNode[0],i=0;i<t._audioNode.length;i++)if(t._audioNode[i].id===e){n=t._audioNode[i];break}return n},_activeNode:function(){for(var e=this,t=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,n=null,i=0;i<t._audioNode.length;i++)if(t._audioNode[i].paused&&4===t._audioNode[i].readyState){e(t._audioNode[i]),n=!0;break}if(t._drainPool(),!n){var r;if(t._webAudio)r=t._setupAudioNode(),e(r);else{t.load(),r=t._audioNode[t._audioNode.length-1];var a=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",s=function(){r.removeEventListener(a,s,!1),e(r)};r.addEventListener(a,s,!1)}}},_drainPool:function(){var e,t=this,n=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&n++;for(e=t._audioNode.length-1;e>=0&&!(5>=n);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),n--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,n=0,i=0;i<t._onendTimer.length;i++)if(t._onendTimer[i].id===e){n=i;break}var r=t._onendTimer[n];r&&(clearTimeout(r.timer),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,i=e._audioNode.length;return n[i]="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),n[i].gain.value=e._volume,n[i].paused=!0,n[i]._pos=0,n[i].readyState=4,n[i].connect(a),n[i].panner=t.createPanner(),n[i].panner.panningModel=e._model||"equalpower",n[i].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[i].panner.connect(n[i]),n[i]},on:function(e,t){var n=this,i=n["_on"+e];if("function"==typeof t)i.push(t);else for(var r=0;r<i.length;r++)t?i[r].call(n,t):i[r].call(n);return n},off:function(e,t){var n=this,i=n["_on"+e],r=t?t.toString():null;if(r){for(var a=0;a<i.length;a++)if(r===i[a].toString()){i.splice(a,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var t=this,n=t._audioNode,i=0;i<t._audioNode.length;i++)n[i].paused||(t.stop(n[i].id),t.on("end",n[i].id)),t._webAudio?n[i].disconnect(0):n[i].src="";for(i=0;i<t._onendTimer.length;i++)clearTimeout(t._onendTimer[i].timer);var r=c._howls.indexOf(t);null!==r&&r>=0&&c._howls.splice(r,1),delete e[t._src],t=null}},n)var h=function(t,n){if(n in e)return t._duration=e[n].duration,void f(t);if(/^data:[^;]+;base64,/.test(n)){for(var i=atob(n.split(",")[1]),r=new Uint8Array(i.length),a=0;a<i.length;++a)r[a]=i.charCodeAt(a);d(r.buffer,t,n)}else{var s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(){d(s.response,t,n)},s.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[n],t.load())};try{s.send()}catch(o){s.onerror()}}},d=function(n,i,r){t.decodeAudioData(n,function(t){t&&(e[r]=t,f(i,t))},function(e){i.on("loaderror")})},f=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},p=function(n,i,r){var a=n._nodeById(r);a.bufferSource=t.createBufferSource(),a.bufferSource.buffer=e[n._src],a.bufferSource.connect(a.panner),a.bufferSource.loop=i[0],i[0]&&(a.bufferSource.loopStart=i[1],a.bufferSource.loopEnd=i[1]+i[2]),a.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:c,Howl:l}}),"undefined"!=typeof exports&&(exports.Howler=c,exports.Howl=l),"undefined"!=typeof window&&(window.Howler=c,window.Howl=l)}(),Class(function(){function e(){h=new THREE.Object3D,d=new THREE.Object3D,f=new THREE.Object3D,h.add(d),d.add(f),f.add(w),h.matrixAutoUpdate=!1,w.position.z=y.zDistance,p=y.initClass(CameraRotation,h,d),l=y.initClass(CameraOrbit,w,f),l.enabled=!1,y.orbit=l,y.rotation=p}function t(){m={},m.wrapper=new THREE.Object3D,m.controls=new THREE.DeviceOrientationControls(m.wrapper),m.wrapper.add(w),g.position.y=100,g.add(m.wrapper),w.fov=y.worldCamera.fov=80,w.updateProjectionMatrix(),y.worldCamera.updateProjectionMatrix()}function n(){g.position.y=100,g.add(w),w.fov=y.worldCamera.fov=90,w.updateProjectionMatrix(),y.worldCamera.updateProjectionMatrix()}function i(e){p&&p.update(),l&&l.update(),h&&h.updateMatrixWorld(),Hardware.VR&&(Mouse.x=Stage.width/2,Mouse.y=Stage.height/2,g.position.x=2500*Math.cos(75e-6*e)*y.vrRadius,g.position.z=2500*Math.sin(75e-6*e)*y.vrRadius,g.updateMatrixWorld()),m&&(m.wrapper.updateMatrixWorld(),m.controls.update()),Utils3D.decompose(w,y.worldCamera)}function r(){v=y.initClass(PinchMechanism),v.start(),v.percent=5e3/7e3,y.zoom=v.percent,v.events.add(PinchMechanism.UPDATE,o)}function a(){TweenManager.tween(y,{vrRadius:1},1e4,"easeInOutCubic"),TweenManager.tween(g.position,{y:1e3},1e4,"easeInOutQuad"),y.delayedCall(function(){TweenManager.tween(y,{vrRadius:0},1e4,"easeInOutCubic"),TweenManager.tween(g.position,{y:100},1e4,"easeInOutQuad"),y.delayedCall(a,2e4)},6e4)}function s(){y.events.subscribe(HydraEvents.RESIZE,c),Hardware.VR||(Device.mobile?r():ScrollUtil.link(u))}function o(e){y.zoom=e.percent,y.zDistance=Utils.range(e.percent,1,0,2500,7e3)}function u(e){if(l.enabled){var t=y.zDistance;t+=2*e.y,t=Utils.clamp(t,2500,7e3),y.zDistance=t,y.zoom=Utils.range(t,2500,7e3,0,1)}}function c(){var e=[w,y.worldCamera];e.forEach(function(e){e.aspect=Stage.width/Stage.height,e.updateProjectionMatrix()})}Inherit(this,Component);var l,h,d,f,p,v,m,y=this,g=new THREE.Object3D,w=(new THREE.Vector3,new THREE.PerspectiveCamera(40,Stage.width/Stage.height,10,1e5));this.worldCamera=new THREE.PerspectiveCamera(40,Stage.width/Stage.height,10,1e5),this.zDistance=15e3,this.zOrigin=this.zDistance,this.zMove=0,this.vrRadius=0,this.multiTween=!0,function(){Mouse.x=Stage.width/2,Mouse.y=Stage.height/2,Mouse.capture(),Hardware.CARDBOARD?t():Hardware.OCULUS?n():e(),s(),Render.start(i),Hardware.VR&&y.delayedCall(a,3e4)}(),this.animateIn=function(){Hardware.VR||(y.available=!0,p.animateIn(),TweenManager.tween(y,{zDistance:5e3},5e3,"easeInOutCubic",function(){l.enabled=!0}))}},"singleton"),Class(function(){function e(){o=new THREE.Object3D,l.object3D.add(o),o.position.y=-500,o.wiggle=l.initClass(WiggleBehavior,o.position),o.wiggle.scale=1,o.wiggle.speed=.5,n=l.initClass(EarthSnow),o.add(n.mesh),i=l.initClass(EarthIce),o.add(i.mesh),r=l.initClass(EarthSoil),o.add(r.mesh),a=l.initClass(EarthRock),o.add(a.mesh),s=l.initClass(EarthClouds),l.object3D.add(s.mesh),s.wiggle=l.initClass(WiggleBehavior,s.position),s.wiggle.scale=1,s.wiggle.speed=.5,c=l.initClass(EarthFlakes),l.object3D.add(c.mesh),u=l.initClass(EarthElements),o.add(u.object3D)}function t(e){s.wiggle.update(),Hardware.VR||(o.position.y=-500+100*Math.sin(75e-5*e))}Inherit(this,Component);var n,i,r,a,s,o,u,c,l=this;this.object3D=new THREE.Object3D,function(){e(),Render.start(t)}()}),Class(function(){function e(){o=m.container,o.size("100%").setZ(3),Stage.add(o),u=o.create("wrapper"),u.size(550,Stage.height).center(1,0).setZ(2)}function t(){c=m.initClass(IntroBG),l=m.initClass(IntroLogo,[u]),h=m.initClass(IntroSpinner,[u]),d=m.initClass(IntroCopy,[u]),f=m.initClass(IntroYear,[u]),p=m.initClass(IntroAT,[u]),m.delayedCall(n,Device.mobile?1200:0),a(),s(),defer(i)}function n(){AssetUtil.exclude("share");var e=Render.TIME;v=m.initClass(AssetLoader,AssetUtil.loadAssets("")),v.events.add(HydraEvents.COMPLETE,function(){Scene.instance(),m.events.subscribe(NeveEvents.READY,function(){var t=Render.TIME-e,n=Math.max(3e3-t,0);m.delayedCall(function(){m.delayedCall(r,1e3),Camera.instance().animateIn(),Sound.start()},n)})})}function i(){c.animateIn(),m.delayedCall(l.animateIn,500),m.delayedCall(h.animateIn,1500),m.delayedCall(d.animateIn,1200),m.delayedCall(f.animateIn,500),m.delayedCall(p.animateIn,500)}function r(){f.animateOut(),p.animateOut(),h.animateOut(),m.delayedCall(l.animateOut,300),m.delayedCall(d.animateOut,300),m.delayedCall(c.animateOut,800),m.delayedCall(function(){u.hide()},1200),m.delayedCall(function(){m.events.fire(HydraEvents.COMPLETE)},3e3)}function a(){m.events.subscribe(HydraEvents.RESIZE,s)}function s(){Mobile.phone?Stage.width>600&&Stage.width>Stage.height?(u.size(600,Stage.height).center(1,0),l.css({left:0,top:Stage.height/2-50}),h.css({top:Stage.height/2+100,left:0}),d.css({top:60,right:0,left:""}),p.css({left:""}),l.untuck()):(u.size(Stage.width,Stage.height).center(1,0),l.tuck(),l.css({left:Stage.width/2-115,top:100}),d.css({top:Stage.height/2-30,right:"",left:Stage.width/2-147.5}),p.css({left:10}),h.css({top:Stage.height-80,left:Stage.width/2-20})):(u.size(600,Stage.height).center(1,0),l.css({top:Stage.height/2-50}),h.css({top:Stage.height/2+200}),d.css({top:Stage.height/2-160,right:0})),f.css({top:25}),p.css({top:25})}Inherit(this,Controller);var o,u,c,l,h,d,f,p,v,m=this;!function(){e(),FontLoader.loadFonts(["Mont","Playfair"]),AssetLoader.loadAssets(AssetUtil.loadAssets("/ui/"),t)}(),Dev.expose("out",r)}),Class(function(){function e(){s=d.container,s.size("100%"),Stage.add(s)}function t(){o=new THREE.Scene,c=new THREE.PerspectiveCamera(40,Stage.width/Stage.height,10,9e4),u=new THREE.WebGLRenderer({antialias:!1}),u.setPixelRatio(2),u.setSize(Stage.width,Stage.height),d.scene=o,Global.PLAYGROUND_SCENE=o,u.setClearColor(1776411),c.position.z=2e3,h=new THREE.TrackballControls(c),s.add(u.domElement)}function n(){var e=Hydra.HASH.split("/")[1].split("?")[0],t=e;if(!e)throw"No view for Playground found on Hash";if(!window[t])throw"No Playground class "+t+" found.";l=d.initClass(window[t],c),o.add(l.object3D)}function i(){h.update(),u.render(o,c)}function r(){d.events.subscribe(HydraEvents.RESIZE,a)}function a(){u.setSize(Stage.width,Stage.height),c.custom||(c.aspect=Stage.width/Stage.height,c.updateProjectionMatrix())}Inherit(this,Controller);var s,o,u,c,l,h,d=this;!function(){Global.PLAYGROUND=!0,e(),t(),n(),r(),Render.start(i)}(),this.setScene=function(e,t){o=e,c=t},this.setCamera=function(e){c=e,c.custom=!0},this.removeRenderer=function(){s.remove(),Render.stop(i)}},"singleton"),Class(function(){function e(){l=E.container,l.size("100%"),Stage.add(l),l.hide()}function t(){h=new THREE.Scene,f=new THREE.WebGLRenderer({antialias:!1}),f.setPixelRatio(1),f.setSize(Stage.width,Stage.height),f.setClearColor(1118481),E.renderer=f,E.scene=h,Hydra.HASH.strpos("debugCam")?(d=new THREE.PerspectiveCamera(40,Stage.width/Stage.height,10,9e4),d.position.z=2e3,d.controls=new THREE.TrackballControls(d)):d=Camera.instance().worldCamera,l.add(f.domElement)}function n(){y=E.initClass(Nuke,Stage,{renderer:f,camera:d,scene:h});var e=E.initClass(NukePass,"RGB");y.add(e),m=E.initClass(TiltShiftPass,y),(Hardware.VR||Hardware.NO_FX)&&(y.enabled=!1),Hardware.CARDBOARD&&(g=new THREE.StereoEffect(f),g.eyeSeparation=1,g.setSize(Stage.width,Stage.height)),Hardware.OCULUS&&(w={},w.controls=new THREE.VRControls(d),w.effect=new THREE.VREffect(f),w.effect.setSize(Stage.width,Stage.height),Stage.bind("click",function(){w.effect.setFullScreen(!0)}))}function i(){C.enabled=!0,E.delayedCall(function(){C.enabled=!1,"iOS"==Mobile.os?(C.median>=4&&(y.enabled=!1),C.median>14&&(Hardware.NO_INTERACTION=!0)):Device.mobile?y.enabled=!1:(Hardware.NO_FX&&(y.enabled=!1),Stage.width>1600&&(y.enabled=!1),C.median>3&&(y.enabled=!1)),T=1,E.events.fire(NeveEvents.READY),l.show(),E.delayedCall(b.animateIn,3500),E.delayedCall(_.animateIn,3500)},500)}function r(){p=E.initClass(Sky),h.add(p.object3D),v=E.initClass(Earth),h.add(v.object3D)}function a(){b=E.initClass(IntroAT),b.css({left:25,top:20}),Hardware.VR&&b.element.hide(),_=E.initClass(MainButtons)}function s(e,t,n){!Device.mobile&&Render.FPS<20&&T&&y.enabled&&400>n&&(T++,T>3&&(y.enabled=!1)),C.time(),d.controls&&d.controls.update(),g?g.render(h,d):w?(w.controls.update(),w.effect.render(h,d)):y.render(),C.time()}function o(e,t){e.material&&!e.material.forceVisible&&(e.visible=t);for(var n=0;n<e.children.length;n++){var i=e.children[n];i.children&&o(i,t),i.material&&!i.material.forceVisible&&(i.visible=t)}}function u(){E.events.subscribe(HydraEvents.RESIZE,c)}function c(){f.setSize(Stage.width,Stage.height),g&&g.setSize(Stage.width,Stage.height),w&&w.effect.setSize(Stage.width,Stage.height)}Inherit(this,Controller);var l,h,d,f,p,v,m,y,g,w,b,_,E=this,T=!1,C=new RenderPerformance;!function(){"Android"!=Mobile.os||navigator.standalone||Mobile.fullscreen(),e(),t(),n(),r(),a(),u(),Render.start(s),C.enabled=!1,E.delayedCall(i,500)}(),this.visibility=function(e){o(h,e)}},"singleton"),Class(function(){function e(){var e=2e3;c.copyFrom(h.position),c.normalize();var t=.4*Stage.width,n=.2*Stage.height;o.x=c.z*Utils.range(Mouse.x,t,Stage.width-t,-e,e,!0),o.z=-c.x*Utils.range(Mouse.x,t,Stage.width-t,-e,e,!0),o.y=-Utils.range(Mouse.y,n,Stage.height-n,-e,e,!0),u.sub(o),l.lerp(o,Utils.range(u.lengthSq(),0,1e3,.3,.1,!0)),u.copyFrom(o)}function t(){i||(i=r.initClass(WiggleBehavior,l),i.scale=10),i.update()}function n(){s.copyFrom(h.position),s.y-=1050,Device.mobile?t():e(),s.add(l),a.lerp(s,.3),r.position.copy(a).multiplyScalar(10),r.position.y+=r.addZ}Inherit(this,Component);var i,r=this,a=new Vector3,s=new Vector3,o=new Vector3,u=new Vector3,c=new Vector3,l=new Vector3,h=Camera.instance().worldCamera;this.position=new THREE.Vector3,this.addZ=0,function(){Render.start(n)}()},"singleton"),Class(function(){function e(){t=r.initClass(SkyAurora),r.object3D.add(t.mesh),n=r.initClass(SkyDome),r.object3D.add(n.mesh),i=r.initClass(SkyStars),r.object3D.add(i.mesh)}Inherit(this,Component);var t,n,i,r=this;this.object3D=new THREE.Object3D,function(){e()}()}),Class(function(){function e(){r=a.element,r.size(400,55).css({opacity:0}),Device.mobile?r.css({right:15,top:10}):r.css({right:25,bottom:15})}function t(){var e=[];Mobile.phone&&(Hardware.CARDBOARD||e.push({type:"cardboard"})),Device.mobile||(e.push({type:"sound",canDisable:!0}),navigator.getVRDevices&&!Hardware.OCULUS&&e.push({type:"vr"})),Device.mobile&&navigator.standalone||n(e)}function n(e){return e.length?(e.forEach(function(e,t){var n=a.initClass(UIButton,e.type,e.canDisable);n.events.add(HydraEvents.CLICK,i),n.css({right:60*t})}),void r.size(60*e.length,55)):r.hide()}function i(e){switch(e.type){case"sound":Sound.toggleMute();break;case"cardboard":getURL(window.location.href+"?cardboard","_self");break;case"vr":getURL(window.location.href+"?webvr","_self")}}Inherit(this,View);var r,a=this;!function(){e(),t()}(),this.animateIn=function(){r.tween({opacity:.8},1e3,"easeInOutSine")}}),Class(function(e,t){function n(){a=o.element,a.size(57,57),s=a.create("icon"),s.size(57,57).bg("assets/images/ui/"+e+".png"),a.interact(i,r)}function i(e){"over"==e.action?a.tween({opacity:.8,scale:.95},300,"easeOutCubic"):a.tween({opacity:1,scale:1},300,"easeOutCubic")}function r(){o.events.fire(HydraEvents.CLICK,{type:e},!0),t&&(o.disabled?(o.disabled=!1,s.tween({opacity:1},500,"easeOutSine")):(s.tween({opacity:.2},500,"easeOutSine"),o.disabled=!0))}Inherit(this,View);var a,s,o=this;this.disabled=!1,this.type=e,function(){n()}()}),Class(function(e,t){function n(){u.alpha&&(o.gyro||(o.gyro=new Vector3),o.gyro.x=Utils.range(u.alpha,-10,10,.5*-l*d,.5*l*d),o.gyro.y=Utils.range(u.beta,-10,10,.5*-h*d,.5*h*d),o.gyro.z=Camera.instance().zDistance,o.lerp(o.gyro,.02),o.y+=50)}function i(){Device.mobile||Stage.bind("touchmove",r)}function r(e){o.x=Utils.range(Mouse.x,0,Stage.width,-l,l),o.y=Utils.range(Mouse.y,0,Stage.height,-h,h)+2e3}Inherit(this,Component);var a=new THREE.Vector3,s=new Vector3,o=new Vector3(0,0,5e3),u=(new Vector3,Mobile.Accelerometer),c=!0,l=1e3,h=1e3,d=100;!function(){u.capture(),i(),defer(function(){o.z=Camera.instance().zDistance})}(),this.update=function(){Device.mobile&&n(),o.z=Camera.instance().zDistance,s.interp(o,.02,"easeOutQuart",2e4),s.lerp(o,.07),e.position.copy(s),e.lookAt(a);var i=Camera.instance().zMove;t.position.z=i},this.set("enabled",function(e){c=e}),this.get("enabled",function(){return c})}),Class(function(e,t){function n(){o=d.initClass(Interaction.Input,__window),o.onStart=r,o.onUpdate=a,o.onEnd=s}function i(){w&&(u||(u=Camera.instance()),p.lerp(m,.07),v.lerp(p,.7),e.matrixWorld.makeRotationY(Utils.toRadians(v.y)),t.rotation.x=Utils.toRadians(v.x),u.zMove+=(y-u.zMove)*g)}function r(e){Device.mobile&&(Global.TOUCHING_SNOW||e.touches&&e.touches.length>1)||(l=!0,m.y=p.y,f.y=p.y,f.x=p.x,g=.07)}function a(e,t){return t.touches&&t.touches.length>1?l=!1:void(!l||Device.mobile&&Global.TOUCHING_SNOW||(Global.DRAGGING=!0,p.y=f.y+-e.x/Stage.width*b,p.x=f.x+-e.y/Stage.height*(b*_),m.y=p.y,m.x=p.x,c=e,y=.1*Utils.range(Math.abs(o.velocity.x),0,7,0,.75*Camera.instance().zOrigin),Camera.instance().available&&h&&h.stop&&(h=h.stop())))}function s(e){if(l&&!Global.TOUCHING_SNOW){var t=200*-o.velocity.x/Stage.width*b;c&&c.length()>8&&(m.y=p.y+t),m.x=0,y=0,g=.02,l=!1,Global.DRAGGING=!1,c&&c.clear()}}Inherit(this,Component);var o,u,c,l,h,d=this,f=new Vector3,p=new Vector3,v=new Vector3,m=new Vector3,y=0,g=.07,w=!0,b=180,_=function(){return Mobile.tablet?.2:Mobile.phone?.25:.15}();!function(){Mouse.x=Stage.width/2,Mouse.y=Stage.height/2,defer(n)}(),this.animateIn=function(){m.y=100,h=TweenManager.tween(m,{y:0},5e3,"easeInOutSine")},this.update=function(){i()},this.set("enabled",function(e){w=e}),this.get("enabled",function(){return w})}),Class(function(){function e(){r=u.initClass(ParticlePhysics),r.skipIntegration=!0,r.addBehavior(new EarthCloudsBehavior)}function t(){a=new THREE.BufferGeometry;for(var e=new Float32Array(3*c),t=new Float32Array(c),n=new Float32Array(c),i=new Float32Array(c),o=0;c>o;o++){var u=Utils.doRandom(-1200,1200),l=Utils.doRandom(-200,200),h=Utils.doRandom(-1e3,1e3),d=new Particle(new Vector3(u,l,h));d.active=!Utils.doRandom(0,1),d.origin=(new Vector3).copy(d.pos),r.addParticle(d),e[3*o+0]=u,e[3*o+1]=l,e[3*o+2]=h,n[o]=Utils.toRadians(Utils.doRandom(0,360)),t[o]=Utils.doRandom(80,160)/100,i[o]=Utils.doRandom(30,100)/100}s=new THREE.BufferAttribute(e,3),a.addAttribute("position",s),a.addAttribute("scale",new THREE.BufferAttribute(t,1)),a.addAttribute("rotation",new THREE.BufferAttribute(n,1)),a.addAttribute("opacity",new THREE.BufferAttribute(i,1))}function n(){var e=new Shader("Clouds","Clouds");e.uniforms={size:{type:"f",value:700},diffuse:{type:"c",value:new THREE.Color(6388375)},tCloud:{type:"t",value:Utils3D.getTexture("assets/images/storm/cloud.png")},tColor:{type:"t",value:null},alpha:{type:"f",value:.7}},e.material.transparent=!0,e.material.depthWrite=!1,e.material.depthTest=!1,e.material.blending=THREE.AdditiveBlending,defer(function(){e.uniforms.tColor.value=EarthSnow.COLOR_MAP}),u.mesh=new THREE.Points(a,e.material),u.mesh.position.y=1e3,o=e}function i(){if(r.update(),Hardware.VR&&(o.set("alpha",.7*Utils.range(Camera.instance().vrRadius,0,1,1,.7)),Hardware.CARDBOARD&&o.set("size",700*Utils.range(Camera.instance().vrRadius,0,1,1,.5))),Device.mobile){var e=.7*Utils.range(Camera.instance().zoom||0,1,.6,.5,1,!0);o.uniforms.alpha.value+=.07*(e-o.uniforms.alpha.value)}for(var t=0,n=r.particles.start();n;)s.setXYZ(t,n.pos.x,n.pos.y,n.pos.z),t++,n=r.particles.next();s.needsUpdate=!0}Inherit(this,Component);var r,a,s,o,u=this,c=Device.mobile?50:150;!function(){e(),t(),n(),Render.start(i)}()}),Class(function(){function e(e){e.speed=3*(Utils.doRandom(80,120)/100)}Inherit(this,Component);var t=new Vector3;Math.pow(600,2);this.applyBehavior=function(n){if(n.speed||e(n),n.pos.z+=n.speed,n.active&&Global.INTERACTION){t.subVectors(n.pos,Global.INTERACTION);var i=t.heading2D();n.pos.tx=n.origin.x-300*Math.cos(i),n.pos.ty=n.origin.y-300*Math.sin(i),n.pos.y+=.018*(n.pos.ty-n.pos.y),n.pos.x+=.018*(n.pos.tx-n.pos.x)}n.pos.z>1400&&(n.pos.z-=2400)}}),Class(function(){function e(){t=i.initClass(ElementsHut),i.object3D.add(t.mesh),n=i.initClass(ElementsTree),i.object3D.add(n.mesh)}Inherit(this,Component);var t,n,i=this;this.object3D=new THREE.Object3D,function(){e()}()}),Class(function(){function e(){var e=Utils3D.loadGeometry("hut"),i=new Shader("Hut","Hut");i.uniforms={tDiffuse:{type:"t",value:Utils3D.getTexture("assets/images/textures/hut.jpg")},tColor:{type:"t",value:null},diffuse:{type:"c",value:new THREE.Color(3494774)}},t=new THREE.Mesh(e,i.material),e.applyMatrix((new THREE.Matrix4).makeScale(120,120,120)),e.applyMatrix((new THREE.Matrix4).makeRotationX(Utils.toRadians(-90))),t.position.y=300,t.position.x=-600,t.position.x=-600,Dev.expose("pos",t.position),t.rotation.y=Utils.toRadians(20),n.mesh=t,defer(function(){i.uniforms.tColor.value=EarthSnow.COLOR_MAP})}Inherit(this,Component);var t,n=this;!function(){e()}()}),Class(function(){function e(){var e=Utils3D.loadGeometry("tree"),n=(new THREE.BufferGeometry,new Shader("Hut","Hut"));n.uniforms={tDiffuse:{type:"t",value:Utils3D.getTexture("assets/images/textures/leaf.png")},tColor:{type:"t",value:null},diffuse:{type:"c",value:new THREE.Color(3494774)}},n.material.transparent=!0,n.material.side=THREE.DoubleSide;var i=new THREE.Mesh(e,n.material);i.position.y=50,i.position.x=-600,i.position.z=-500,i.scale.set(2,1.4,1.7),t.mesh.add(i),Device.mobile||(i=new THREE.Mesh(e,n.material),i.position.y=30,i.position.x=-300,i.position.z=-700,i.scale.set(1.4,1.4,1.4),t.mesh.add(i)),defer(function(){n.uniforms.tColor.value=EarthSnow.COLOR_MAP})}Inherit(this,Component);var t=this;this.mesh=new THREE.Object3D,function(){e()}()}),Class(function(){function e(){o=new THREE.BufferGeometry;for(var e=new Float32Array(3*p),t=new Float32Array(p),n=new Float32Array(p),i=0;p>i;i++)e[3*i+0]=Utils.doRandom(-1e3,1e3),e[3*i+1]=Utils.doRandom(-1e3,1e3),e[3*i+2]=Utils.doRandom(-1e3,1e3),t[i]=Utils.doRandom(50,150)/100,n[i]=1;o.addAttribute("position",new THREE.BufferAttribute(e,3)),o.addAttribute("scale",new THREE.BufferAttribute(t,1)),o.addAttribute("alpha",new THREE.BufferAttribute(n,1))}function t(){var e=new Shader("Flakes","Flakes"),t=Mobile.phone?10:15;Hardware.VR&&(t*=.2),d=t,e.uniforms={size:{type:"f",value:t},tMap:{type:"t",value:Utils3D.getTexture("assets/images/flakes/particle.png")},tColor:{type:"t",value:null}},e.material.transparent=!0,e.material.depthWrite=!1,e.material.blending=THREE.AdditiveBlending,defer(function(){e.uniforms.tColor.value=EarthSnow.COLOR_MAP}),f.mesh=new THREE.Points(o,e.material),h=e}function n(){u=f.initClass(Thread,SnowFlakeThread),u.importClass(Vector3,EulerIntegrator,ParticlePhysics,LinkedList,Particle,ParticleConverter,ObjectPool,Vector2,Force,SnowFlakeBehavior,FlakeRepulsor),u.init({count:p}),u.on("transfer",s)}function i(){l=f.initClass(EarthFlakesInteraction,u,f.mesh)}function r(e,t){c||(c={transfer:!0,msg:{buffers:[]}}),c.msg.name=t,c.msg.array=e,c.msg.buffers.length=0,c.msg.buffers.push(e.buffer),u.recycleBuffer(c)}function a(){h.set("size",d*Utils.range(Camera.instance().vrRadius,0,1,1,1.8))}function s(e){for(var t in e){var n=e[t];n instanceof Float32Array&&(o.attributes[t].array=n,o.attributes[t].needsUpdate=!0,r(n,t))}}Inherit(this,Component);var o,u,c,l,h,d,f=this,p=function(){return"Android"==Mobile.os?100:Device.mobile?500:1e3}();!function(){e(),t(),n(),i(),Hardware.VR&&Render.start(a)}()}),Class(function(e,t){function n(){var e=new THREE.PlaneGeometry(3e3,3e3),n=new THREE.MeshNormalMaterial({wireframe:!0,visible:!1,side:THREE.DoubleSide}),i=new THREE.Mesh(e,n);t.add(i),s.push(i)}function i(){a=new Raycaster(Camera.instance().worldCamera)}function r(){s[0].quaternion.copy(Camera.instance().worldCamera.quaternion);var t=a.checkHit(s)[0];t&&(o.x=t.point.x,o.y=t.point.y,o.z=t.point.z,Global.INTERACTION=o,e.sendPoint(o))}Inherit(this,Component);var a,s=[],o={};!function(){n(),i(),Hardware.VR||Render.start(r)}()}),Class(function(e,t,n){function i(){var t="undefined"!=typeof e.z?Vector3:Vector2;r=new t}Inherit(this,Component);var r;n=n||100,t=t||1e3;var a=t*t;this.target=e,function(){i()}(),this.get("strength",function(){return n}),this.set("strength",function(e){n=e}),this.get("radius",function(){return t}),this.set("radius",function(e){t=e,a=e*e}),this.applyBehavior=function(t,i){if(!t.fixed){r.copyFrom(e).sub(t.pos);var s=r.lengthSq();a>s&&s>1e-6&&(r.normalize().multiply(1-s/a),t.pos.add(r.multiply(100*n)),t.vel.add(r.multiply(.1*-n)),t.moved=!0)}}}),Class(function(e){function t(t){t.pool=new ObjectPool;for(var n=0;3>n;n++)t.pool.put(new Float32Array(e.length*t.size))}function n(e){for(var t=0;t<i.length;t++){var n=i[t];if(n.name==e)return n}}Inherit(this,Component);
var i=[],r={};this.addAttribute=function(e,t,n){i.push({name:e,size:t,params:n})},this.exec=function(){for(var n=0;n<i.length;n++){var a=i[n];a.pool||t(a);for(var s=a.pool.get()||new Float32Array(e.length*a.size),o=e.start(),u=0;o;){for(var c=0;c<a.size;c++)s[u*a.size+c]=o[a.params[c]]||o.pos[a.params[c]];u++,o=e.next()}r[a.name]=s}return r},this.recycle=function(e){n(e.name).pool.put(e.array)}}),Class(function(){function e(e,t){e.s=!0,e.vel.x=Utils.doRandom(-100,100)/100,e.vel.y=Utils.doRandom(0,100)/100,e.vel.z=Utils.doRandom(-100,100)/100,e.alpha=1,e.decay=Utils.doRandom(14,22)/1e4,t&&(e.pos.x=Utils.doRandom(-800,800),e.pos.y=900,e.pos.z=Utils.doRandom(-800,800))}Inherit(this,Component);this.applyBehavior=function(t){t.s||e(t),t.vel.x+=.014*Math.sin(.0025*Global.TIME),t.vel.z+=.01*Math.cos(.0055*Global.TIME),t.alpha-=t.decay,(t.pos.y<-600||t.moved&&t.alpha<=0)&&e(t,!0),t.pos.y-=3}}),Class(function(){function e(e){i=s.initClass(ParticlePhysics),i.addBehavior(new SnowFlakeBehavior),a=new FlakeRepulsor(new Vector3(-9999,0,0),700,-.4),i.addBehavior(a);for(var t=0;e>t;t++){var n=new Particle(new Vector3,Utils.doRandom(50,100)/100);n.pos.x=Utils.doRandom(-800,800),n.pos.y=Utils.doRandom(-800,800),n.pos.z=Utils.doRandom(-800,800),n.alpha=.5,i.addParticle(n)}}function t(){r=s.initClass(ParticleConverter,i.particles),r.addAttribute("position",3,["x","y","z"]),r.addAttribute("alpha",1,["alpha"]),s.recycleBuffer=r.recycle}function n(){Global.TIME=Date.now(),i.update();var e=r.exec();u.length=0;for(var t in e)o[t]=e[t],u.push(o[t].buffer);emit("transfer",o,u)}Inherit(this,Component);var i,r,a,s=this,o={},u=[];this.init=function(i){e(i.count),t(),setInterval(n,1e3/60)},this.sendPoint=function(e){a.target.copyFrom(e)}}),Class(function(){function e(){var e=new THREE.BoxGeometry(2e3,150,2e3),n=new Shader("Ice","Ice");n.uniforms={tCube:{type:"t",value:Utils3D.getCubemap("assets/images/snow/reflect.jpg")},tNormal:{type:"t",value:Utils3D.getTexture("assets/images/ice/normal.jpg")},tDepth:{type:"t",value:Utils3D.getTexture("assets/images/ice/depth.jpg")},tColor:{type:"t",value:null},diffuse:{type:"c",value:new THREE.Color(1193049)},specular:{type:"c",value:new THREE.Color(16777215)}},n.material.anisotropy=7;var i=new THREE.MeshBasicMaterial;i.visible=!1;var r=[n.material,n.material,i,i,n.material,n.material];t.mesh=new THREE.Mesh(e,new THREE.MeshFaceMaterial(r)),t.mesh.position.y=-75,defer(function(){n.uniforms.tColor.value=EarthSnow.COLOR_MAP})}Inherit(this,Component);var t=this;!function(){e()}()}),Class(function(){function e(){var e=new THREE.BoxGeometry(2e3,600,2e3,10,10,10),n=new Shader("Rock","Rock");n.uniforms={tDiffuse0:{type:"t",value:Utils3D.getTexture("assets/images/soil/diffuse0.jpg")},tDiffuse1:{type:"t",value:Utils3D.getTexture("assets/images/soil/diffuse1.jpg")},tNoise:{type:"t",value:Utils3D.getTexture("assets/images/soil/noise0.jpg")},tNormal:{type:"t",value:Utils3D.getTexture("assets/images/rock/normal.jpg")},tColor:{type:"t",value:null},diffuse:{type:"c",value:new THREE.Color(6784681)},specular:{type:"c",value:new THREE.Color(12308195)},worldLight:{type:"v3",value:WorldLight.instance().position}},n.material.anisotropy=7;var i=new THREE.MeshBasicMaterial;i.visible=!1;var r=[n.material,n.material,i,i,n.material,n.material];t.mesh=new THREE.Mesh(e,new THREE.MeshFaceMaterial(r)),t.mesh.position.y=-700,defer(function(){n.uniforms.tColor.value=EarthSnow.COLOR_MAP})}Inherit(this,Component);var t=this;!function(){e()}()}),Class(function v(){function e(){i=new THREE.PlaneGeometry(2e3,2e3,30,30),i.applyMatrix((new THREE.Matrix4).makeRotationX(Utils.toRadians(-90)));var e=NeveUtil.getRepeatTexture("assets/images/snow/normal.jpg"),t=NeveUtil.getRepeatTexture("assets/images/snow/noise.jpg"),n=NeveUtil.getRepeatTexture("assets/images/snow/diffuse.jpg"),a=Device.mobile?"SnowSimple":"Snow";Hardware.CARDBOARD&&(a="SnowCardboard"),Hardware.OCULUS&&(a="SnowOculus"),r=new Shader(a,a),r.uniforms={tNormal:{type:"t",value:e},tNoise:{type:"t",value:t},tDiffuse:{type:"t",value:n},tCube:{type:"t",value:Utils3D.getCubemap("assets/images/snow/reflect.jpg")},tDeform:{type:"t",value:null},tColor:{type:"t",value:null},uvOffset:{type:"v2",value:new Vector2},emissive:{type:"c",value:new THREE.Color(5598852)}},o.mesh=new THREE.Mesh(i,r.material)}function t(){a=o.initClass(EarthSnowSkyRenderer),s=o.initClass(EarthSnowInteraction,o.mesh),o.mesh.add(s.mesh),r.uniforms.tDeform.value=s.texture}function n(){if(a.render(),u+=3,!Hardware.VR||6>u){for(var e=0;e<i.vertices.length;e++){var t=i.vertices[e];t.o||(t.o=(new THREE.Vector3).copy(t)),t.y=300*Utils.range(Noise.simplex3(.0012*t.o.x,.0012*t.o.y,.0012*(t.o.z-u)),-1,1,0,1),(1e3==Math.abs(t.o.x)||1e3==Math.abs(t.o.z))&&(t.y=t.o.y)}r.uniforms.uvOffset.value.y+=.002,i.verticesNeedUpdate=!0,i.normalsNeedUpdate=!0,i.computeFaceNormals(),i.computeVertexNormals()}r.uniforms.tColor.value=a.baseTexture,v.COLOR_MAP=a.baseTexture,s.update()}Inherit(this,Component);var i,r,a,s,o=this,u=0;!function(){Noise.seed(Utils.doRandom(0,1e4)/1e4),e(),t(),Render.start(n)}()}),Class(function(e){function t(){Device.mobile?64:512;o=f.initClass(Canvas,64,64),u=o.context,l=f.initClass(Canvas,o.width,o.height),h=f.initClass(Canvas,o.width,o.height),u.fillRect(0,0,o.width,o.height),l.context.fillRect(0,0,o.width,o.height),h.context.fillRect(0,0,o.width,o.height),c=new Image,c.crossOrigin="",c.src=Config.CDN+"assets/images/snow/stamp.png"+Config.SALT,c.s=22,c.hs=c.s/2,f.texture=new THREE.Texture(o.div),f.texture.minFilter=f.texture.magFilter=THREE.LinearFilter}function n(){s=new THREE.Mesh(new THREE.PlaneGeometry(2e3,2e3),new THREE.MeshNormalMaterial),f.mesh=s,s.material.visible=!1,s.geometry.applyMatrix((new THREE.Matrix4).makeRotationX(Utils.toRadians(-90))),d=Device.mobile?s:e}function i(){a=f.initClass(Raycaster,Camera.instance().worldCamera)}function r(e){Mouse.x=999999}Inherit(this,Component);var a,s,o,u,c,l,h,d,f=this;!function(){t(),n(),i(),Device.mobile&&Stage.bind("touchend",r)}(),this.update=function(){if(!(Hardware.VR||Hardware.NO_INTERACTION||Device.mobile&&Global.DRAGGING)){Device.mobile||(l.context.globalAlpha=.05,l.context.fillRect(0,0,o.width,o.height),l.context.globalAlpha=1);var e=a.checkHit(d)[0];if(e){var t=e.uv.x*o.width,n=(1-e.uv.y)*o.height;l.context.drawImage(c,t-c.hs,n-c.hs,c.s,c.s),f.texture.needsUpdate=!0,Sound.startSnow(),Device.mobile&&(Global.TOUCHING_SNOW=!0,l.context.globalAlpha=.05,l.context.fillRect(0,0,o.width,o.height),l.context.globalAlpha=1,u.drawImage(l.context.canvas,0,0),h.context.fillRect(0,0,o.width,o.height),h.context.drawImage(l.context.canvas,0,.2),l.context.drawImage(h.context.canvas,0,0))}else Global.TOUCHING_SNOW&&(f.texture.needsUpdate=!0),Global.TOUCHING_SNOW=!1,Sound.stopSnow();Device.mobile||(u.drawImage(l.context.canvas,0,0),h.context.fillRect(0,0,o.width,o.height),h.context.drawImage(l.context.canvas,0,.2),l.context.drawImage(h.context.canvas,0,0),f.texture.needsUpdate=!0)}}}),Class(function(){function e(){var e=Device.mobile?512:1024;r=Utils3D.createRT(e,e),a.baseTexture=r}function t(){i=new THREE.PerspectiveCamera(60,1,10,1e5),i.rotation.x=Utils.toRadians(-45)}Inherit(this,Component);var n,i,r,a=this;!function(){e(),t()}(),this.render=function(){n||(n=Scene.instance().renderer),SkyAurora.bright(),Scene.instance().visibility(!1),n.render(Scene.instance().scene,i,r,!0),Scene.instance().visibility(!0),SkyAurora.dim()}}),Class(function(){function e(){var e=new THREE.BoxGeometry(2e3,400,2e3,10,10,10),n=new Shader("Soil","Soil");n.uniforms={tDiffuse0:{type:"t",value:Utils3D.getTexture("assets/images/soil/diffuse0.jpg")},tDiffuse1:{type:"t",value:Utils3D.getTexture("assets/images/soil/diffuse1.jpg")},tNoise:{type:"t",value:Utils3D.getTexture("assets/images/soil/noise0.jpg")},tNormal:{type:"t",value:Utils3D.getTexture("assets/images/soil/normal.jpg")},diffuse:{type:"c",value:new THREE.Color(6583431)},tColor:{type:"t",value:Utils3D.getTexture("assets/images/rock/normal.jpg")},worldLight:{type:"v3",value:WorldLight.instance().position},variation:{type:"f",value:250}},n.material.anisotropy=7;var i=new THREE.MeshBasicMaterial;i.visible=!1;var r=[n.material,n.material,i,i,n.material,n.material];t.mesh=new THREE.Mesh(e,new THREE.MeshFaceMaterial(r)),t.mesh.position.y=-300,defer(function(){n.uniforms.tColor.value=EarthSnow.COLOR_MAP})}Inherit(this,Component);var t=this;!function(){e()}()}),Class(function(){function e(){t=r.element,t.size(65,10).invisible(),t.transform({rotation:-90,x:3,y:65}).transformPoint(0,5),n=t.create("text"),n.fontStyle("Playfair",10,"#fff").text("Active Theory"),i=SplitTextfield.split(n,"letter"),t.interact(null,function(){getURL("http://activetheory.net","_blank")})}Inherit(this,View);var t,n,i,r=this;!function(){e()}(),this.animateIn=function(){t.visible(),i.forEach(function(e,t){e.css({opacity:0});var n=TweenManager.interpolate(500,t/i.length,"linear");e.tween({opacity:1},2e3,"easeOutSine",n)})},this.animateOut=function(){i.forEach(function(e,t){var n=TweenManager.interpolate(500,t/i.length,"linear");e.tween({opacity:0},500,"easeOutSine",n)})}}),Class(function(){function e(){t=i.element,t.size("100%").bg("assets/images/ui/bg.jpg").css({opacity:0}),n=t.create("stars"),n.size("100%").bg("assets/images/ui/stars.png")}Inherit(this,View);var t,n,i=this;!function(){e()}(),this.animateIn=function(){t.tween({opacity:1},500,"easeOutSine")},this.animateOut=function(){t.tween({opacity:0},1e3,"easeInOutSine")}}),Class(function(){function e(){t=n.element,t.size(295,120),r.forEach(function(e){var n=t.create("line");n.fontStyle("Playfair",33,"#fff").text(e.text).css({left:e.x,top:e.y}),i=i.concat(SplitTextfield.split(n,"word"))}),i.forEach(function(e){e.transform({perspective:2e3,y:50,z:-40,rotationX:40}).css({opacity:0})})}Inherit(this,View);var t,n=this,i=[],r=[{text:"warmest winter",y:0,x:0},{text:"wishes from",y:35,x:109},{text:"Active Theory.",y:70,x:42}];!function(){e()}(),this.animateIn=function(){t.css({opacity:0}).tween({opacity:1},2e3,"easeOutSine"),i.forEach(function(e,t){var n=TweenManager.interpolate(500,t/i.length,"linear");e.tween({opacity:1,y:0,z:0,rotationX:0},1e3,"easeOutCubic",n)}),t.interact(null,function(){getURL("http://activetheory.net","_blank")})},this.animateOut=function(){t.tween({opacity:0},700,"easeOutSine"),i.forEach(function(e,t){var n=TweenManager.interpolate(200,t/i.length,"linear");e.tween({opacity:0,y:-25,z:-40,rotationX:-40},500,"easeInOutCubic",n)})}}),Class(function(){function e(){n=s.element,n.size(660,255).invisible(),i=n.create("logo"),i.size(280.5,76).bg("assets/images/ui/logo.png"),r=n.create("text"),r.size("100%",100).css({top:86,left:149}).fontStyle("Mont",10,"#707060").text(t()),a=SplitTextfield.split(r,"word"),a.forEach(function(e){e.css({opacity:0}).transform({y:12,perspective:2e3,rotationX:20})})}function t(){return Hardware.CARDBOARD?"Place device in Google cardboard.":Hardware.OCULUS?"Click anywhere to launch HMD mode.":Device.mobile?"Touch and drag to rotate, pinch to zoom.":"Click and drag to rotate, scroll to zoom."}Inherit(this,View);var n,i,r,a,s=this;!function(){e()}(),this.animateIn=function(){n.visible().css({opacity:0}),n.tween({opacity:1},2e3,"easeOutSine"),i.css({opacity:0}).transform({x:-20,perspective:2e3,z:-100,rotationY:0}).tween({opacity:1,x:0,z:0,rotationY:0},2e3,"easeOutCubic"),a.forEach(function(e,t){var n=TweenManager.interpolate(400,t/a.length,"linear");e.tween({opacity:1,y:1,rotationX:0},1e3,"easeOutCubic",n+1e3)})},this.animateOut=function(){i.tween({opacity:0},500,"easeOutCubic"),a.forEach(function(e,t){var n=TweenManager.interpolate(200,t/a.length,"linear");e.tween({opacity:0},500,"easeOutCubic",n)})},this.tuck=function(){r.css({left:50,top:65}),i.size(.8*i.width,.8*i.height)},this.untuck=function(){i.size(280.5,76),r.css({top:86,left:149})}}),Class(function(){function e(){t=r.element,t.size(40,40).invisible(),n=t.create("bg"),n.size(40,40).bg("assets/images/ui/loader-bg.png"),i=t.create("spinner"),i.size(40,40).bg("assets/images/ui/loader.png");var e=r.initClass(CSSAnimation);e.duration=1500,e.loop=!0,e.ease="linear",e.frames=[{rotation:0},{rotation:360}],e.applyTo(i),e.play()}Inherit(this,View);var t,n,i,r=this;!function(){e()}(),this.animateIn=function(){t.visible().transform({perspective:2e3,z:-1e3}).css({opacity:0}),t.tween({z:0,opacity:1},1e3,"easeOutCubic")},this.animateOut=function(){t.tween({z:-1e3,opacity:0},500,"easeOutCubic")}}),Class(function(){function e(){t=r.element,t.size(23,20).center(1,0).invisible(),n=t.create("text"),n.fontStyle("Mont",10,"#909079").text("2015"),i=SplitTextfield.split(n,"letter")}Inherit(this,View);var t,n,i,r=this;!function(){e()}(),this.animateIn=function(){t.visible(),i.forEach(function(e,t){e.transform({perspective:2e3,y:5,rotationX:20}).css({opacity:0});var n=TweenManager.interpolate(200,t/i.length,"easeOutQuad");e.tween({y:0,rotationX:0,opacity:1},500,"easeOutCubic",n)})},this.animateOut=function(){i.forEach(function(e,t){var n=TweenManager.interpolate(200,t/i.length,"easeOutQuad");e.tween({opacity:0},500,"easeOutCubic",n)})}}),Class(function(){function e(){var e=new THREE.SphereGeometry(5e4),n=new Shader("Aurora","Aurora");n.uniforms={time:{type:"f",value:0},hue:{type:"f",value:.5},base:{type:"c",value:new THREE.Color(331029)}},n.material.side=THREE.BackSide,Render.start(function(e,t){n.uniforms.hue.value+=2e-4,n.uniforms.hue.value>1&&(n.uniforms.hue.value-=1),n.set("time",15e-5*t)});var i=new THREE.Mesh(e,n.material);t.object3D.add(i)}Inherit(this,Component);var t=this;this.object3D=new THREE.Object3D,function(){e()}()}),Class(function(){function e(){}Inherit(this,Component);this.object3D=new THREE.Object3D,function(){e()}()}),Class(function(){function e(){var e=Utils3D.loadGeometry("hut"),n=new THREE.MeshBasicMaterial({map:Utils3D.getTexture("assets/images/textures/hut.jpg")}),i=new THREE.Mesh(e,n);e.applyMatrix((new THREE.Matrix4).makeScale(200,200,200)),e.applyMatrix((new THREE.Matrix4).makeRotationX(Utils.toRadians(-90))),t.object3D.add(i)}Inherit(this,Component);var t=this;this.object3D=new THREE.Object3D,function(){e()}()}),Class(function(e){function t(){i=r.initClass(TiltShiftShader),e.add(i.x),e.add(i.y),i.blur=25,i.gradientBlur=550}function n(){i.gradientBlur=Utils.range(Camera.instance().zDistance,2500,7e3,550,700),i.blur=Utils.range(Camera.instance().zDistance,2500,7e3,25,18)}Inherit(this,Component);var i,r=this;!function(){t(),Render.start(n)}()}),Class(function m(){function e(){var e=new THREE.SphereGeometry(2e4);n=new Shader("Aurora","Aurora"),n.uniforms={time:{type:"f",value:0},hue:{type:"f",value:.5},brightness:{type:"f",value:1},base:{type:"c",value:new THREE.Color(331029)}},n.material.side=THREE.BackSide,n.material.forceVisible=!0,m.MATERIAL=n.material,i.mesh=new THREE.Mesh(e,n.material),i.mesh.frustumCulled=!1}function t(e,t){n.uniforms.hue.value+=2e-4,n.uniforms.hue.value>1&&(n.uniforms.hue.value-=1),n.set("time",15e-5*t)}Inherit(this,Component);var n,i=this;!function(){e(),Render.start(t)}(),m.bright=function(){n.set("brightness",3)},m.dim=function(){n.set("brightness",1)}}),Class(function(){function e(){for(var e=[],t=["posx","negx","posy","negy","posz","negz"],n=0;n<t.length;n++)e.push("assets/images/dome/sky-"+t[n]+".jpg");i=Utils3D.getCubemap(e)}function t(){var e=new THREE.SphereGeometry(8e3,30,30);n=new Shader("Dome","Dome"),n.uniforms={tCube:{type:"t",value:i},tColor:{type:"t",value:null},alpha:{type:"f",value:Hardware.OCULUS?.2:.1}},n.material.transparent=!0,n.material.side=THREE.BackSide,n.material.blending=THREE.AdditiveBlending,r.mesh=new THREE.Mesh(e,n.material),defer(function(){n.uniforms.tColor.value=EarthSnow.COLOR_MAP})}Inherit(this,Component);var n,i,r=this;!function(){e(),t()}()}),Class(function(){function e(){i=new THREE.BufferGeometry;for(var e=new Vector3,t=new Matrix4,n=new Float32Array(3*a),r=new Float32Array(a),s=0;a>s;s++)e.set(1,0,0),t.identity().setRotation(0,Math.random()*Math.PI*2,Math.random()*Math.PI*2),t.transformVector(e),e.multiply(Utils.doRandom(2500,7500)),n[3*s+0]=e.x,n[3*s+1]=e.y,n[3*s+2]=e.z,r[s]=Utils.doRandom(50,150)/100;i.addAttribute("position",new THREE.BufferAttribute(n,3)),i.addAttribute("scale",new THREE.BufferAttribute(r,1))}function t(){var e=new Shader("Stars","Stars");e.uniforms={size:{type:"f",value:70},tFlare:{type:"t",value:Utils3D.getTexture("assets/images/stars/flare.jpg")},tCenter:{type:"t",value:Utils3D.getTexture("assets/images/stars/center.jpg")},tMap:{type:"t",value:Utils3D.getTexture("assets/images/stars/map.jpg")},resolution:{type:"v2",value:new Vector2(3e3,3e3)}},e.material.transparent=!0,e.material.depthWrite=!1,e.material.blending=THREE.AdditiveBlending,r.mesh=new THREE.Points(i,e.material)}function n(){r.mesh.rotation.y+=5e-4}Inherit(this,Component);var i,r=this,a=Device.mobile?100:350;!function(){e(),t(),Hardware.VR&&Render.start(n)}()}),Class(function(){function e(){AssetLoader.loadAllAssets(function(){Playground.instance()})}function t(){Utils3D.disableWarnings(),n=new Intro,n.events.add(HydraEvents.COMPLETE,function(){n=n.destroy()})}var n;!function(){__body.bg("#000"),Hydra.HASH.strpos("playground")?e():t()}()}),window._MINIFIED_=!0;