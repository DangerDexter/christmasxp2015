!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.hull=n()}}(function(){return function n(t,r,e){function o(u,f){if(!r[u]){if(!t[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var a=r[u]={exports:{}};t[u][0].call(a.exports,function(n){var r=t[u][1][n];return o(r?r:n)},a,a.exports,n,t,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(n,t,r){function e(n){var t=[];n.forEach(function(n){var r=this.point2CellXY(n),e=r[0],o=r[1];void 0===t[e]&&(t[e]=[]),void 0===t[e][o]&&(t[e][o]=[]),t[e][o].push(n)},this),this.cellPoints=function(n,r){return void 0!==t[n]&&void 0!==t[n][r]?t[n][r]:[]},this.removePoint=function(n){for(var r,e=this.point2CellXY(n),o=t[e[0]][e[1]],i=0;i<o.length;i++)if(o[i][0]===n[0]&&o[i][1]===n[1]){r=i;break}return o.splice(r,1),o}}function o(n){return new e(n)}e.prototype={point2CellXY:function(n){var t=parseInt(n[0]/e.CELL_SIZE),r=parseInt(n[1]/e.CELL_SIZE);return[t,r]},rangePoints:function(n){for(var t=this.point2CellXY([n[0],n[1]]),r=this.point2CellXY([n[2],n[3]]),e=[],o=t[0];o<=r[0];o++)for(var i=t[1];i<=r[1];i++)e=e.concat(this.cellPoints(o,i));return e},addBorder2Bbox:function(n,t){return[n[0]-t*e.CELL_SIZE,n[1]-t*e.CELL_SIZE,n[2]+t*e.CELL_SIZE,n[3]+t*e.CELL_SIZE]}},e.CELL_SIZE=10,t.exports=o},{}],2:[function(n,t,r){"use strict";function e(n,t){return void 0===t?n:n.map(function(n){var r=new Function("pt","return [pt"+t[0]+",pt"+t[1]+"];");return r(n)})}function o(n,t){return void 0===t?n:n.map(function(n){var r=new Function("pt","var o = {}; o"+t[0]+"= pt[0]; o"+t[1]+"= pt[1]; return o;");return r(n)})}function i(n){return n.sort(function(n,t){return n[0]==t[0]?n[1]-t[1]:n[0]-t[0]})}function u(n){for(var t=-(1/0),r=n.length-1;r>=0;r--)n[r][1]>t&&(t=n[r][1]);return t}function f(n){for(var t=[],r=0;r<n.length;r++){for(;t.length>=2&&l(t[t.length-2],t[t.length-1],n[r])<=0;)t.pop();t.push(n[r])}return t.pop(),t}function c(n){for(var t=n.reverse(),r=[],e=0;e<t.length;e++){for(;r.length>=2&&l(r[r.length-2],r[r.length-1],t[e])<=0;)r.pop();r.push(t[e])}return r.pop(),r}function l(n,t,r){return(t[0]-n[0])*(r[1]-n[1])-(t[1]-n[1])*(r[0]-n[0])}function a(n,t){return Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)}function p(n,t,r){var e=[t[0]-n[0],t[1]-n[1]],o=[r[0]-n[0],r[1]-n[1]],i=a(n,t),u=a(n,r),f=e[0]*o[0]+e[1]*o[1];return f/Math.sqrt(i*u)}function s(n,t){for(var r=0;r<t.length-1;r++){var e=[t[r],t[r+1]];if(!(n[0][0]===e[0][0]&&n[0][1]===e[0][1]||n[0][0]===e[1][0]&&n[0][1]===e[1][1])&&E(n,e))return!0}return!1}function h(n,t){var r,e,o,i;return n[0][0]<n[1][0]?(r=n[0][0]-t,e=n[1][0]+t):(r=n[1][0]-t,e=n[0][0]+t),n[0][1]<n[1][1]?(o=n[0][1]-t,i=n[1][1]+t):(o=n[1][1]-t,i=n[0][1]+t),[r,o,e,i]}function v(n,t,r){for(var e,o,i=null,u=w,f=w,c=0;c<t.length;c++)e=p(n[0],n[1],t[c]),o=p(n[1],n[0],t[c]),e>u&&o>f&&!s([n[0],t[c]],r)&&!s([n[1],t[c]],r)&&(u=e,f=o,i=t[c]);return i}function d(n,t,r,e){for(var o,i,u,f,c,l=!1,p=0;p<n.length-1;p++)if(o=[n[p],n[p+1]],!(a(o[0],o[1])<t)){i=0,u=x,c=h(o,u);do c=e.addBorder2Bbox(c,i),u=c[2]-c[0],f=v(o,e.rangePoints(c),n),i++;while(null===f&&r>u);null!==f&&(n.splice(p+1,0,f),e.removePoint(f),l=!0)}return l?d(n,t,r,e):n}function g(n,t,r){var l,a,p,s,h,v=t||20;return n.length<4?n:(n=i(e(n,r)),a=f(n),l=c(n),p=l.concat(a),p.push(n[0]),h=Math.max(n[n.length-1][0],u(p))*C,s=n.filter(function(n){return p.indexOf(n)<0}),o(d(p,Math.pow(v,2),h,L(s)),r))}var E=n("./intersect.js"),L=n("./grid.js"),w=Math.cos(90/(180/Math.PI)),x=5,C=.8;t.exports=g},{"./grid.js":1,"./intersect.js":3}],3:[function(n,t,r){function e(n,t,r,e,o,i){var u=(i-t)*(r-n)-(e-t)*(o-n);return u>0?!0:0>u?!1:!0}function o(n,t){var r=n[0][0],o=n[0][1],i=n[1][0],u=n[1][1],f=t[0][0],c=t[0][1],l=t[1][0],a=t[1][1];return e(r,o,f,c,l,a)!==e(i,u,f,c,l,a)&&e(r,o,i,u,f,c)!==e(r,o,i,u,l,a)}t.exports=o},{}]},{},[2])(2)});