function TextCreator(e){this.params={size:e,type:"20pt GeoSans",color:"rgba( 255 , 255 , 255 , 0.95 )",crispness:5,margin:e/10,square:!1},this.font="GeoSans"}TextCreator.prototype.createTexture=function(e,t){var i=document.createElement("canvas"),s=i.getContext("2d"),t={color:this.params.color,size:this.params.size,crispness:this.params.crispness,square:this.params.square,margin:this.params.size/2},a=t.size,r=t.color,n=t.crispness,h=n*a;t.margin?margin=t.margin:margin=.5*a,s.font=h+"pt "+this.font;var l=s.measureText(e).width;t.square?(i.width=l+margin,i.height=l+margin):(i.width=l+margin,i.height=h+margin),s.font=h+"pt "+this.font,t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(i.width/2-l/2-margin/2,i.height/2-h/2-+margin/2,l+margin,h+margin)),s.textAlign="center",s.textBaseline="middle",s.fillStyle=r,s.fillText(e,i.width/2,i.height/2);var c=new THREE.Texture(i);return c.scaledWidth=i.width,c.scaledHeight=i.height,c.scaledWidth>c.scaleHeight?(c.scaledWidth/=c.scaledWidth,c.scaledHeight/=c.scaledWidth):(c.scaledWidth/=c.scaledHeight,c.scaledHeight/=c.scaledHeight),c.needsUpdate=!0,c},TextCreator.prototype.createMesh=function(e,t){var i={color:t.color||this.params.color,size:t.size||this.params.size,crispness:t.crispness||this.params.crispness,margin:t.margin||this.params.margin},s=this.createTexture(e,i),a=new THREE.MeshBasicMaterial({map:s,transparent:!0,side:THREE.DoubleSide,blending:THREE.AdditiveBlending,depthwrite:!1,opacity:1,color:16777215}),r=new THREE.PlaneBufferGeometry(s.scaledWidth/i.crispness,s.scaledHeight/i.crispness),n=new THREE.Mesh(r,a);return n.scale.multiplyScalar(i.size),n.scaledWidth=s.scaledWidth,n.scaledHeight=s.scaledHeight,n.totalWidth=n.scaledWidth*i.size,n.totalHeight=n.scaledHeight*i.size,n.string=e,n};