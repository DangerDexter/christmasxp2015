function createBalls(){for(var e=[],a=(new THREE.Vector3,0);20>a;a++){var t=.5*(.8*Math.random()+.2),r=4*t,o=4+1*Math.random(),i=new THREE.ShaderMaterial({uniforms:{uPower:uniforms.uPower,time:uniforms.time,dT:uniforms.dT,lightPosition:uniforms.lightPosition,t_audio:uniforms.t_audio,iModelMat:{type:"m4",value:new THREE.Matrix4},uDimensions:{type:"v3",value:new THREE.Vector3(r,o,t)},uID:{type:"f",value:a/20},uHovered:{type:"f",value:0}},vertexShader:shaders.vs.raytrace,fragmentShader:shaders.fs.spirit}),n=new THREE.Mesh(new THREE.BoxGeometry(r,o,t),i),s=.4*Math.random()*2*Math.PI-.9*Math.PI,u=10*Math.random()+12;n.position.x=Math.sin(s)*u,n.position.z=Math.cos(s)*u,n.position.y=5+15*Math.random(),n.id=a,n.audioParams={baseOffset:.8*Math.random(),attack:.28,release:.882,trans:.6},n.select=function(){uniforms.uPower.value=1,dissipationFactor=.9,ap={baseOffset:this.audioParams.baseOffset,attack:.07,release:.28,trans:1.2},grain.playNote(ap)},n.hoverOver=function(){grain.playNote(this.audioParams),this.material.uniforms.uHovered.value=1},n.hoverOut=function(){this.material.uniforms.uHovered.value=0},n.lookAt(light.position),treeObj.add(n),objectControls.add(n),e.push(n)}return e}function extraMesh(){var e=new THREE.ShaderMaterial({uniforms:{t_audio:uniforms.t_audio,time:uniforms.time,uHovered:{type:"f",value:0}},vertexShader:shaders.vs.basic,fragmentShader:shaders.fs.sky,side:THREE.BackSide}),a=new THREE.Mesh(new THREE.IcosahedronGeometry(30,3),e);return a.position.y=-4,a.position.x=-6,a}function makeLight(e){var a=new THREE.ShaderMaterial({uniforms:{uPower:uniforms.uPower,t_audio:uniforms.t_audio,time:uniforms.time,dT:uniforms.dT,lightPosition:uniforms.lightPosition,iModelMat:{type:"m4",value:new THREE.Matrix4},cubeMap:{type:"t",value:null},uHovered:{type:"f",value:0}},vertexShader:shaders.vs.raytrace,fragmentShader:shaders.fs.noglo,transparent:!0}),t=new THREE.Mesh(new THREE.IcosahedronGeometry(.8*e.lightSize,4),a);return t.position.copy(e.lightPosition),t.select=function(){var e={baseOffset:.83*Math.random(),attack:4.2,release:11.242,trans:.6};uniforms.uPower.value=-.95,dissipationFactor=.996,grain.playNote(e)},t.hoverOver=function(){this.material.uniforms.uHovered.value=1;var e={baseOffset:.83*Math.random(),attack:.14,release:.602,trans:.3};grain.playNote(e)},t.hoverOut=function(){this.material.uniforms.uHovered.value=0},objectControls.add(t),uniforms.lightPosition.value.copy(t.position),t}function makeGround(){var e=new THREE.ShaderMaterial({uniforms:{uPower:uniforms.uPower,t_audio:uniforms.t_audio,dT:uniforms.dT,time:uniforms.time,lightPosition:uniforms.lightPosition,iModelMat:{type:"m4",value:new THREE.Matrix4},uHovered:{type:"f",value:0}},vertexShader:shaders.vs.basic,fragmentShader:shaders.fs.floor,shading:THREE.FlatShading}),a=new THREE.Mesh(new THREE.PlaneBufferGeometry(100,100,300,300),e);return a.rotation.x=-Math.PI/2,a.position.y=0,a}function makePedestal(){var e=new THREE.ShaderMaterial({uniforms:{uPower:uniforms.uPower,t_audio:uniforms.t_audio,dT:uniforms.dT,time:uniforms.time,lightPosition:uniforms.lightPosition,iModelMat:{type:"m4",value:new THREE.Matrix4},uHovered:{type:"f",value:0}},vertexShader:shaders.vs.raytrace,fragmentShader:shaders.fs.pedestal,shading:THREE.FlatShading}),a=new THREE.Mesh(new THREE.CylinderGeometry(10,14,1,6),e);return a.position.y=.5,a.position.x=-2,a.hoverOut=function(){this.material.uniforms.uHovered.value=0},a.hoverOver=function(){this.material.uniforms.uHovered.value=1;var e={baseOffset:.1+.7*Math.random(),attack:.14,release:.602,trans:.3};grain.playNote(e)},a.select=function(){uniforms.uPower.value=.1,dissipationFactor=.999;var e={baseOffset:.1+.2*Math.random(),attack:4.2,release:11.242,trans:.15};grain.playNote(e)},objectControls.add(a),a}function createMonk(){var e=new THREE.BoxGeometry(3,4.6,3),a=new THREE.ShaderMaterial({uniforms:{uPower:uniforms.uPower,t_audio:uniforms.t_audio,dT:uniforms.dT,time:uniforms.time,lightPosition:uniforms.lightPosition,iModelMat:{type:"m4",value:new THREE.Matrix4},uHovered:{type:"f",value:0}},vertexShader:shaders.vs.raytrace,fragmentShader:shaders.fs.monk,transparent:!0}),t=new THREE.Mesh(e,a);return t.position.x=-8,t.position.y=3.3,t.hoverOver=function(){var e={baseOffset:.2*Math.random()+.6,attack:.28,release:.14*10.3,trans:1.2};grain.playNote(e),this.material.uniforms.uHovered.value=1},t.hoverOut=function(){this.material.uniforms.uHovered.value=0},t.select=function(){uniforms.uPower.value=4,dissipationFactor=.8,ap={baseOffset:.2*Math.random()+.7,attack:.14*.1,release:.14*3,trans:.3},grain.playNote(ap)},objectControls.add(t),t}function makeAbout(){var e=new THREE.BoxGeometry(1,4.6,1),a=new THREE.MeshLambertMaterial,t=new THREE.Mesh(e,a);return t.position.x=20,t.position.z=-20,t.position.y=4.3,t.hoverOver=function(){var e={baseOffset:.2*Math.random()+.6,attack:.28,release:.14*10.3,trans:1.2};grain.playNote(e)},t.hoverOut=function(){},t.select=function(){ap={baseOffset:.2*Math.random()+.7,attack:.14*.1,release:.14*3,trans:.3},grain.playNote(ap),$("#info").fadeToggle()},objectControls.add(t),t}