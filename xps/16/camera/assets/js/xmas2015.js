// --------------------------------------
// 
//    _  _ _/ .  _  _/ /_ _  _  _        
//   /_|/_ / /|//_  / / //_ /_// /_/     
//   http://activetheory.net     _/      
// 
// --------------------------------------
//   12/18/15 11:22a
// --------------------------------------

window.Global={};window.getURL=function(a,b){if(!b){b="_blank"}window.open(a,b)};if(typeof(console)==="undefined"){window.console={};console.log=console.error=console.info=console.debug=console.warn=console.trace=function(){}}if(!window.requestAnimationFrame){window.requestAnimationFrame=(function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){window.setTimeout(b,1000/60)}})()}window.performance=(function(){if(window.performance&&window.performance.now){return window.performance}else{return Date}})();Date.now=Date.now||function(){return +new Date};window.Class=function(b,c){var f=this||window;var d=b.toString();var a=d.match(/function ([^\(]+)/)[1];var e=null;if(typeof c==="function"){e=c;c=null}c=(c||"").toLowerCase();b.prototype.__call=function(){if(this.events){this.events.scope(this)}};if(!c){f[a]=b;if(e){e()}}else{if(c=="static"){f[a]=new b()}else{if(c=="singleton"){f[a]=(function(){var h={};var g;h.instance=function(){if(!g){g=new b()}return g};return h})()}}}if(this!==window){if(!this.__namespace){this.__namespace=this.constructor.toString().match(/function ([^\(]+)/)[1]}this[a]._namespace=this.__namespace}};window.Inherit=function(f,a,d){if(typeof d==="undefined"){d=f}var c=new a(d,true);var b={};for(var e in c){f[e]=c[e];b[e]=c[e]}if(f.__call){f.__call()}Render.nextFrame(function(){for(e in c){if((f[e]&&b[e])&&f[e]!==b[e]){f["_"+e]=b[e]}}c=b=null;f=a=d=null})};window.Implement=function(b,a){Render.nextFrame(function(){var c=new a();for(var e in c){if(typeof b[e]==="undefined"){throw"Interface Error: Missing Property: "+e+" ::: "+a}else{var d=typeof c[e];if(typeof b[e]!=d){throw"Interface Error: Property "+e+" is Incorrect Type ::: "+a}}}})};window.Namespace=function(a){if(typeof a==="string"){window[a]={Class:window.Class}}else{a.Class=window.Class}};window.Interface=function(b){var a=b.toString().match(/function ([^\(]+)/)[1];Hydra.INTERFACES[a]=b};window.THREAD=false;Class(function HydraObject(a,b,d,c){this._children=new LinkedList();this.__useFragment=c;this._initSelector(a,b,d)},function(){var a=HydraObject.prototype;a._initSelector=function(b,d,f){if(b&&typeof b!=="string"){this.div=b}else{var e=b?b.charAt(0):null;var c=b?b.slice(1):null;if(e!="."&&e!="#"){c=b;e="."}if(!f){this._type=d||"div";if(this._type=="svg"){this.div=document.createElementNS("http://www.w3.org/2000/svg",this._type);this.div.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")}else{this.div=document.createElement(this._type);if(e){if(e=="#"){this.div.id=c}else{this.div.className=c}}}}else{if(e!="#"){throw"Hydra Selectors Require #ID"}this.div=document.getElementById(c)}}this.div.hydraObject=this};a.addChild=a.add=function(d){var c=this.div;if(this.__useFragment){if(!this._fragment){this._fragment=document.createDocumentFragment();var b=this;defer(function(){if(!b._fragment||!b.div){return b._fragment=null}b.div.appendChild(b._fragment);b._fragment=null})}c=this._fragment}if(d.element&&d.element instanceof HydraObject){c.appendChild(d.element.div);this._children.push(d.element);d.element._parent=this;d.element.div.parentNode=this.div}else{if(d.div){c.appendChild(d.div);this._children.push(d);d._parent=this;d.div.parentNode=this.div}else{if(d.nodeName){c.appendChild(d);d.parentNode=this.div}}}return this};a.clone=function(){return $(this.div.cloneNode(true))};a.create=function(b,c){var d=$(b,c);this.addChild(d);if(this.__root){this.__root.__append[b]=d;d.__root=this.__root}return d};a.empty=function(){var b=this._children.start();while(b){if(b&&b.remove){b.remove()}b=this._children.next()}this.div.innerHTML="";return this};a.parent=function(){return this._parent};a.children=function(){return this.div.children?this.div.children:this.div.childNodes};a.append=function(c,b){if(!this.__root){this.__root=this;this.__append={}}return c.apply(this,b)};a.removeChild=function(c,b){try{c.div.parentNode.removeChild(c.div)}catch(d){}if(!b){this._children.remove(c)}};a.remove=a.destroy=function(){this.removed=true;var b=this._parent;if(!!(b&&!b.removed&&b.removeChild)){b.removeChild(this,true)}var c=this._children.start();while(c){if(c&&c.remove){c.remove()}c=this._children.next()}this._children.destroy();this.div.hydraObject=null;Utils.nullObject(this)}});Class(function Hydra(){var f=this;var d,b;var e=[];this.READY=false;this.HASH=window.location.hash.slice(1);this.LOCAL=location.hostname.indexOf("local")>-1||location.hostname.split(".")[0]=="10"||location.hostname.split(".")[0]=="192";(function(){a()})();function a(){if(!document||!window){return setTimeout(a,1)}if(window._NODE_){f.addEvent="addEventListener";f.removeEvent="removeEventListener";return setTimeout(c,1)}if(window.addEventListener){f.addEvent="addEventListener";f.removeEvent="removeEventListener";window.addEventListener("load",c,false)}else{f.addEvent="attachEvent";f.removeEvent="detachEvent";window.attachEvent("onload",c)}}function c(){if(window.removeEventListener){window.removeEventListener("load",c,false)}for(var g=0;g<e.length;g++){e[g]()}e=null;f.READY=true;if(window.Main){Hydra.Main=new window.Main()}}this.development=function(g){if(!g){clearInterval(d)}else{d=setInterval(function(){for(var l in window){if(l.strpos("webkit")){continue}var k=window[l];if(typeof k!=="function"&&l.length>2){if(l.strpos("_ga")||l.strpos("_typeface_js")){continue}var j=l.charAt(0);var h=l.charAt(1);if(j=="_"||j=="$"){if(h!==h.toUpperCase()){console.log(window[l]);throw"Hydra Warning:: "+l+" leaking into global scope"}}}}},1000)}};this.getArguments=function(k){var j=this.arguments;var g=[];for(var h=1;h<j.length;h++){if(j[h]!==null){g.push(j[h])}}return g};this.ready=function(g){if(this.READY){return g()}e.push(g)};this.$=function(g,h,j){return new HydraObject(g,h,j)};this.__triggerReady=function(){c()};this.INTERFACES={};this.HTML={};this.JSON={};this.$.fn=HydraObject.prototype;window.$=this.$;window.ready=this.ready},"Static");Hydra.ready(function(){window.__window=$(window);window.__document=$(document);window.__body=$(document.getElementsByTagName("body")[0]);window.Stage=__body.create("#Stage");Stage.size("100%");Stage.__useFragment=true;Stage.width=document.body.clientWidth||document.documentElement.offsetWidth||window.innerWidth;Stage.height=document.body.clientHeight||document.documentElement.offsetHeight||window.innerHeight;(function(){var b=Date.now();var a;setTimeout(function(){var g=["hidden","msHidden","webkitHidden"];var f,e;(function(){for(var h in g){if(document[g[h]]!=="undefined"){f=g[h];switch(f){case"hidden":e="visibilitychange";break;case"msHidden":e="msvisibilitychange";break;case"webkitHidden":e="webkitvisibilitychange";break}return}}})();if(typeof document[f]==="undefined"){if(Device.browser.ie){document.onfocus=c;document.onblur=d}else{window.onfocus=c;window.onblur=d}}else{document.addEventListener(e,function(){var h=Date.now();if(h-b>10){if(document[f]===false){c()}else{d()}}b=h})}},250);function c(){if(a!="focus"){HydraEvents._fireEvent(HydraEvents.BROWSER_FOCUS,{type:"focus"})}a="focus"}function d(){if(a!="blur"){HydraEvents._fireEvent(HydraEvents.BROWSER_FOCUS,{type:"blur"})}a="blur"}})();window.onresize=function(){if(!Device.mobile){Stage.width=document.body.clientWidth||document.documentElement.offsetWidth||window.innerWidth;Stage.height=document.body.clientHeight||document.documentElement.offsetHeight||window.innerHeight;HydraEvents._fireEvent(HydraEvents.RESIZE)}}});(function(){$.fn.text=function(a){if(typeof a!=="undefined"){this.div.textContent=a;return this}else{return this.div.textContent}};$.fn.html=function(b,a){if(b&&!b.strpos("<")&&!a){return this.text(b)}if(typeof b!=="undefined"){this.div.innerHTML=b;return this}else{return this.div.innerHTML}};$.fn.hide=function(){this.div.style.display="none";return this};$.fn.show=function(){this.div.style.display="";return this};$.fn.visible=function(){this.div.style.visibility="visible";return this};$.fn.invisible=function(){this.div.style.visibility="hidden";return this};$.fn.setZ=function(a){this.div.style.zIndex=a;return this};$.fn.clearAlpha=function(){this.div.style.opacity="";return this};$.fn.size=function(a,b,c){if(typeof a==="string"){if(typeof b==="undefined"){b="100%"}else{if(typeof b!=="string"){b=b+"px"}}this.div.style.width=a;this.div.style.height=b}else{this.div.style.width=a+"px";this.div.style.height=b+"px";if(!c){this.div.style.backgroundSize=a+"px "+b+"px"}}this.width=a;this.height=b;return this};$.fn.mouseEnabled=function(a){this.div.style.pointerEvents=a?"auto":"none";return this};$.fn.fontStyle=function(e,c,b,d){var a={};if(e){a.fontFamily=e}if(c){a.fontSize=c}if(b){a.color=b}if(d){a.fontStyle=d}this.css(a);return this};$.fn.bg=function(c,a,d,b){if(!c){return this}if(Hydra.CDN){if(!c.strpos("http")&&c.strpos(".")){c=Hydra.CDN+c}}if(!c.strpos(".")){this.div.style.backgroundColor=c}else{this.div.style.backgroundImage="url("+c+")"}if(typeof a!=="undefined"){a=typeof a=="number"?a+"px":a;d=typeof d=="number"?d+"px":d;this.div.style.backgroundPosition=a+" "+d}if(b){this.div.style.backgroundSize="";this.div.style.backgroundRepeat=b}if(a=="cover"||a=="contain"){this.div.style.backgroundSize=a;this.div.style.backgroundPosition=typeof d!="undefined"?d+" "+b:"center"}return this};$.fn.center=function(a,d,b){var c={};if(typeof a==="undefined"){c.left="50%";c.top="50%";c.marginLeft=-this.width/2;c.marginTop=-this.height/2}else{if(a){c.left="50%";c.marginLeft=-this.width/2}if(d){c.top="50%";c.marginTop=-this.height/2}}if(b){delete c.left;delete c.top}this.css(c);return this};$.fn.mask=function(b,a,e,c,d){this.div.style[CSS.prefix("Mask")]=(b.strpos(".")?"url("+b+")":b)+" no-repeat";return this};$.fn.blendMode=function(b,a){if(a){this.div.style["background-blend-mode"]=b}else{this.div.style["mix-blend-mode"]=b}return this};$.fn.css=function(d,c){if(typeof c=="boolean"){skip=c;c=null}if(typeof d!=="object"){if(!c){var b=this.div.style[d];if(typeof b!=="number"){if(b.strpos("px")){b=Number(b.slice(0,-2))}if(d=="opacity"){b=typeof this.div.style.opacity==="number"?this.div.style.opacity:1}}if(!b){b=0}return b}else{this.div.style[d]=c;return this}}TweenManager.clearCSSTween(this);for(var a in d){var e=d[a];if(!(typeof e==="string"||typeof e==="number")){continue}if(typeof e!=="string"&&a!="opacity"&&a!="zIndex"){e+="px"}this.div.style[a]=e}return this};$.fn.transform=function(c){if(this.multiTween&&this._cssTweens.length>1&&this.__transformTime&&Render.TIME-this.__transformTime<15){return}this.__transformTime=Render.TIME;TweenManager.clearCSSTween(this);if(Device.tween.css2d){if(!c){c=this}else{for(var b in c){if(typeof c[b]==="number"){this[b]=c[b]}}}var a;if(!this._matrix){a=TweenManager.parseTransform(c)}else{if(this._matrix.type=="matrix2"){this._matrix.setTRS(this.x,this.y,this.rotation,this.scaleX||this.scale,this.scaleY||this.scale)}else{this._matrix.setTRS(this.x,this.y,this.z,this.rotationX,this.rotationY,this.rotationZ,this.scaleX||this.scale,this.scaleY||this.scale,this.scaleZ||this.scale)}a=this._matrix.getCSS()}if(this.__transformCache!=a){this.div.style[Device.styles.vendorTransform]=a;this.__transformCache=a}}return this};$.fn.useMatrix3D=function(){this._matrix=new Matrix4();this.x=0;this.y=0;this.z=0;this.rotationX=0;this.rotationY=0;this.rotationZ=0;this.scale=1;return this};$.fn.useMatrix2D=function(){this._matrix=new Matrix2();this.x=0;this.y=0;this.rotation=0;this.scale=1;return this};$.fn.willChange=function(b){if(typeof b==="boolean"){if(b===true){this._willChangeLock=true}else{this._willChangeLock=false}}else{if(this._willChangeLock){return}}var a=typeof b==="string";if((!this._willChange||a)&&typeof b!=="null"){this._willChange=true;this.div.style["will-change"]=a?b:Device.transformProperty+", opacity"}else{this._willChange=false;this.div.style["will-change"]=""}};$.fn.backfaceVisibility=function(a){if(a){this.div.style[CSS.prefix("BackfaceVisibility")]="visible"}else{this.div.style[CSS.prefix("BackfaceVisibility")]="hidden"}};$.fn.enable3D=function(b,a,c){this.div.style[CSS.prefix("TransformStyle")]="preserve-3d";if(b){this.div.style[CSS.prefix("Perspective")]=b+"px"}if(typeof a!=="undefined"){a=typeof a==="number"?a+"px":a;c=typeof c==="number"?c+"px":c;this.div.style[CSS.prefix("PerspectiveOrigin")]=a+" "+c}return this};$.fn.disable3D=function(){this.div.style[CSS.prefix("TransformStyle")]="";this.div.style[CSS.prefix("Perspective")]="";return this};$.fn.transformPoint=function(a,d,c){var b="";if(typeof a!=="undefined"){b+=(typeof a==="number"?a+"px ":a+" ")}if(typeof d!=="undefined"){b+=(typeof d==="number"?d+"px ":d+" ")}if(typeof c!=="undefined"){b+=(typeof c==="number"?c+"px":c)}this.div.style[CSS.prefix("TransformOrigin")]=b;return this};$.fn.tween=function(c,d,e,a,f,b){if(typeof a==="boolean"){b=a;a=0;f=null}else{if(typeof a==="function"){f=a;a=0}}if(typeof f==="boolean"){b=f;f=null}if(!a){a=0}return TweenManager._detectTween(this,c,d,e,a,f,b)};$.fn.clearTransform=function(){if(typeof this.x==="number"){this.x=0}if(typeof this.y==="number"){this.y=0}if(typeof this.z==="number"){this.z=0}if(typeof this.scale==="number"){this.scale=1}if(typeof this.scaleX==="number"){this.scaleX=1}if(typeof this.scaleY==="number"){this.scaleY=1}if(typeof this.rotation==="number"){this.rotation=0}if(typeof this.rotationX==="number"){this.rotationX=0}if(typeof this.rotationY==="number"){this.rotationY=0}if(typeof this.rotationZ==="number"){this.rotationZ=0}if(typeof this.skewX==="number"){this.skewX=0}if(typeof this.skewY==="number"){this.skewY=0}this.div.style[Device.styles.vendorTransform]="";return this};$.fn.stopTween=function(){if(this._cssTween){this._cssTween.stop()}if(this._mathTween){this._mathTween.stop()}return this};$.fn.keypress=function(a){this.div.onkeypress=function(b){b=b||window.event;b.code=b.keyCode?b.keyCode:b.charCode;if(a){a(b)}}};$.fn.keydown=function(a){this.div.onkeydown=function(b){b=b||window.event;b.code=b.keyCode;if(a){a(b)}}};$.fn.keyup=function(a){this.div.onkeyup=function(b){b=b||window.event;b.code=b.keyCode;if(a){a(b)}}};$.fn.attr=function(a,b){if(a&&b){if(b==""){this.div.removeAttribute(a)}else{this.div.setAttribute(a,b)}}else{if(a){return this.div.getAttribute(a)}}return this};$.fn.val=function(a){if(typeof a==="undefined"){return this.div.value}else{this.div.value=a}return this};$.fn.change=function(b){var a=this;if(this._type=="select"){this.div.onchange=function(){b({object:a,value:a.div.value||""})}}};$.fn.svgSymbol=function(e,d,a){var c=SVG.getSymbolConfig(e);var b='<svg viewBox="0 0 '+c.width+" "+c.height+'" width="'+d+'" height="'+a+'"><use xlink:href="#'+c.id+'" x="0" y="0" /></svg>';this.html(b,true)}})();(function(){var a=!!window.MSGesture;var b=function(c){if(Hydra.addEvent=="attachEvent"){switch(c){case"click":return"onclick";break;case"mouseover":return"onmouseover";break;case"mouseout":return"onmouseleave";break;case"mousedown":return"onmousedown";break;case"mouseup":return"onmouseup";break;case"mousemove":return"onmousemove";break}}if(a){switch(c){case"touchstart":return"pointerdown";break;case"touchmove":return"MSGestureChange";break;case"touchend":return"pointerup";break}}return c};$.fn.click=function(e){var d=this;function c(f){if(!d.div){return false}if(Mouse._preventClicks){return false}f.object=d.div.className=="hit"?d.parent():d;f.action="click";if(!f.pageX){f.pageX=f.clientX;f.pageY=f.clientY}if(e){e(f)}if(Mouse.autoPreventClicks){Mouse.preventClicks()}}this.div[Hydra.addEvent](b("click"),c,true);this.div.style.cursor="pointer";return this};$.fn.hover=function(h){var g=this;var f=false;var e;function c(l){if(!g.div){return false}var k=Date.now();var j=l.toElement||l.relatedTarget;if(e&&(k-e)<5){e=k;return false}e=k;l.object=g.div.className=="hit"?g.parent():g;switch(l.type){case"mouseout":l.action="out";break;case"mouseleave":l.action="out";break;default:l.action="over";break}if(f){if(Mouse._preventClicks){return false}if(l.action=="over"){return false}if(l.action=="out"){if(d(g.div,j)){return false}}f=false}else{if(l.action=="out"){return false}f=true}if(!l.pageX){l.pageX=l.clientX;l.pageY=l.clientY}if(h){h(l)}}function d(m,k){var j=m.children.length-1;for(var l=j;l>-1;l--){if(k==m.children[l]){return true}}for(l=j;l>-1;l--){if(d(m.children[l],k)){return true}}}this.div[Hydra.addEvent](b("mouseover"),c,true);this.div[Hydra.addEvent](b("mouseout"),c,true);return this};$.fn.press=function(e){var d=this;function c(f){if(!d.div){return false}f.object=d.div.className=="hit"?d.parent():d;switch(f.type){case"mousedown":f.action="down";break;default:f.action="up";break}if(!f.pageX){f.pageX=f.clientX;f.pageY=f.clientY}if(e){e(f)}}this.div[Hydra.addEvent](b("mousedown"),c,true);this.div[Hydra.addEvent](b("mouseup"),c,true);return this};$.fn.bind=function(d,j){if(!this._events){this._events={}}if(a&&this==__window){return Stage.bind(d,j)}if(d=="touchstart"){if(!Device.mobile){d="mousedown"}}else{if(d=="touchmove"){if(!Device.mobile){d="mousemove"}if(a&&!this.div.msGesture){this.div.msGesture=new MSGesture();this.div.msGesture.target=this.div}}else{if(d=="touchend"){if(!Device.mobile){d="mouseup"}}}}this._events["bind_"+d]=this._events["bind_"+d]||[];var h=this._events["bind_"+d];var g={};var f=this.div;g.callback=j;g.target=this.div;h.push(g);function c(o){if(a&&f.msGesture&&d=="touchstart"){f.msGesture.addPointer(o.pointerId)}var p=Utils.touchEvent(o);if(a){var n=o;o={};o.x=Number(n.pageX||n.clientX);o.y=Number(n.pageY||n.clientY);o.target=n.target;o.currentTarget=n.currentTarget;o.path=[];var m=o.target;while(m){o.path.push(m);m=m.parentElement||null}o.windowsPointer=true}else{o.x=p.x;o.y=p.y}for(var k=0;k<h.length;k++){var l=h[k];if(l.target==o.currentTarget){l.callback(o)}}}if(!this._events["fn_"+d]){this._events["fn_"+d]=c;this.div[Hydra.addEvent](b(d),c,true)}return this};$.fn.unbind=function(c,g){if(!this._events){this._events={}}if(a&&this==__window){return Stage.unbind(c,g)}if(c=="touchstart"){if(!Device.mobile){c="mousedown"}}else{if(c=="touchmove"){if(!Device.mobile){c="mousemove"}}else{if(c=="touchend"){if(!Device.mobile){c="mouseup"}}}}var f=this._events["bind_"+c];if(!f){return this}for(var d=0;d<f.length;d++){var e=f[d];if(e.callback==g){f.splice(d,1)}}if(this._events["fn_"+c]&&!f.length){this.div[Hydra.removeEvent](b(c),this._events["fn_"+c],true);this._events["fn_"+c]=null}return this};$.fn.interact=function(d,c){if(!this.hit){this.hit=$(".hit");this.hit.css({width:"100%",height:"100%",zIndex:99999,top:0,left:0,position:"absolute",background:"rgba(255, 255, 255, 0)"});this.addChild(this.hit)}if(!Device.mobile){this.hit.hover(d).click(c)}else{this.hit.touchClick(d,c)}};$.fn.touchSwipe=function(k,c){if(!window.addEventListener){return this}var f=this;var d=c||75;var m,l;var g=false;var n={};if(Device.mobile){this.div.addEventListener(b("touchstart"),e);this.div.addEventListener(b("touchend"),j);this.div.addEventListener(b("touchcancel"),j)}function e(o){var p=Utils.touchEvent(o);if(!f.div){return false}if(o.touches.length==1){m=p.x;l=p.y;g=true;f.div.addEventListener(b("touchmove"),h)}}function h(q){if(!f.div){return false}if(g){var r=Utils.touchEvent(q);var p=m-r.x;var o=l-r.y;n.direction=null;n.moving=null;n.x=null;n.y=null;n.evt=q;if(Math.abs(p)>=d){j();if(p>0){n.direction="left"}else{n.direction="right"}}else{if(Math.abs(o)>=d){j();if(o>0){n.direction="up"}else{n.direction="down"}}else{n.moving=true;n.x=p;n.y=o}}if(k){k(n,q)}}}function j(o){if(!f.div){return false}m=l=g=false;f.div.removeEventListener(b("touchmove"),h)}return this};$.fn.touchClick=function(f,l){if(!window.addEventListener){return this}var e=this;var n,m;var d={};var g={};if(Device.mobile){this.div.addEventListener(b("touchmove"),h,false);this.div.addEventListener(b("touchstart"),c,false);this.div.addEventListener(b("touchend"),j,false)}function h(o){if(!e.div){return false}g=Utils.touchEvent(o);if(Utils.findDistance(d,g)>5){m=true}else{m=false}}function k(o){var p=Utils.touchEvent(o);o.touchX=p.x;o.touchY=p.y;d.x=o.touchX;d.y=o.touchY}function c(o){if(!e.div){return false}n=Date.now();o.action="over";o.object=e.div.className=="hit"?e.parent():e;k(o);if(f&&!m){f(o)}}function j(q){if(!e.div){return false}var p=Date.now();var o=false;q.object=e.div.className=="hit"?e.parent():e;k(q);if(n&&p-n<750){if(Mouse._preventClicks){return false}if(l&&!m){o=true;q.action="click";if(l&&!m){l(q)}if(Mouse.autoPreventClicks){Mouse.preventClicks()}}}if(f){q.action="out";if(!Mouse._preventFire){f(q)}}m=false}return this}})();Class(function MVC(){Inherit(this,Events);var c={};var b={};var a=[];this.classes={};function d(f,e){c[e]={};Object.defineProperty(f,e,{set:function(g){if(c[e]&&c[e].s){c[e].s.call(f,g)}g=null},get:function(){if(c[e]&&c[e].g){return c[e].g.apply(f)}}})}this.set=function(f,e){if(!c[f]){d(this,f)}c[f].s=e};this.get=function(f,e){if(!c[f]){d(this,f)}c[f].g=e};this.delayedCall=function(j,e,f){var h=this;var g=Timer.create(function(){if(h.destroy){j(f)}h=j=null},e||0);a.push(g);if(a.length>20){a.shift()}return g};this.initClass=function(o,r,q,p,n,m,l,k){var h=Utils.timestamp();if(window.Hydra){Hydra.arguments=arguments}var j=new o(r,q,p,n,m,l,k);if(window.Hydra){Hydra.arguments=null}j.parent=this;if(j.destroy){this.classes[h]=j;this.classes[h].__id=h}var s=arguments[arguments.length-1];if(Array.isArray(s)&&s.length==1&&s[0] instanceof HydraObject){s[0].addChild(j)}else{if(this.element&&s!==null){this.element.addChild(j)}}return j};this.destroy=function(){for(var f in this.classes){var e=this.classes[f];if(e&&e.destroy){e.destroy()}}this.clearTimers&&this.clearTimers();this.classes=null;if(this.events){this.events=this.events.destroy()}if(this.element&&this.element.remove){this.element=this.container=this.element.remove()}if(this.parent&&this.parent.__destroyChild){this.parent.__destroyChild(this.__id)}return Utils.nullObject(this)};this.clearTimers=function(){for(i=0;i<a.length;i++){clearTimeout(a[i])}a.length=0};this.active=function(e,f){if(typeof f!=="undefined"){b[e]=f}else{return b[e]}};this.__destroyChild=function(e){delete this.classes[e]}});Class(function Model(a){Inherit(this,MVC);var b={};this.push=function(c,d){b[c]=d};this.pull=function(c){return b[c]};this.initWithData=function(f){this.STATIC_DATA=f;for(var e in this){var c=this[e];var g=false;for(var d in f){if(d.toLowerCase().replace(/-/g,"")==e.toLowerCase()){g=true;if(c.init){c.init(f[d])}}}if(!g&&c.init){c.init()}}};this.loadData=function(c,e){var d=this;XHR.get(c+"?"+Utils.timestamp(),function(f){d.initWithData(f);e(f)})};this.Class=function(d){var c=d.toString().match(/function ([^\(]+)/)[1];this[c]=new d()}});Class(function View(e){Inherit(this,MVC);var f;var c=e.constructor.toString().match(/function ([^\(]+)/)[1];this.element=$("."+c);this.element.__useFragment=true;this.css=function(h){this.element.css(h);return this};this.transform=function(h){this.element.transform(h||this);return this};this.tween=function(k,l,m,h,n,j){return this.element.tween(k,l,m,h,n,j)};var b=Hydra.INTERFACES[c]||Hydra.INTERFACES[c+"UI"];if(b){this.ui={};var g=Hydra.getArguments();g.push(e);f=this.element.append(b,g);var a=this.element.__append;for(var d in a){this.ui[d]=a[d]}if(f){this.resize=function(){f.apply(this.ui,arguments)}}}this.__call=function(){this.events.scope(this)}});Class(function Controller(a){Inherit(this,MVC);a=a.constructor.toString().match(/function ([^\(]+)/)[1];this.element=this.container=$("#"+a);this.element.__useFragment=true;this.css=function(b){this.container.css(b)}});Class(function Component(){Inherit(this,MVC);this.__call=function(){this.events.scope(this);delete this.__call}});Class(function Utils(){var c=this;if(typeof Float32Array=="undefined"){Float32Array=Array}function b(e,d){return a(Math.random(),e,d)}function a(e,f,d){return f+(d-f)*e}this.doRandom=function(e,d){return Math.round(b(e-0.5,d+0.5))};this.headsTails=function(d,e){return !c.doRandom(0,1)?d:e};this.toDegrees=function(d){return d*(180/Math.PI)};this.toRadians=function(d){return d*(Math.PI/180)};this.findDistance=function(g,f){var e=f.x-g.x;var d=f.y-g.y;return Math.sqrt(e*e+d*d)};this.timestamp=function(){var d=Date.now()+c.doRandom(0,99999);return d.toString()};this.hitTestObject=function(k,j){var e=k.x,o=k.y,p=k.width,l=k.height;var s=j.x,g=j.y,n=j.width,r=j.height;var d=e+p,m=o+l,q=s+n,f=g+r;if(s>=e&&s<=d){if(g>=o&&g<=m){return true}else{if(o>=g&&o<=f){return true}}}else{if(e>=s&&e<=q){if(g>=o&&g<=m){return true}else{if(o>=g&&o<=f){return true}}}}return false};this.randomColor=function(){var d="#"+Math.floor(Math.random()*16777215).toString(16);if(d.length<7){d=this.randomColor()}return d};this.touchEvent=function(f){var d={};d.x=0;d.y=0;if(f.windowsPointer){return f}if(!f){return d}if(Device.mobile&&(f.touches||f.changedTouches)){if(f.changedTouches.length){d.x=f.changedTouches[0].pageX;d.y=f.changedTouches[0].pageY-Mobile.scrollTop}else{d.x=f.touches[0].pageX;d.y=f.touches[0].pageY-Mobile.scrollTop}}else{d.x=f.pageX;d.y=f.pageY}return d};this.clamp=function(e,f,d){return Math.min(Math.max(e,f),d)};this.constrain=function(e,f,d){return Math.min(Math.max(e,Math.min(f,d)),Math.max(f,d))};this.nullObject=function(d){if(d.destroy||d.div){for(var e in d){if(typeof d[e]!=="undefined"){d[e]=null}}}return null};this.convertRange=this.range=function(d,m,g,f,j,l){var h=(g-m);var k=(j-f);var e=(((d-m)*k)/h)+f;if(l){return c.clamp(e,f,j)}return e};String.prototype.strpos=function(e){if(Array.isArray(e)){for(var d=0;d<e.length;d++){if(this.indexOf(e[d])>-1){return true}}return false}else{return this.indexOf(e)!=-1}};String.prototype.clip=function(e,d){return this.length>e?this.slice(0,e)+d:this};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};Array.prototype.findAndRemove=function(d){var e=this.indexOf(d);if(e>-1){return this.splice(e,1)}}},"Static");Class(function CSS(){var g=this;var f,b,a;Hydra.ready(function(){b="";f=document.createElement("style");f.type="text/css";document.getElementsByTagName("head")[0].appendChild(f)});function d(k){var j=k.match(/[A-Z]/);var l=j?j.index:null;if(l){var m=k.slice(0,l);var h=k.slice(l);k=m+"-"+h.toLowerCase()}return k}function e(k){var j=k.match(/\-/);var m=j?j.index:null;if(m){var n=k.slice(0,m);var h=k.slice(m).slice(1);var l=h.charAt(0);h=h.slice(1);h=l.toUpperCase()+h;k=n+h}return k}function c(){f.innerHTML=b;a=false}this._read=function(){return b};this._write=function(h){b=h;if(!a){a=true;Render.nextFrame(c)}};this._toCSS=d;this.style=function(h,l){var k=h+" {";for(var j in l){var n=d(j);var m=l[j];if(typeof m!=="string"&&j!="opacity"){m+="px"}k+=n+":"+m+"!important;"}k+="}";f.innerHTML+=k};this.get=function(k,h){var q=new Object();var n=f.innerHTML.split(k+" {");for(var m=0;m<n.length;m++){var o=n[m];if(!o.length){continue}var p=o.split("!important;");for(var l in p){if(p[l].strpos(":")){var r=p[l].split(":");if(r[1].slice(-2)=="px"){r[1]=Number(r[1].slice(0,-2))}q[e(r[0])]=r[1]}}}if(!h){return q}else{return q[h]}};this.textSize=function(l){var k=l.clone();k.css({position:"relative",cssFloat:"left",styleFloat:"left",marginTop:-99999,width:"",height:""});__body.addChild(k);var j=k.div.offsetWidth;var h=k.div.offsetHeight;k.remove();return{width:j,height:h}};this.prefix=function(h){return Device.styles.vendor==""?h.charAt(0).toLowerCase()+h.slice(1):Device.styles.vendor+h}},"Static");Class(function Device(){var g=this;var b;this.agent=navigator.userAgent.toLowerCase();this.detect=function(h){if(typeof h==="string"){h=[h]}for(var e=0;e<h.length;e++){if(this.agent.strpos(h[e])){return true}}return false};var d=(function(){var h="";if(!window._NODE_){var e=window.getComputedStyle(document.documentElement,"");h=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||(e.OLink===""&&["","o"]))[1];var j=("WebKit|Moz|MS|O").match(new RegExp("("+h+")","i"))[1]}else{h="webkit"}var k=g.detect("trident");return{unprefixed:k&&!g.detect("msie 9"),dom:j,lowercase:h,css:"-"+h+"-",js:(k?h[0]:h[0].toUpperCase())+h.substr(1)}})();function a(k){var j=b||document.createElement("div"),h="Khtml ms O Moz Webkit".split(" "),e=h.length;b=j;if(k in j.style){return true}k=k.replace(/^[a-z]/,function(l){return l.toUpperCase()});while(e--){if(h[e]+k in j.style){return true}}return false}this.mobile=!window._NODE_&&(!!(("ontouchstart" in window)||("onpointerdown" in window))&&this.detect(["ios","iphone","ipad","windows","android","blackberry"]))?{}:false;if(this.mobile&&this.detect("windows")&&!this.detect("touch")){this.mobile=false}if(this.mobile){this.mobile.tablet=screen.width>1000||screen.height>900;this.mobile.phone=!this.mobile.tablet}this.browser={};this.browser.ie=(function(){if(g.detect("msie")){return true}if(g.detect("trident")&&g.detect("rv:")){return true}if(g.detect("windows")&&g.detect("edge")){return true}})();this.browser.chrome=!this.browser.ie&&this.detect("chrome");this.browser.safari=!this.browser.chrome&&!this.browser.ie&&this.detect("safari");this.browser.firefox=this.detect("firefox");this.browser.version=(function(){try{if(g.browser.chrome){return Number(g.agent.split("chrome/")[1].split(".")[0])}if(g.browser.firefox){return Number(g.agent.split("firefox/")[1].split(".")[0])}if(g.browser.safari){return Number(g.agent.split("version/")[1].split(".")[0].charAt(0))}if(g.browser.ie){if(g.detect("msie")){return Number(g.agent.split("msie ")[1].split(".")[0])}if(g.detect("rv:")){return Number(g.agent.split("rv:")[1].split(".")[0])}return Number(g.agent.split("edge/")[1].split(".")[0])}}catch(h){return -1}})();this.vendor=d.css;this.transformProperty=(function(){switch(d.lowercase){case"moz":return"-moz-transform";break;case"webkit":return"-webkit-transform";break;case"o":return"-o-transform";break;case"ms":return"-ms-transform";break;default:return"transform";break}})();this.system={};this.system.retina=window.devicePixelRatio>1;this.system.webworker=typeof window.Worker!=="undefined";this.system.offline=typeof window.applicationCache!=="undefined";if(!window._NODE_){this.system.geolocation=typeof navigator.geolocation!=="undefined";this.system.pushstate=typeof window.history.pushState!=="undefined"}this.system.webcam=!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);this.system.language=window.navigator.userLanguage||window.navigator.language;this.system.webaudio=typeof window.AudioContext!=="undefined";try{this.system.localStorage=typeof window.localStorage!=="undefined"}catch(f){this.system.localStorage=false}this.system.fullscreen=typeof document[d.lowercase+"CancelFullScreen"]!=="undefined";this.system.os=(function(){if(g.detect("mac os")){return"mac"}else{if(g.detect("windows nt 6.3")){return"windows8.1"}else{if(g.detect("windows nt 6.2")){return"windows8"}else{if(g.detect("windows nt 6.1")){return"windows7"}else{if(g.detect("windows nt 6.0")){return"windowsvista"}else{if(g.detect("windows nt 5.1")){return"windowsxp"}else{if(g.detect("windows")){return"windows"}else{if(g.detect("linux")){return"linux"}}}}}}}}return"undetected"})();this.pixelRatio=window.devicePixelRatio;this.media={};this.media.audio=(function(){if(!!document.createElement("audio").canPlayType){return g.detect(["firefox","opera"])?"ogg":"mp3"}else{return false}})();this.media.video=(function(){var e=document.createElement("video");if(!!e.canPlayType){if(Device.mobile){return"mp4"}if(g.browser.chrome){return"webm"}if(g.browser.firefox||g.browser.opera){if(e.canPlayType('video/webm; codecs="vorbis,vp8"')){return"webm"}return"ogv"}return"mp4"}else{return false}})();this.graphics={};this.graphics.webgl=(function(){try{return !!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(h){}})();this.graphics.canvas=(function(){var e=document.createElement("canvas");return e.getContext?true:false})();this.styles={};this.styles.filter=a("filter");this.styles.blendMode=a("mix-blend-mode");this.styles.vendor=d.unprefixed?"":d.js;this.styles.vendorTransition=this.styles.vendor.length?this.styles.vendor+"Transition":"transition";this.styles.vendorTransform=this.styles.vendor.length?this.styles.vendor+"Transform":"transform";this.tween={};this.tween.transition=a("transition");this.tween.css2d=a("transform");this.tween.css3d=a("perspective");this.tween.complete=(function(){if(d.unprefixed){return"transitionend"}return d.lowercase+"TransitionEnd"})();this.test=function(e,h){this[e]=h()};function c(){if(!g.getFullscreen()){HydraEvents._fireEvent(HydraEvents.FULLSCREEN,{fullscreen:false});Render.stop(c)}}this.openFullscreen=function(e){e=e||__body;if(e&&g.system.fullscreen){if(e==__body){e.css({top:0})}e.div[d.lowercase+"RequestFullScreen"]();HydraEvents._fireEvent(HydraEvents.FULLSCREEN,{fullscreen:true});Render.start(c,10)}};this.closeFullscreen=function(){if(g.system.fullscreen){document[d.lowercase+"CancelFullScreen"]()}Render.stop(c)};this.getFullscreen=function(){if(g.browser.firefox){return document.mozFullScreen}return document[d.lowercase+"IsFullScreen"]}},"Static");Class(function DynamicObject(a){var b=DynamicObject.prototype;if(a){for(var c in a){this[c]=a[c]}}if(typeof b.tween!=="undefined"){return}b.tween=function(f,g,h,e,j,d){if(typeof e!=="number"){d=j;j=e;e=0}this.stopTween();if(typeof d!=="function"){d=null}if(typeof j!=="function"){j=null}this._tween=TweenManager.tween(this,f,g,h,e,d,j);return this._tween};b.stopTween=function(){var d=this._tween;if(d&&d.stop){d.stop()}};b.pause=function(){var d=this._tween;if(d&&d.pause){d.pause()}};b.resume=function(){var d=this._tween;if(d&&d.resume){d.resume()}};b.copy=function(e){var f=e&&e.get?e.get():new DynamicObject();for(var d in this){if(typeof this[d]==="number"){f[d]=this[d]}}return f};b.copyFrom=function(e){for(var d in e){if(typeof e[d]=="number"){this[d]=e[d]}}};b.copyTo=function(e){for(var d in e){if(typeof this[d]=="number"){e[d]=this[d]}}};b.clear=function(){for(var d in this){if(typeof this[d]!=="function"){delete this[d]}}return this}});Class(function ObjectPool(b,d){Inherit(this,Component);var c=this;var a=[];(function(){if(b){d=d||10;b=b||Object;for(var e=0;e<d;e++){a.push(new b())}}})();this.get=function(){return a.shift()};this.empty=function(){a.length=0};this.put=function(e){if(e){a.push(e)}};this.insert=function(f){if(typeof f.push==="undefined"){f=[f]}for(var e=0;e<f.length;e++){a.push(f[e])}};this.destroy=function(){for(var e=0;e<a.length;e++){if(a[e].destroy){a[e].destroy()}}a=null;return this._destroy()}});Class(function LinkedList(){var a=LinkedList.prototype;this.length=0;this.first=null;this.last=null;this.current=null;this.prev=null;if(typeof a.push!=="undefined"){return}a.push=function(b){if(!this.first){this.first=b;this.last=b;b.__prev=b;b.__next=b}else{b.__next=this.first;b.__prev=this.last;this.last.__next=b;this.last=b}this.length++};a.remove=function(b){if(!b||!b.__next){return}if(this.length<=1){this.empty()}else{if(b==this.first){this.first=b.__next;this.last.__next=this.first;this.first.__prev=this.last}else{if(b==this.last){this.last=b.__prev;this.last.__next=this.first;this.first.__prev=this.last}else{b.__prev.__next=b.__next;b.__next.__prev=b.__prev}}this.length--}b.__prev=null;b.__next=null};a.empty=function(){this.first=null;this.last=null;this.current=null;this.prev=null;this.length=0};a.start=function(){this.current=this.first;this.prev=this.current;return this.current};a.next=function(){if(!this.current){return}this.current=this.current.__next;if(this.length==1||this.prev.__next==this.first){return}this.prev=this.current;return this.current};a.destroy=function(){Utils.nullObject(this);return null}});Class(function Pact(){var a=this;Namespace(this);(function(){})();this.create=function(){return new a.Broadcaster(arguments)};this.batch=function(){return new a.Batch()}},"Static");Pact.Class(function Broadcaster(e){var g=this;var d,f;var b;var c=[];this._fire=this.fire=function(){if(b){return}b=true;var h=arguments;var j=false;Render.nextFrame(function(){if(f||d){var l=h[0];var k=h[1];if(l instanceof Error){if(f){f.apply(g,[l])}j=true}else{if(k instanceof Error){if(f){f.apply(g,[k])}j=true}else{if(!l&&k&&d){d.apply(g,[k]);j=true}if(!k&&l&&d){d.apply(g,[l]);j=true}}}}if(!j&&c.length){var m=c.shift();m.apply(g,h);if(c.length){b=false}}})};this.exec=function(){a(arguments);return this};this.then=function(h){c.push(h);return this};this.error=function(h){f=h;return this};this.success=function(h){d=h;return this};function a(l){var h=[];var k=l[0];for(var j=1;j<l.length;j++){h.push(l[j])}h.push(g._fire);k.apply(k,h)}if(e.length){a(e)}});Pact.Class(function Batch(){Inherit(this,Events);var e=this;var g=0;var a=[];var j=[];var k=[];var c=[];this.push=function(l){l.then(h).error(d).success(f);c.push(l)};this.timeout=function(){e.events.fire(HydraEvents.COMPLETE,{complete:a,success:j,error:k})};function f(){this.data=arguments;j.push(this);b();e.events.fire(HydraEvents.UPDATE)}function d(){this.data=arguments;k.push(this);b();e.events.fire(HydraEvents.UPDATE)}function h(){this.data=arguments;a.push(this);b();e.events.fire(HydraEvents.UPDATE)}function b(){g++;if(g==c.length){e.events.fire(HydraEvents.COMPLETE,{complete:a,success:j,error:k})}}});Class(function Mouse(){var c=this;var a;this.x=0;this.y=0;this.autoPreventClicks=false;function b(f){c.ready=true;if(f.windowsPointer){c.x=f.x;c.y=f.y}else{var d=Utils.touchEvent(f);c.x=d.x;c.y=d.y}}this.capture=function(d,e){if(a){return false}a=true;c.x=d||0;c.y=e||0;if(!Device.mobile){__window.bind("mousemove",b)}else{__window.bind("touchmove",b);__window.bind("touchstart",b)}};this.stop=function(){if(!a){return false}a=false;c.x=0;c.y=0;if(!Device.mobile){__window.unbind("mousemove",b)}else{__window.unbind("touchmove",b);__window.unbind("touchstart",b)}};this.preventClicks=function(){c._preventClicks=true;c.delayedCall(function(){c._preventClicks=false},500)};this.preventFireAfterClick=function(){c._preventFire=true}},"Static");Class(function Render(){var f=this;var c,j,a;var h=[];var o=Date.now();var m=new LinkedList();var l=new LinkedList();var d=m;var e=0;this.TIME=Date.now();this.TARGET_FPS=60;(function(){if(!THREAD){requestAnimationFrame(b);Hydra.ready(k)}})();function b(){var q=Date.now();var v=q-o;var s=0;var r=60;if(j){s=q-j;r=1000/s}j=q;f.FPS=r;f.TIME=q;f.DELTA=s;for(var p=h.length-1;p>-1;p--){var u=h[p];if(!u){continue}if(u.fps){e+=s>200?0:s;if(e<(1000/u.fps)){continue}e-=(1000/u.fps)}u(q,v,s,r,u.frameCount++)}if(d.length){g()}requestAnimationFrame(b)}function g(){var q=d;d=d==m?l:m;var r=q.start();while(r){var p=r;r();r=q.next();p.__prev=p.__next=p=null}q.empty()}function k(){HydraEvents._addEvent(HydraEvents.BROWSER_FOCUS,n,f)}function n(p){if(p.type=="focus"){j=Date.now()}}this.startRender=this.start=function(s,q){var r=true;var p=h.length-1;if(this.TARGET_FPS<60){q=this.TARGET_FPS}if(typeof q=="number"){s.fps=q}s.frameCount=0;if(h.indexOf(s)==-1){h.push(s)}};this.stopRender=this.stop=function(q){var p=h.indexOf(q);if(p>-1){h.splice(p,1)}};this.startTimer=function(p){a=p||"Timer";if(console.time&&!window._NODE_){console.time(a)}else{c=Date.now()}};this.stopTimer=function(){if(console.time&&!window._NODE_){console.timeEnd(a)}else{console.log("Render "+a+": "+(Date.now()-c))}};this.nextFrame=function(p){d.push(p)};this.setupTween=function(p){f.nextFrame(function(){f.nextFrame(p)})};window.defer=this.nextFrame},"Static");Class(function HydraEvents(){var b=[];var a={};this.BROWSER_FOCUS="hydra_focus";this.HASH_UPDATE="hydra_hash_update";this.COMPLETE="hydra_complete";this.PROGRESS="hydra_progress";this.UPDATE="hydra_update";this.LOADED="hydra_loaded";this.END="hydra_end";this.FAIL="hydra_fail";this.SELECT="hydra_select";this.ERROR="hydra_error";this.READY="hydra_ready";this.RESIZE="hydra_resize";this.CLICK="hydra_click";this.HOVER="hydra_hover";this.MESSAGE="hydra_message";this.ORIENTATION="orientation";this.BACKGROUND="background";this.BACK="hydra_back";this.PREVIOUS="hydra_previous";this.NEXT="hydra_next";this.RELOAD="hydra_reload";this.FULLSCREEN="hydra_fullscreen";this._checkDefinition=function(c){if(typeof c=="undefined"){throw"Undefined event"}};this._addEvent=function(f,g,c){if(this._checkDefinition){this._checkDefinition(f)}var d=new Object();d.evt=f;d.object=c;d.callback=g;b.push(d)};this._removeEvent=function(c,d){if(this._checkDefinition){this._checkDefinition(c)}defer(function(){for(var e=b.length-1;e>-1;e--){if(b[e].evt==c&&b[e].callback==d){b[e]=null;b.splice(e,1)}}})};this._destroyEvents=function(c){for(var d=b.length-1;d>-1;d--){if(b[d].object==c){b[d]=null;b.splice(d,1)}}};this._fireEvent=function(c,f){if(this._checkDefinition){this._checkDefinition(c)}var e=true;f=f||a;f.cancel=function(){e=false};for(var d=0;d<b.length;d++){if(b[d].evt==c){if(e){b[d].callback(f)}else{return false}}}};this._consoleEvents=function(){console.log(b)};this.createLocalEmitter=function(d){var c=new HydraEvents();d.on=c._addEvent;d.off=c._removeEvent;d.fire=c._fireEvent}},"Static");Class(function Events(c){this.events={};var b={};var a={};this.events.subscribe=function(d,e){HydraEvents._addEvent(d,!!e._fire?e._fire:e,c);return e};this.events.unsubscribe=function(d,e){HydraEvents._removeEvent(d,!!e._fire?e._fire:e)};this.events.fire=function(d,f,e){f=f||a;HydraEvents._checkDefinition(d);if(b[d]){f.target=f.target||c;b[d](f);f.target=null}else{if(!e){HydraEvents._fireEvent(d,f)}}};this.events.add=function(d,e){HydraEvents._checkDefinition(d);b[d]=!!e._fire?e._fire:e;return e};this.events.remove=function(d){HydraEvents._checkDefinition(d);if(b[d]){delete b[d]}};this.events.bubble=function(e,d){HydraEvents._checkDefinition(d);var f=this;e.events.add(d,function(g){f.fire(d,g)})};this.events.scope=function(d){c=d};this.events.destroy=function(){HydraEvents._destroyEvents(c);b=null;c=null;return null}});Class(function Mobile(){Inherit(this,Component);var r=this;var e;var f=true;var p={};var m,k,v,n,c,j,s;this.sleepTime=10000;this.scrollTop=0;this.autoResizeReload=true;if(Device.mobile){for(var u in Device.browser){Device.browser[u]=false}setInterval(q,250);this.phone=Device.mobile.phone;this.tablet=Device.mobile.tablet;this.orientation=Math.abs(window.orientation)==90?"landscape":"portrait";this.os=(function(){if(Device.detect("windows","iemobile")){return"Windows"}if(Device.detect(["ipad","iphone"])){return"iOS"}if(Device.detect(["android","kindle"])){return"Android"}if(Device.detect("blackberry")){return"Blackberry"}return"Unknown"})();this.version=(function(){try{if(r.os=="iOS"){var x=Device.agent.split("os ")[1].split("_");var b=x[0];var y=x[1].split(" ")[0];return Number(b+"."+y)}if(r.os=="Android"){var w=Device.agent.split("android ")[1].split(";")[0];if(w.length>3){w=w.slice(0,-2)}return Number(w)}if(r.os=="Windows"){if(Device.agent.strpos("rv:11")){return 11}return Number(Device.agent.split("windows phone ")[1].split(";")[0])}}catch(z){}return -1})();this.browser=(function(){if(r.os=="iOS"){if(Device.detect("crios")){return"Chrome"}if(Device.detect("safari")){return"Safari"}return"Unknown"}if(r.os=="Android"){if(Device.detect("chrome")){return"Chrome"}if(Device.detect("firefox")){return"Firefox"}return"Browser"}if(r.os=="Windows"){return"IE"}return"Unknown"})();Hydra.ready(function(){window.onresize=t;if(r.browser=="Safari"&&(!r.NativeCore||!r.NativeCore.active)){document.body.scrollTop=0;__body.css({height:"101%"})}Stage.width=document.body.clientWidth;Stage.height=document.body.clientHeight;r.orientation=Stage.width>Stage.height?"landscape":"portrait";if(!(r.NativeCore&&r.NativeCore.active)){window.addEventListener("touchstart",d)}else{Stage.css({overflow:"hidden"})}l();s=r.phone?"phone":"tablet";if(r.os=="Android"){r.delayedCall(t,50)}});function l(){Device.mobile.tablet=(function(){if(Stage.width>Stage.height){return document.body.clientWidth>900}else{return document.body.clientHeight>900}})();Device.mobile.phone=!Device.mobile.tablet;r.phone=Device.mobile.phone;r.tablet=Device.mobile.tablet}function t(){clearTimeout(r.fireResize);if(!r.allowScroll){document.body.scrollTop=0}r.fireResize=r.delayedCall(function(){Stage.width=document.body.clientWidth;Stage.height=document.body.clientHeight;l();var b=r.phone?"phone":"tablet";if(r.os=="iOS"&&b!=s&&r.autoResizeReload){window.location.reload()}r.orientation=Stage.width>Stage.height?"landscape":"portrait";r.events.fire(HydraEvents.RESIZE)},100)}function a(){r.delayedCall(function(){Stage.width=document.body.clientWidth;Stage.height=document.body.clientHeight;HydraEvents._fireEvent(HydraEvents.ORIENTATION,{orientation:r.orientation})},100);if(r.tablet&&r.browser=="Chrome"&&k){k=document.body.clientHeight}if(r.phone&&k){k=Stage.height;if(r.orientation=="portrait"&&r.browser=="Safari"){v=false;document.body.scrollTop=0;h(true);j=true;r.delayedCall(function(){j=false},100)}}}function d(y){var z=Utils.touchEvent(y);var x=y.target;var w=x.nodeName=="INPUT"||x.nodeName=="TEXTAREA"||x.nodeName=="SELECT"||x.nodeName=="A";if(r.allowScroll||w){return}if(k){if(!v){return}if(r.browser=="Chrome"&&z.y<50){y.stopPropagation();return}}if(f){return y.preventDefault()}var b=true;x=y.target;while(x.parentNode){if(x._scrollParent){b=false;p.target=x;p.y=z.y}x=x.parentNode}if(b){y.preventDefault()}}}function q(){var b=Date.now();if(e){if(b-e>r.sleepTime){r.events.fire(HydraEvents.BACKGROUND)}}e=b}function o(){m=true;f=false;k=Stage.height;__body.css({height:Stage.height*3});Stage.css({position:"fixed"});__window.bind("scroll",g);setInterval(h,1000)}function g(b){if(j){return}Stage.width=document.body.clientWidth;Stage.height=document.body.clientHeight;r.scrollTop=document.body.scrollTop;if(Stage.height!=c){r.events.fire(HydraEvents.RESIZE)}c=Stage.height;if(r.scrollTop>20){if(!v){r.events.fire(HydraEvents.FULLSCREEN,{fullscreen:true})}v=true;clearTimeout(r.changeHeight);r.changeHeight=r.delayedCall(function(){k=Stage.height},100)}h()}function h(b){if((document.body.clientHeight<k&&v)||b){Stage.height=document.body.clientHeight;v=false;k=Stage.height;document.body.scrollTop=0;t();r.events.fire(HydraEvents.FULLSCREEN,{fullscreen:false})}}this.Class=window.Class;this.fullscreen=function(){if(r.NativeCore&&r.NativeCore.active){return}if(r.os=="Android"){__window.bind("touchstart",function(){Device.openFullscreen()});return true}else{if(r.os=="iOS"&&r.version>=7){if(r.browser=="Chrome"||r.browser=="Safari"){o();return true}}}return false};this.overflowScroll=function(z,w){if(!Device.mobile){return false}var b=!!w.x;var B=!!w.y;var A={"-webkit-overflow-scrolling":"touch"};if((!b&&!B)||(b&&B)){A.overflow="scroll"}if(!b&&B){A.overflowY="scroll";A.overflowX="hidden"}if(b&&!B){A.overflowX="scroll";A.overflowY="hidden"}z.css(A);z.div._scrollParent=true;f=false;z.div._preventEvent=function(x){x.stopPropagation()};z.div.addEventListener("touchmove",z.div._preventEvent)};this.removeOverflowScroll=function(b){b.css({overflow:"hidden",overflowX:"",overflowY:"","-webkit-overflow-scrolling":""});b.div.removeEventListener("touchmove",b.div._preventEvent)};this.setOrientation=function(b){if(r.System&&r.NativeCore.active){r.System.orientation=r.System[b.toUpperCase()];return}if(window.screen){if(window.screen.lockOrientation){if(b=="landscape"){window.screen.lockOrientation("landscape-primary","landscape-secondary")}else{window.screen.lockOrientation("portrait-primary","portrait-secondary")}}if(window.screen.orientation){if(b=="landscape"){window.screen.orientation.lock("landscape-primary","landscape-secondary")}else{window.screen.orientation.lock("portrait-primary","portrait-secondary")}}}};this.isNative=function(){return r.NativeCore&&r.NativeCore.active}},"Static");Class(function Modules(){var d=this;var a={};(function(){defer(b)})();function b(){for(var e in a){for(var g in a[e]){var f=a[e][g];if(f._ready){continue}f._ready=true;if(f.exec){f.exec()}}}}function c(e,g){var f=a[e][g];if(!f._ready){f._ready=true;if(f.exec){f.exec()}}return f}this.push=function(e){};this.Module=function(g){var e=new g();var f=g.toString().slice(0,100).match(/function ([^\(]+)/);if(f){e._ready=true;f=f[1];a[f]={index:e}}else{if(!a[e.module]){a[e.module]={}}a[e.module][e.path]=e}};this.require=function(f){var e;if(!f.strpos("/")){e=f;f="index"}else{e=f.split("/")[0];f=f.replace(e+"/","")}return c(e,f).exports};window.Module=this.Module;if(!window._NODE_){window.requireNative=window.require;window.require=this.require}},"Static");Class(function Timer(){var e=this;var d;var b=[];(function(){Render.start(a)})();function a(g,h,k){for(var f=0;f<b.length;f++){var j=b[f];j.current+=k;if(j.current>=j.time){j();b.findAndRemove(j)}}}function c(g){for(var f=b.length-1;f>-1;f--){var h=b[f];if(h.ref==g){return h}}}d=window.clearTimeout;window.clearTimeout=function(f){var g=c(f);if(g){b.findAndRemove(g)}else{d(f)}};this.create=function(g,f){g.time=f;g.current=0;g.ref=Utils.timestamp();b.push(g);return g.ref}},"static");Class(function Matrix2(){var p=this;var l=Matrix2.prototype;var g,f,e,o,n,m,v,u,t;var s,r,q,d,c,a,k,j,h;this.type="matrix2";this.data=new Float32Array(9);(function(){w()})();function w(x){x=x||p.data;x[0]=1,x[1]=0,x[2]=0;x[3]=0,x[4]=1,x[5]=0;x[6]=0,x[7]=0,x[8]=1}function b(x){x=Math.abs(x)<0.000001?0:x;return x}if(typeof l.identity!=="undefined"){return}l.identity=function(x){w(x);return this};l.transformVector=function(A){var B=this.data;var z=A.x;var C=A.y;A.x=B[0]*z+B[1]*C+B[2];A.y=B[3]*z+B[4]*C+B[5];return A};l.setTranslation=function(z,y,x){var A=x||this.data;A[0]=1,A[1]=0,A[2]=z;A[3]=0,A[4]=1,A[5]=y;A[6]=0,A[7]=0,A[8]=1;return this};l.getTranslation=function(x){var y=this.data;x=x||new Vector2();x.x=y[2];x.y=y[5];return x};l.setScale=function(A,z,x){var y=x||this.data;y[0]=A,y[1]=0,y[2]=0;y[3]=0,y[4]=z,y[5]=0;y[6]=0,y[7]=0,y[8]=1;return this};l.setShear=function(A,z,x){var y=x||this.data;y[0]=1,y[1]=A,y[2]=0;y[3]=z,y[4]=1,y[5]=0;y[6]=0,y[7]=0,y[8]=1;return this};l.setRotation=function(y,x){var B=x||this.data;var A=Math.cos(y);var z=Math.sin(y);B[0]=A,B[1]=-z,B[2]=0;B[3]=z,B[4]=A,B[5]=0;B[6]=0,B[7]=0,B[8]=1;return this};l.setTRS=function(z,x,y,E,D){var C=this.data;var B=Math.cos(y);var A=Math.sin(y);C[0]=B*E,C[1]=-A*D,C[2]=z;C[3]=A*E,C[4]=B*D,C[5]=x;C[6]=0,C[7]=0,C[8]=1;return this};l.translate=function(y,x){this.identity(Matrix2.__TEMP__);this.setTranslation(y,x,Matrix2.__TEMP__);return this.multiply(Matrix2.__TEMP__)};l.rotate=function(x){this.identity(Matrix2.__TEMP__);this.setTranslation(x,Matrix2.__TEMP__);return this.multiply(Matrix2.__TEMP__)};l.scale=function(y,x){this.identity(Matrix2.__TEMP__);this.setScale(y,x,Matrix2.__TEMP__);return this.multiply(Matrix2.__TEMP__)};l.shear=function(y,x){this.identity(Matrix2.__TEMP__);this.setRotation(y,x,Matrix2.__TEMP__);return this.multiply(Matrix2.__TEMP__)};l.multiply=function(y){var z=this.data;var x=y.data||y;g=z[0],f=z[1],e=z[2];o=z[3],n=z[4],m=z[5];v=z[6],u=z[7],t=z[8];s=x[0],r=x[1],q=x[2];d=x[3],c=x[4],a=x[5];k=x[6],j=x[7],h=x[8];z[0]=g*s+f*d+e*k;z[1]=g*r+f*c+e*j;z[2]=g*q+f*a+e*h;z[3]=o*s+n*d+m*k;z[4]=o*r+n*c+m*j;z[5]=o*q+n*a+m*h;return this};l.inverse=function(y){y=y||this;var z=y.data;var x=this.data;g=z[0],f=z[1],e=z[2];o=z[3],n=z[4],m=z[5];v=z[6],u=z[7],t=z[8];var A=y.determinant();if(Math.abs(A)<1e-7){}var B=1/A;x[0]=(n*t-u*m)*B;x[1]=(e*u-f*t)*B;x[2]=(f*m-e*n)*B;x[3]=(m*v-o*t)*B;x[4]=(g*t-e*v)*B;x[5]=(o*e-g*m)*B;x[6]=(o*u-v*n)*B;x[7]=(v*f-g*u)*B;x[8]=(g*n-o*f)*B;return y};l.determinant=function(){var x=this.data;g=x[0],f=x[1],e=x[2];o=x[3],n=x[4],m=x[5];v=x[6],u=x[7],t=x[8];return g*(n*t-u*m)-f*(o*t-m*v)+e*(o*u*n*v)};l.copyTo=function(y){var z=this.data;var x=y.data||y;x[0]=z[0],x[1]=z[1],x[2]=z[2];x[3]=z[3],x[4]=z[4],x[5]=z[5];x[6]=z[6],x[7]=z[7],x[8]=z[8];return y};l.copyFrom=function(y){var z=this.data;var x=y.data||y;x[0]=z[0],x[1]=z[1],x[2]=z[2];x[3]=z[3],x[4]=z[4],x[5]=z[5];x[6]=z[6],x[7]=z[7],x[8]=z[8];return this};l.getCSS=function(x){var y=this.data;if(Device.tween.css3d&&!x){return"matrix3d("+b(y[0])+", "+b(y[3])+", 0, 0, "+b(y[1])+", "+b(y[4])+", 0, 0, 0, 0, 1, 0, "+b(y[2])+", "+b(y[5])+", 0, 1)"}else{return"matrix("+b(y[0])+", "+b(y[3])+", "+b(y[1])+", "+b(y[4])+", "+b(y[2])+", "+b(y[5])+")"}}},function(){Matrix2.__TEMP__=new Matrix2().data});Class(function Vector2(c,a){var d=this;var b=Vector2.prototype;this.x=typeof c=="number"?c:0;this.y=typeof a=="number"?a:0;this.type="vector2";if(typeof b.set!=="undefined"){return}b.set=function(e,f){this.x=e;this.y=f;return this};b.clear=function(){this.x=0;this.y=0;return this};b.copyTo=function(e){e.x=this.x;e.y=this.y;return this};b.copyFrom=b.copy=function(e){this.x=e.x;this.y=e.y;return this};b.addVectors=function(f,e){this.x=f.x+e.x;this.y=f.y+e.y;return this};b.subVectors=function(f,e){this.x=f.x-e.x;this.y=f.y-e.y;return this};b.multiplyVectors=function(f,e){this.x=f.x*e.x;this.y=f.y*e.y;return this};b.add=function(e){this.x+=e.x;this.y+=e.y;return this};b.sub=function(e){this.x-=e.x;this.y-=e.y};b.multiply=function(e){this.x*=e;this.y*=e;return this};b.divide=function(e){this.x/=e;this.y/=e;return this};b.lengthSq=function(){return(this.x*this.x+this.y*this.y)||0.00001};b.length=function(){return Math.sqrt(this.lengthSq())};b.setLength=function(e){this.normalize().multiply(e);return this};b.normalize=function(){var e=this.length();this.x/=e;this.y/=e;return this};b.perpendicular=function(h,f){var g=this.x;var e=this.y;this.x=-e;this.y=g;return this};b.lerp=function(e,f){this.x+=(e.x-this.x)*f;this.y+=(e.y-this.y)*f;return this};b.interp=function(g,k,m){var e=0;var j=TweenManager.Interpolation.convertEase(m);var h=Vector2.__TEMP__;h.subVectors(this,g);var l=Utils.clamp(Utils.range(h.lengthSq(),0,(5000*5000),1,0),0,1)*(k/10);if(typeof j==="function"){e=j(l)}else{e=TweenManager.Interpolation.solve(j,l)}this.x+=(g.x-this.x)*e;this.y+=(g.y-this.y)*e};b.setAngleRadius=function(e,f){this.x=Math.cos(e)*f;this.y=Math.sin(e)*f;return this};b.addAngleRadius=function(e,f){this.x+=Math.cos(e)*f;this.y+=Math.sin(e)*f;return this};b.clone=function(){return new Vector2(this.x,this.y)};b.dot=function(f,e){e=e||this;return(f.x*e.x+f.y*e.y)};b.distanceTo=function(g,h){var f=this.x-g.x;var e=this.y-g.y;if(!h){return Math.sqrt(f*f+e*e)}return f*f+e*e};b.solveAngle=function(f,e){if(!e){e=this}return Math.atan2(f.y-e.y,f.x-e.x)};b.equals=function(e){return this.x==e.x&&this.y==e.y};b.console=function(){console.log(this.x,this.y)}},function(){Vector2.__TEMP__=new Vector2()});Class(function Vector3(d,b,a,e){var f=this;var c=Vector3.prototype;this.x=typeof d==="number"?d:0;this.y=typeof b==="number"?b:0;this.z=typeof a==="number"?a:0;this.w=typeof e==="number"?e:1;this.type="vector3";if(typeof c.set!=="undefined"){return}c.set=function(g,k,j,h){this.x=g||0;this.y=k||0;this.z=j||0;this.w=h||1;return this};c.clear=function(){this.x=0;this.y=0;this.z=0;this.w=1;return this};c.copyTo=function(g){g.x=this.x;g.y=this.y;g.z=this.z;g.w=this.w;return g};c.copyFrom=c.copy=function(g){this.x=g.x||0;this.y=g.y||0;this.z=g.z||0;this.w=g.w||1;return this};c.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z};c.length=function(){return Math.sqrt(this.lengthSq())};c.normalize=function(){var g=1/this.length();this.set(this.x*g,this.y*g,this.z*g);return this};c.setLength=function(g){this.normalize().multiply(g);return this};c.addVectors=function(h,g){this.x=h.x+g.x;this.y=h.y+g.y;this.z=h.z+g.z;return this};c.subVectors=function(h,g){this.x=h.x-g.x;this.y=h.y-g.y;this.z=h.z-g.z;return this};c.multiplyVectors=function(h,g){this.x=h.x*g.x;this.y=h.y*g.y;this.z=h.z*g.z;return this};c.add=function(g){this.x+=g.x;this.y+=g.y;this.z+=g.z;return this};c.sub=function(g){this.x-=g.x;this.y-=g.y;this.z-=g.z;return this};c.multiply=function(g){this.x*=g;this.y*=g;this.z*=g;return this};c.divide=function(g){this.x/=g;this.y/=g;this.z/=g;return this};c.limit=function(g){if(this.length()>g){this.normalize();this.multiply(g)}};c.heading2D=function(){var g=Math.atan2(-this.y,this.x);return -g};c.lerp=function(g,h){this.x+=(g.x-this.x)*h;this.y+=(g.y-this.y)*h;this.z+=(g.z-this.z)*h;return this};c.deltaLerp=function(g,k,l){l=l||1;for(var h=0;h<l;h++){var j=k;this.x+=((g.x-this.x)*k);this.y+=((g.y-this.y)*k);this.z+=((g.z-this.z)*k)}return this};c.interp=function(h,l,n,m){if(!Vector3.__TEMP__){Vector3.__TEMP__=new Vector3()}m=m||5000;var g=0;var k=TweenManager.Interpolation.convertEase(n);var j=Vector3.__TEMP__;j.subVectors(this,h);var m=Utils.clamp(Utils.range(j.lengthSq(),0,(m*m),1,0),0,1)*(l/10);if(typeof k==="function"){g=k(m)}else{g=TweenManager.Interpolation.solve(k,m)}this.x+=(h.x-this.x)*g;this.y+=(h.y-this.y)*g;this.z+=(h.z-this.z)*g};c.setAngleRadius=function(g,h){this.x=Math.cos(g)*h;this.y=Math.sin(g)*h;this.z=Math.sin(g)*h;return this};c.addAngleRadius=function(g,h){this.x+=Math.cos(g)*h;this.y+=Math.sin(g)*h;this.z+=Math.sin(g)*h;return this};c.dot=function(h,g){g=g||this;return h.x*g.x+h.y*g.y+h.z*g.z};c.clone=function(){return new Vector3(this.x,this.y,this.z)};c.cross=function(j,h){if(!h){h=this}var g=j.y*h.z-j.z*h.y;var l=j.z*h.x-j.x*h.z;var k=j.x*h.y-j.y*h.x;this.set(g,l,k,this.w);return this};c.distanceTo=function(k,l){var j=this.x-k.x;var h=this.y-k.y;var g=this.z-k.z;if(!l){return Math.sqrt(j*j+h*h+g*g)}return j*j+h*h+g*g};c.solveAngle=function(h,g){if(!g){g=this}return Math.acos(h.dot(g)/(h.length()*g.length()))};c.equals=function(g){return this.x==g.x&&this.y==g.y&&this.z==g.z};c.console=function(){console.log(this.x,this.y,this.z)}},function(){Vector3.__TEMP__=new Vector3()});Class(function Interaction(){Namespace(this)},"static");Interaction.Class(function Input(j){Inherit(this,Component);var e=this;var k=new Vector2();var f=new Vector2();var c=new Vector2();var a=Render.TIME;var b=Render.TIME;this.velocity=new Vector2();(function(){if(j instanceof HydraObject){g()}})();function g(){j.bind("touchstart",d)}function d(m){e.velocity.clear();k.copyFrom(m);__window.bind("touchmove",h);__window.bind("touchend",l);__window.bind("touchcancel",l);__window.bind("contextmenu",l);if(e.onStart){defer(function(){if(e.onStart){e.onStart(m)}})}}function h(m){f.subVectors(m,k);a=(Render.TIME-b)||0.01;if(a>=16){e.velocity.subVectors(m,c);e.velocity.divide(a);b=Render.TIME;c.copyFrom(m)}if(e.onUpdate){defer(function(){if(e.onUpdate){e.onUpdate(f,m)}})}}function l(m){__window.unbind("touchmove",h);__window.unbind("touchend",l);__window.unbind("touchcancel",l);__window.unbind("contextmenu",l);if(e.onEnd){defer(function(){if(e.onEnd){e.onEnd(m)}})}}this.attach=function(m){if(j instanceof HydraObject){j.unbind("touchstart",d)}j=m;g()};this.touchStart=function(m){d({x:Mouse.x,y:Mouse.y})};this.end=function(){l()};this.destroy=function(){j.unbind("touchstart",d);__window.unbind("touchmove",h);__window.unbind("touchend",l);__window.unbind("touchcancel",l);return this._destroy()}});Class(function TweenManager(){Namespace(this);var f=this;var a=[];(function(){if(window.Hydra){Hydra.ready(b);Render.startRender(c)}})();function b(){f._dynamicPool=new ObjectPool(DynamicObject,100);f._arrayPool=new ObjectPool(Array,100);f._dynamicPool.debug=true}function c(h){for(var g=0;g<a.length;g++){a[g].update(h)}}function e(j){var g=j.split("(")[1].slice(0,-1).split(",");for(var h=0;h<g.length;h++){g[h]=parseFloat(g[h])}return g}function d(g){var j=f.CSSEases;for(var h=j.length-1;h>-1;h--){if(j[h].name==g){return j[h]}}return false}this._addMathTween=function(g){a.push(g)};this._removeMathTween=function(g){a.findAndRemove(g)};this._detectTween=function(h,j,k,l,g,m){if(l==="spring"){return new SpringTween(h,j,k,l,g,m)}if(!f.useCSSTrans(j,l,h)){return new FrameTween(h,j,k,l,g,m)}else{if(Device.tween.webAnimation){return new CSSWebAnimation(h,j,k,l,g,m)}else{return new CSSTransition(h,j,k,l,g,m)}}};this.tween=function(m,k,l,n,h,g,o,j){if(typeof h!=="number"){o=g;g=h;h=0}if(n==="spring"){return new SpringTween(m,k,l,n,h,o,g)}else{return new MathTween(m,k,l,n,h,o,g,j)}};this.iterate=function(p,q,h,j,k,n,r){if(typeof n!=="number"){r=n;n=0}q=new DynamicObject(q);if(!p.length){throw"TweenManager.iterate :: array is empty"}var o=p.length;for(var m=0;m<o;m++){var l=p[m];var g=m==o-1?r:null;l.tween(q.copy(),h,j,n+(k*m),g)}};this.clearTween=function(k){if(k._mathTween&&k._mathTween.stop){k._mathTween.stop()}if(k._mathTweens){var j=k._mathTweens;for(var h=0;h<j.length;h++){var g=j[h];if(g&&g.stop){g.stop()}}k._mathTweens=null}};this.clearCSSTween=function(g){if(g&&!g._cssTween&&g.div._transition){g.div.style[Device.styles.vendorTransition]="";g.div._transition=false;g._cssTween=null}};this.checkTransform=function(h){var g=f.Transforms.indexOf(h);return g>-1};this.addCustomEase=function(j){var h=true;if(typeof j!=="object"||!j.name||!j.curve){throw"TweenManager :: addCustomEase requires {name, curve}"}for(var g=f.CSSEases.length-1;g>-1;g--){if(j.name==f.CSSEases[g].name){h=false}}if(h){if(j.curve.charAt(0).toLowerCase()=="m"){j.path=new EasingPath(j.curve)}else{j.values=e(j.curve)}f.CSSEases.push(j)}return j};this.getEase=function(h,g){if(Array.isArray(h)){var k=d(h[0]);var j=d(h[1]);if(!k||!j){throw"Multi-ease tween missing values "+JSON.stringify(h)}if(!k.values){k.values=e(k.curve)}if(!j.values){j.values=e(j.curve)}if(g){return[k.values[0],k.values[1],j.values[2],j.values[3]]}return"cubic-bezier("+k.values[0]+","+k.values[1]+","+j.values[2]+","+j.values[3]+")"}else{var l=d(h);if(!l){return false}if(g){return l.path?l.path.solve:l.values}else{return l.curve}}};this.inspectEase=function(g){return d(g)};this.getAllTransforms=function(g){var k={};for(var h=f.Transforms.length-1;h>-1;h--){var j=f.Transforms[h];var l=g[j];if(l!==0&&typeof l==="number"){k[j]=l}}return k};this.parseTransform=function(j){var h="";var l="";if(j.perspective>0){h+="perspective("+j.perspective+"px)"}if(typeof j.x!=="undefined"||typeof j.y!=="undefined"||typeof j.z!=="undefined"){var g=(j.x||0);var m=(j.y||0);var k=(j.z||0);l+=g+"px, ";l+=m+"px";if(Device.tween.css3d){l+=", "+k+"px";h+="translate3d("+l+")"}else{h+="translate("+l+")"}}if(typeof j.scale!=="undefined"){h+="scale("+j.scale+")"}else{if(typeof j.scaleX!=="undefined"){h+="scaleX("+j.scaleX+")"}if(typeof j.scaleY!=="undefined"){h+="scaleY("+j.scaleY+")"}}if(typeof j.rotation!=="undefined"){h+="rotate("+j.rotation+"deg)"}if(typeof j.rotationX!=="undefined"){h+="rotateX("+j.rotationX+"deg)"}if(typeof j.rotationY!=="undefined"){h+="rotateY("+j.rotationY+"deg)"}if(typeof j.rotationZ!=="undefined"){h+="rotateZ("+j.rotationZ+"deg)"}if(typeof j.skewX!=="undefined"){h+="skewX("+j.skewX+"deg)"}if(typeof j.skewY!=="undefined"){h+="skewY("+j.skewY+"deg)"}return h};this.interpolate=function(g,j,k){var h=f.Interpolation.convertEase(k);return g*(typeof h=="function"?h(j):f.Interpolation.solve(h,j))};this.interpolateValues=function(l,g,j,k){var h=f.Interpolation.convertEase(k);return l+(g-l)*(typeof h=="function"?h(j):f.Interpolation.solve(h,j))}},"Static");(function(){TweenManager.Transforms=["scale","scaleX","scaleY","x","y","z","rotation","rotationX","rotationY","rotationZ","skewX","skewY","perspective",];TweenManager.CSSEases=[{name:"easeOutCubic",curve:"cubic-bezier(0.215, 0.610, 0.355, 1.000)"},{name:"easeOutQuad",curve:"cubic-bezier(0.250, 0.460, 0.450, 0.940)"},{name:"easeOutQuart",curve:"cubic-bezier(0.165, 0.840, 0.440, 1.000)"},{name:"easeOutQuint",curve:"cubic-bezier(0.230, 1.000, 0.320, 1.000)"},{name:"easeOutSine",curve:"cubic-bezier(0.390, 0.575, 0.565, 1.000)"},{name:"easeOutExpo",curve:"cubic-bezier(0.190, 1.000, 0.220, 1.000)"},{name:"easeOutCirc",curve:"cubic-bezier(0.075, 0.820, 0.165, 1.000)"},{name:"easeOutBack",curve:"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},{name:"easeInCubic",curve:"cubic-bezier(0.550, 0.055, 0.675, 0.190)"},{name:"easeInQuad",curve:"cubic-bezier(0.550, 0.085, 0.680, 0.530)"},{name:"easeInQuart",curve:"cubic-bezier(0.895, 0.030, 0.685, 0.220)"},{name:"easeInQuint",curve:"cubic-bezier(0.755, 0.050, 0.855, 0.060)"},{name:"easeInSine",curve:"cubic-bezier(0.470, 0.000, 0.745, 0.715)"},{name:"easeInCirc",curve:"cubic-bezier(0.600, 0.040, 0.980, 0.335)"},{name:"easeInBack",curve:"cubic-bezier(0.600, -0.280, 0.735, 0.045)"},{name:"easeInOutCubic",curve:"cubic-bezier(0.645, 0.045, 0.355, 1.000)"},{name:"easeInOutQuad",curve:"cubic-bezier(0.455, 0.030, 0.515, 0.955)"},{name:"easeInOutQuart",curve:"cubic-bezier(0.770, 0.000, 0.175, 1.000)"},{name:"easeInOutQuint",curve:"cubic-bezier(0.860, 0.000, 0.070, 1.000)"},{name:"easeInOutSine",curve:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},{name:"easeInOutExpo",curve:"cubic-bezier(1.000, 0.000, 0.000, 1.000)"},{name:"easeInOutCirc",curve:"cubic-bezier(0.785, 0.135, 0.150, 0.860)"},{name:"easeInOutBack",curve:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},{name:"easeInOut",curve:"cubic-bezier(.42,0,.58,1)"},{name:"linear",curve:"linear"}];TweenManager.useCSSTrans=function(b,c,a){if(b.math){return false}if(typeof c==="string"&&(c.strpos("Elastic")||c.strpos("Bounce"))){return false}if(a.multiTween||TweenManager.inspectEase(c).path){return false}if(!Device.tween.transition){return false}return true}})();Class(function CSSTransition(g,p,t,f,k,j){var o=this;var e,l,q,b;var h,u;this.playing=true;(function(){if(typeof t!=="number"){throw"CSSTween Requires object, props, time, ease"}d();if(typeof f=="object"&&!Array.isArray(f)){w()}else{a()}})();function v(){return !o||o.kill||!g||!g.div}function d(){var x=TweenManager.getAllTransforms(g);var z=[];for(var y in p){if(TweenManager.checkTransform(y)){x.use=true;x[y]=p[y];delete p[y]}else{if(typeof p[y]==="number"||y.strpos("-")){z.push(y)}}}if(x.use){z.push(Device.transformProperty)}delete x.use;e=x;l=z}function w(){r();var y=0;var D=function(P,J,N,O,M,K){var L=M[H];if(L){P+=L}return TweenManager.interpolateValues(P,J,N,O)};q=[];b=0;for(var z in f){var G=z.strpos("%")?Number(z.replace("%",""))/100:((Number(z)+1)/f.length);if(isNaN(G)){continue}var C=f[z];b++;var A={};var F={};var I=q[q.length-1];var x=I?I.props:{};var E=!I;for(var H in e){if(!h[H]){h[H]=H.strpos("scale")?1:0}A[H]=D(h[H],e[H],G,C,x,H);if(E){x[H]=h[H]}}for(H in p){F[H]=D(u[H],p[H],G,C,x,H);if(E){x[H]=u[H]}}var B=(G*t)-y;y+=B;q.push({percent:G,ease:C,transform:A,props:F,delay:b==1?k:0,time:B})}a(q.shift())}function r(){h=TweenManager.getAllTransforms(g);var x=TweenManager.parseTransform(h);if(!x.length){for(var z=TweenManager.Transforms.length-1;z>-1;z--){var y=TweenManager.Transforms[z];h[y]=y=="scale"?1:0}}u={};for(y in p){u[y]=g.css(y)}}function a(y){if(v()){return}if(g._cssTween){g._cssTween.kill=true}g._cssTween=o;g.div._transition=true;var x=(function(){if(!y){return s(t,f,k)}else{return s(y.time,y.ease,y.delay)}})();g.willChange(x.props);var C=y?y.time:t;var z=y?y.delay:k;var B=y?y.props:p;var A=y?y.transform:e;Render.setupTween(function(){if(v()){return}g.div.style[Device.styles.vendorTransition]=x.transition;o.playing=true;if(Device.browser.safari){Render.setupTween(function(){if(v()){return}g.css(B);g.transform(A)})}else{g.css(B);g.transform(A)}if(j||q){Timer.create(function(){if(v()){return}if(!q){c();if(j){j()}}else{m()}},C+z)}else{g.div.addEventListener(Device.tween.complete,n,false)}})}function m(){if(v()){return}var y=q.shift();if(!y){c();if(j){j}}else{var x=s(y.time,y.ease,y.delay);g.div.style[Device.styles.vendorTransition]=x.transition;g.css(y.props);g.transform(y.transform);Timer.create(m,y.time)}}function s(C,E,z){var B="";var D="";var x=l.length;for(var A=0;A<x;A++){var y=l[A];B+=(B.length?", ":"")+y;D+=(D.length?", ":"")+y+" "+C+"ms "+TweenManager.getEase(E)+" "+z+"ms"}return{props:B,transition:D}}function c(){if(g&&g.div){g.div.removeEventListener(Device.tween.complete,n,false)}if(v()){return}o.playing=false;g._cssTween=null;g.willChange(null);g=p=null;o=null;Utils.nullObject(this)}function n(){if(!j&&o.playing){c()}}this.stop=function(){if(g&&g.div){g.div.removeEventListener(Device.tween.complete,n,false)}if(!this.playing){return}this.kill=true;this.playing=false;g.div.style[Device.styles.vendorTransition]="";g.div._transition=false;g.willChange(null);g._cssTween=null;o=null;Utils.nullObject(this)}});Class(function FrameTween(h,s,u,f,n,m,l){var q=this;var v,c,j,x;var r,a,e;var d,g;this.playing=true;(function(){if(typeof f==="object"){f="easeOutCubic"}if(h&&s){if(typeof u!=="number"){throw"FrameTween Requires object, props, time, ease"}t();b()}})();function w(){return q.kill||!h||!h.div}function t(){if(s.math){delete s.math}if(Device.tween.transition&&h.div._transition){h.div.style[Device.styles.vendorTransition]="";h.div._transition=false}v=new DynamicObject();c=new DynamicObject();j=new DynamicObject();x=new DynamicObject();if(!h.multiTween){if(typeof s.x==="undefined"){s.x=h.x}if(typeof s.y==="undefined"){s.y=h.y}if(typeof s.z==="undefined"){s.z=h.z}}for(var z in s){if(TweenManager.checkTransform(z)){r=true;j[z]=h[z]||(z=="scale"?1:0);c[z]=s[z]}else{a=true;var y=s[z];if(typeof y==="string"){h.div.style[z]=y}else{if(typeof y==="number"){x[z]=Number(h.css(z));v[z]=y}}}}}function b(){if(h._cssTween&&!l&&!h.multiTween){h._cssTween.kill=true}if(h.multiTween){if(!h._cssTweens){h._cssTweens=[]}h._cssTweens.push(q)}h._cssTween=q;q.playing=true;s=x.copy();e=j.copy();if(a){d=TweenManager.tween(s,v,u,f,n,p,k,l)}if(r){g=TweenManager.tween(e,c,u,f,n,(!a?p:null),(!a?k:null),l)}}function o(){if(h._cssTweens){h._cssTweens.findAndRemove(q)}q.playing=false;h._cssTween=null;h=s=null}function k(){if(w()){return}if(a){h.css(s)}if(r){if(h.multiTween){for(var y in e){if(typeof e[y]==="number"){h[y]=e[y]}}h.transform()}else{h.transform(e)}}}function p(){if(q.playing){o();if(m){m()}}}this.stop=function(){if(!this.playing){return}if(d&&d.stop){d.stop()}if(g&&g.stop){g.stop()}o()};this.interpolate=function(y){if(d){d.interpolate(y)}if(g){g.interpolate(y)}k()};this.setEase=function(y){if(d){d.setEase(y)}if(g){g.setEase(y)}}});Class(function CSSWebAnimation(j,s,z,e,m,l){var r=this;var x,w,f,v;var p,h,c,k;(function(){if(j._cssTween){j._cssTween.stop()}d();t();y();u();Render.setupTween(b)})();function d(){var D=[];var B=false;for(var C in s){if(TweenManager.checkTransform(C)){B=true}else{if(typeof s[C]==="number"||C.strpos("-")){D.push(C)}}}if(B){D.push(Device.transformProperty)}j.willChange(D);if(j._cssTween){j._cssTween.kill=true}j._cssTween=r;j.div._transition=true}function t(){var B=TweenManager.getAllTransforms(j);for(var C in s){if(TweenManager.checkTransform(C)){B[C]=s[C];delete s[C]}}c=B;x=TweenManager.parseTransform(B)}function y(){k=TweenManager.getAllTransforms(j);var B=TweenManager.parseTransform(k);if(!B.length){B="translate3d(0, 0, 0)";for(var D=TweenManager.Transforms.length-1;D>-1;D--){var C=TweenManager.Transforms[D];k[C]=C=="scale"?1:0}}w={};if(x){w.transform=B}for(var C in s){w[C]=j.css(C)}}function u(){f={};if(x){f.transform=x}for(var B in s){f[B]=s[B]}}function b(){r.playing=true;v=j.div.animate([w,f],{duration:z,delay:m,easing:TweenManager.getEase(e),fill:"forwards"});v.addEventListener("finish",q)}function A(){return !r||r.kill||!j||!j.div}function o(){r.playing=false;j=s=null;r=null;v=null;Utils.nullObject(this)}function a(){j.css(s);j.transform(c)}function g(D,B,C){return TweenManager.interpolate(D+(B-D),C,e)}function n(){if(!v){return}var B=v.currentTime/z;var C={};var E={};for(var D in c){C[D]=g(k[D],c[D],B)}for(D in s){E[D]=TweenManager.interpolate(w[D],s[D],B)}j.css(E);j.transform(C)}function q(){if(A()){return}a();j.willChange(null);if(l){Render.nextFrame(l)}o()}this.stop=function(){if(!r||!r.playing){return}n();r.kill=true;r.playing=false;j.willChange(null);v.pause();o()}});TweenManager.Class(function Interpolation(){function d(j,g,h){return((a(g,h)*j+f(g,h))*j+e(g))*j}function b(k,n,l){var h=k;for(var j=0;j<4;j++){var m=c(h,n,l);if(m==0){return h}var g=d(h,n,l)-k;h-=g/m}return h}function c(j,g,h){return 3*a(g,h)*j*j+2*f(g,h)*j+e(g)}function a(g,h){return 1-3*h+3*g}function f(g,h){return 3*h-6*g}function e(g){return 3*g}this.convertEase=function(j){var g=(function(){switch(j){case"easeInQuad":return TweenManager.Interpolation.Quad.In;break;case"easeInCubic":return TweenManager.Interpolation.Cubic.In;break;case"easeInQuart":return TweenManager.Interpolation.Quart.In;break;case"easeInQuint":return TweenManager.Interpolation.Quint.In;break;case"easeInSine":return TweenManager.Interpolation.Sine.In;break;case"easeInExpo":return TweenManager.Interpolation.Expo.In;break;case"easeInCirc":return TweenManager.Interpolation.Circ.In;break;case"easeInElastic":return TweenManager.Interpolation.Elastic.In;break;case"easeInBack":return TweenManager.Interpolation.Back.In;break;case"easeInBounce":return TweenManager.Interpolation.Bounce.In;break;case"easeOutQuad":return TweenManager.Interpolation.Quad.Out;break;case"easeOutCubic":return TweenManager.Interpolation.Cubic.Out;break;case"easeOutQuart":return TweenManager.Interpolation.Quart.Out;break;case"easeOutQuint":return TweenManager.Interpolation.Quint.Out;break;case"easeOutSine":return TweenManager.Interpolation.Sine.Out;break;case"easeOutExpo":return TweenManager.Interpolation.Expo.Out;break;case"easeOutCirc":return TweenManager.Interpolation.Circ.Out;break;case"easeOutElastic":return TweenManager.Interpolation.Elastic.Out;break;case"easeOutBack":return TweenManager.Interpolation.Back.Out;break;case"easeOutBounce":return TweenManager.Interpolation.Bounce.Out;break;case"easeInOutQuad":return TweenManager.Interpolation.Quad.InOut;break;case"easeInOutCubic":return TweenManager.Interpolation.Cubic.InOut;break;case"easeInOutQuart":return TweenManager.Interpolation.Quart.InOut;break;case"easeInOutQuint":return TweenManager.Interpolation.Quint.InOut;break;case"easeInOutSine":return TweenManager.Interpolation.Sine.InOut;break;case"easeInOutExpo":return TweenManager.Interpolation.Expo.InOut;break;case"easeInOutCirc":return TweenManager.Interpolation.Circ.InOut;break;case"easeInOutElastic":return TweenManager.Interpolation.Elastic.InOut;break;case"easeInOutBack":return TweenManager.Interpolation.Back.InOut;break;case"easeInOutBounce":return TweenManager.Interpolation.Bounce.InOut;break;case"linear":return TweenManager.Interpolation.Linear.None;break}})();if(!g){var h=TweenManager.getEase(j,true);if(h){g=h}else{g=TweenManager.Interpolation.Cubic.Out}}return g};this.solve=function(h,g){if(h[0]==h[1]&&h[2]==h[3]){return g}return d(b(g,h[0],h[2]),h[1],h[3])};this.Linear={None:function(g){return g}};this.Quad={In:function(g){return g*g},Out:function(g){return g*(2-g)},InOut:function(g){if((g*=2)<1){return 0.5*g*g}return -0.5*(--g*(g-2)-1)}};this.Cubic={In:function(g){return g*g*g},Out:function(g){return --g*g*g+1},InOut:function(g){if((g*=2)<1){return 0.5*g*g*g}return 0.5*((g-=2)*g*g+2)}};this.Quart={In:function(g){return g*g*g*g},Out:function(g){return 1- --g*g*g*g},InOut:function(g){if((g*=2)<1){return 0.5*g*g*g*g}return -0.5*((g-=2)*g*g*g-2)}};this.Quint={In:function(g){return g*g*g*g*g},Out:function(g){return --g*g*g*g*g+1},InOut:function(g){if((g*=2)<1){return 0.5*g*g*g*g*g}return 0.5*((g-=2)*g*g*g*g+2)}};this.Sine={In:function(g){return 1-Math.cos(g*Math.PI/2)},Out:function(g){return Math.sin(g*Math.PI/2)},InOut:function(g){return 0.5*(1-Math.cos(Math.PI*g))}};this.Expo={In:function(g){return g===0?0:Math.pow(1024,g-1)},Out:function(g){return g===1?1:1-Math.pow(2,-10*g)},InOut:function(g){if(g===0){return 0}if(g===1){return 1}if((g*=2)<1){return 0.5*Math.pow(1024,g-1)}return 0.5*(-Math.pow(2,-10*(g-1))+2)}};this.Circ={In:function(g){return 1-Math.sqrt(1-g*g)},Out:function(g){return Math.sqrt(1- --g*g)},InOut:function(g){if((g*=2)<1){return -0.5*(Math.sqrt(1-g*g)-1)}return 0.5*(Math.sqrt(1-(g-=2)*g)+1)}};this.Elastic={In:function(h){var j,g=0.1,l=0.4;if(h===0){return 0}if(h===1){return 1}if(!g||g<1){g=1;j=l/4}else{j=l*Math.asin(1/g)/(2*Math.PI)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h-j)*(2*Math.PI)/l))},Out:function(h){var j,g=0.1,l=0.4;if(h===0){return 0}if(h===1){return 1}if(!g||g<1){g=1;j=l/4}else{j=l*Math.asin(1/g)/(2*Math.PI)}return(g*Math.pow(2,-10*h)*Math.sin((h-j)*(2*Math.PI)/l)+1)},InOut:function(h){var j,g=0.1,l=0.4;if(h===0){return 0}if(h===1){return 1}if(!g||g<1){g=1;j=l/4}else{j=l*Math.asin(1/g)/(2*Math.PI)}if((h*=2)<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h-j)*(2*Math.PI)/l))}return g*Math.pow(2,-10*(h-=1))*Math.sin((h-j)*(2*Math.PI)/l)*0.5+1}};this.Back={In:function(g){var h=1.70158;return g*g*((h+1)*g-h)},Out:function(g){var h=1.70158;return --g*g*((h+1)*g+h)+1},InOut:function(g){var h=1.70158*1.525;if((g*=2)<1){return 0.5*(g*g*((h+1)*g-h))}return 0.5*((g-=2)*g*((h+1)*g+h)+2)}};this.Bounce={In:function(g){return 1-this.Bounce.Out(1-g)},Out:function(g){if(g<(1/2.75)){return 7.5625*g*g}else{if(g<(2/2.75)){return 7.5625*(g-=(1.5/2.75))*g+0.75}else{if(g<(2.5/2.75)){return 7.5625*(g-=(2.25/2.75))*g+0.9375}else{return 7.5625*(g-=(2.625/2.75))*g+0.984375}}}},InOut:function(g){if(g<0.5){return this.Bounce.In(g*2)*0.5}return this.Bounce.Out(g*2-1)*0.5+0.5}}},"Static");Class(function EasingPath(d){Inherit(this,Component);var x=this;var h,o,t,f;var g=1450;var A=1/g;var u=100;var e=5;var v=0.001;var F=-1;var c={};var w={};var E=[];var j=[];(function(){q();r();D()})();function q(){f=x.initClass(ObjectPool,Object,100)}function r(){h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d",C(d));t=h.getTotalLength()}function D(){var J,I,L,G,H,K;for(J=I=0,K=g;0<=K?I<=K:I>=K;J=0<=K?++I:--I){H=J*A;L=t*H;G=h.getPointAtLength(L);E.push({point:G,length:L,progress:H})}}function C(K){var H=/[M|L|H|V|C|S|Q|T|A]/gim;var I=K.split(H);I.shift();var G=K.match(H);var L=0;I[L]=l(I[L],0);var J=I.length-1;I[J]=l(I[J],u);return b(G,I)}function l(K,O){O=O||0;K=K.trim();var H=/(-|\+)?((\d+(\.(\d|\e(-|\+)?)+)?)|(\.?(\d|\e|(\-|\+))+))/gim;var I=p(K.match(H));var L=I[I.length-1];var M=L[0];var P=Number(M);if(P!==O){K="";L[0]=O;for(var J=0;J<I.length;J++){var N=I[J];var G=J===0?"":" ";K+=""+G+N[0]+","+N[1]}}return K}function b(H,J){var G="";for(var I=0;I<H.length;I++){var L=H[I];var K=I===0?"":" ";G+=""+K+L+(J[I].trim())}return G}function p(K){if(K.length%2!==0){throw"EasingPath :: Failed to parse path -- segment pairs are not even."}var G=[];for(var H=0;H<K.length;H+=2){var I=K[H];var J=[K[H],K[H+1]];G.push(J)}return G}function n(R,I){if(I==F){return c}if(!o){o=0}var P=R.length;var K,S,H;if(F>I){K=0;S="reverse"}else{K=P;S="forward"}if(S=="forward"){H=R[0];end=R[R.length-1]}else{H=R[R.length-1];end=R[0]}var O,N,J,Q,M;for(O=N=J=o,Q=K;J<=Q?N<Q:N>Q;O=J<=Q?++N:--N){var T=R[O];var G=T.point.x/u;var L=I;if(S=="reverse"){M=G;G=L;L=M}if(G<L){H=T;o=O}else{end=T;break}}F=I;c.start=H;c.end=end;return c}function a(I,H){var G;var J=s(I,H.start.point);if(J){return J}return s(I,H.end.point)}function m(M,N,K,L){L=L||e;var J=B(N,K,M);var H=h.getPointAtLength(J);var G=H.x/u;if(k(M,G)){return z(H)}else{if(L--<1){return z(H)}var I=f.get();I.point=H;I.length=J;j.push(I);if(M<G){return m(M,N,I,L)}else{return m(M,I,K,L)}}}function B(K,G,I){var J=G.point.x-K.point.x;var H=(I-(K.point.x/u))/(J/u);return K.length+H*(G.length-K.length)}function s(H,G){if(k(H,G.x/u)){return z(G)}}function k(H,G){return Math.abs(H-G)<v}function z(G){return 1-(G.y/u)}function y(){for(var G=j.length-1;G>-1;G--){f.put(j[G])}j.length=0}this.solve=function(J){J=Utils.clamp(J,0,1);var I=n(E,J);var H=a(J,I);var G=H;if(!G){G=m(J,I.start,I.end)}y();return G}});Class(function MathTween(h,q,u,f,l,r,k,j){var p=this;var w,y,v,g;var s,d,n,t,a;var m=0;(function(){if(h&&q){if(typeof u!=="number"){throw"MathTween Requires object, props, time, ease"}c();if(typeof f=="object"&&!Array.isArray(f)){x()}}})();function c(){if(!h.multiTween&&h._mathTween&&!j){TweenManager.clearTween(h)}if(!j){TweenManager._addMathTween(p)}h._mathTween=p;if(h.multiTween){if(!h._mathTweens){h._mathTweens=[]}h._mathTweens.push(p)}if(typeof f=="string"){f=TweenManager.Interpolation.convertEase(f);s=typeof f==="function"}else{if(Array.isArray(f)){s=false;f=TweenManager.getEase(f,true)}}w=Date.now();w+=l;v=q;y={};p.startValues=y;for(var z in v){if(typeof h[z]==="number"){y[z]=h[z]}}}function x(){var A=0;var E=function(Q,K,O,P,N,L){var M=N[L];if(M){Q+=M}return TweenManager.interpolateValues(Q,K,O,P)};t=[];for(var B in f){var H=B.strpos("%")?Number(B.replace("%",""))/100:((Number(B)+1)/f.length);if(isNaN(H)){continue}var D=f[B];var J=t[t.length-1];var G={};var z=J?J.end:{};var F=!J;for(var I in y){G[I]=E(y[I],v[I],H,D,z,I);if(F){z[I]=y[I]}}var C=(H*u)-A;A+=C;t.push({percent:H,ease:D,start:z,end:G,time:C})}g=t.shift()}function o(){if(!h&&!q){return false}h._mathTween=null;TweenManager._removeMathTween(p);Utils.nullObject(p);if(h._mathTweens){h._mathTweens.findAndRemove(p)}}function e(A){m=(A-w)/u;m=m>1?1:m;var D=s?f(m):TweenManager.Interpolation.solve(f,m);for(var C in y){if(typeof y[C]==="number"){var B=y[C];var z=v[C];h[C]=B+(z-B)*D}}if(r){r(D)}if(m==1){if(k){k()}o()}}function b(A){var z=g;if(!z.elapsed){z.elapsed=0;z.timer=0}z.timer+=Render.DELTA;z.elapsed=z.timer/z.time;if(z.elapsed<1){for(var B in z.start){h[B]=TweenManager.interpolateValues(z.start[B],z.end[B],z.elapsed,z.ease)}if(r){r(z.elapsed)}}else{g=t.shift();if(!g){if(k){k()}o()}}}this.update=function(z){if(d||z<w){return}if(t){b(z)}else{e(z)}};this.pause=function(){d=true};this.resume=function(){d=false;w=Date.now()-(m*u)};this.stop=function(){p.stopped=true;o();return null};this.setEase=function(z){if(n!=z){n=z;f=TweenManager.Interpolation.convertEase(z);s=typeof f==="function"}};this.interpolate=function(A){var D=s?f(A):TweenManager.Interpolation.solve(f,A);for(var C in y){if(typeof y[C]==="number"&&typeof v[C]==="number"){var B=y[C];var z=v[C];h[C]=B+(z-B)*D}}}});Class(function SpringTween(o,q,j,b,m,p,r){var l=this;var d,e,h,a;var f,j,n,g;(function(){if(o&&q){if(typeof j!=="number"){throw"SpringTween Requires object, props, time, ease"}c()}})();function c(){TweenManager.clearTween(o);o._mathTween=l;TweenManager._addMathTween(l);d=Date.now();d+=m;h={};a={};e={};if(q.x||q.y||q.z){if(typeof q.x==="undefined"){q.x=o.x}if(typeof q.y==="undefined"){q.y=o.y}if(typeof q.z==="undefined"){q.z=o.z}}n=0;f=q.damping||0.5;delete q.damping;for(var s in q){if(typeof q[s]==="number"){e[s]=0;h[s]=q[s]}}for(s in q){if(typeof o[s]==="number"){a[s]=o[s]||0;q[s]=a[s]}}}function k(s){if(o){o._mathTween=null;if(!s){for(var t in h){if(typeof h[t]==="number"){o[t]=h[t]}}if(o.transform){o.transform()}}}TweenManager._removeMathTween(l)}this.update=function(v){if(v<d||g){return}var u;for(var z in a){if(typeof a[z]==="number"){var y=a[z];var t=h[z];var x=q[z];var w=t-x;var s=w*f;e[z]+=s;e[z]*=j;q[z]+=e[z];o[z]=q[z];u=e[z]}}if(Math.abs(u)<0.1){n++;if(n>30){if(r){r.apply(o)}k()}}if(p){p(v)}if(o.transform){o.transform()}};this.pause=function(){g=true};this.stop=function(){k(true);return null}});Class(function TweenTimeline(){Inherit(this,Component);var f=this;var e;var c=0;var b=[];this.elapsed=0;(function(){})();function d(){b.sort(function(k,h){var l=k.time+k.delay;var j=h.time+h.delay;return j-l});var g=b[0];c=g.time+g.delay}function a(){var l=f.elapsed*c;for(var k=b.length-1;k>-1;k--){var j=b[k];var h=l-j.delay;var g=Utils.clamp(h/j.time,0,1);j.interpolate(g)}}this.add=function(h,k,l,m,g){var j;if(h instanceof HydraObject){j=new FrameTween(h,k,l,m,g,null,true)}else{j=new MathTween(h,k,l,m,g,null,null,true)}b.push(j);j.time=l;j.delay=g||0;d();return j};this.tween=function(l,h,j,g,k){this.stopTween();e=TweenManager.tween(f,{elapsed:l},h,j,g,k)};this.stopTween=function(){if(e&&e.stop){e.stop()}};this.startRender=function(){Render.startRender(a)};this.stopRender=function(){Render.stopRender(a)};this.update=function(){a()};this.destroy=function(){Render.stopRender(a);for(var g=0;g<b.length;g++){b[g].stop()}return this._destroy()}});Class(function Shaders(){var d=this;(function(){})();function c(f){var h=f.split("{@}");h.shift();for(var g=0;g<h.length;g+=2){var e=h[g];var j=h[g+1];d[e]=j}}function b(){for(var e in d){var f=d[e];if(typeof f==="string"){d[e]=a(f)}}}function a(g){if(!g.strpos("require")){return g}g=g.replace(/# require/g,"#require");while(g.strpos("#require")){var f=g.split("#require(");var e=f[1].split(")")[0];e=e.replace(/ /g,"");if(!d[e]){throw"Shader required "+e+", but not found in compiled shaders.\n"+g}g=g.replace("#require("+e+")",d[e])}return g}this.parse=function(f,e){if(!f.strpos("{@}")){e=e.split("/");e=e[e.length-1];d[e]=f}else{c(f);b()}};this.getShader=function(e){if(d.FALLBACKS){if(d.FALLBACKS[e]){e=d.FALLBACKS[e]}}return d[e]}},"static");Class(function SVG(){var a=[];(function(){(function(k){var f=["SVGSVGElement","SVGGElement"],m=document.createElement("dummy");if(!f[0] in k){return !1}if(Object.defineProperty){var l={get:function(){m.innerHTML="";Array.prototype.slice.call(this.childNodes).forEach(function(d){m.appendChild(d.cloneNode(!0))});return m.innerHTML},set:function(g){var d=this,n=Array.prototype.slice.call(d.childNodes),h=function(o,p){if(1!==p.nodeType){return !1}var e=document.createElementNS("http://www.w3.org/2000/svg",p.nodeName.toLowerCase());Array.prototype.slice.call(p.attributes).forEach(function(q){e.setAttribute(q.name,q.value)});"TEXT"===p.nodeName&&(e.textContent=p.innerHTML);o.appendChild(e);p.childNodes.length&&Array.prototype.slice.call(p.childNodes).forEach(function(q){h(e,q)})},g=g.replace(/<(\w+)([^<]+?)\/>/,"<$1$2></$1>");n.forEach(function(e){e.parentNode.removeChild(e)});m.innerHTML=g;Array.prototype.slice.call(m.childNodes).forEach(function(e){h(d,e)})},enumerable:!0,configurable:!0};try{f.forEach(function(d){Object.defineProperty(window[d].prototype,"innerHTML",l)})}catch(j){}}else{Object.prototype.__defineGetter__&&f.forEach(function(d){window[d].prototype.__defineSetter__("innerHTML",l.set);window[d].prototype.__defineGetter__("innerHTML",l.get)})}})(window)}());function c(e){for(var d=0;d<a.length;d++){if(a[d].id==e){return true}}}function b(e){for(var d=0;d<a.length;d++){if(a[d].id==e){return a[d]}}}this.defineSymbol=function(h,f,d,g){if(c(h)){throw"SVG symbol "+h+" is already defined"}var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("style","display: none;");e.setAttribute("width",f);e.setAttribute("height",d);e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");e.innerHTML='<symbol id="'+h+'">'+g+"</symbol>";document.body.insertBefore(e,document.body.firstChild);a.push({id:h,width:f,height:d})};this.getSymbolConfig=function(e){var d=b(e);if(typeof d=="undefined"){throw"SVG symbol "+e+" is not defined"}return d}},"Static");Class(function AssetLoader(_assets,_complete,_images){Inherit(this,Component);var _this=this;var _total=0;var _loaded=0;var _added=0;var _triggered=0;var _lastTriggered=0;var _queue,_qLoad;var _output,_loadedFiles;(function(){if(typeof _complete!=="function"){_images=_complete;_complete=null}_queue=[];_loadedFiles=[];prepareAssets();_this.delayedCall(startLoading,10)})();function prepareAssets(){for(var i=0;i<_assets.length;i++){if(typeof _assets[i]!=="undefined"){_total++;_queue.push(_assets[i])}}}function startLoading(){_qLoad=Math.round(_total*0.5);for(var i=0;i<_qLoad;i++){loadAsset(_queue[i])}}function missingFiles(){if(!_queue){return}var missing=[];for(var i=0;i<_queue.length;i++){var loaded=false;for(var j=0;j<_loadedFiles.length;j++){if(_loadedFiles[j]==_queue[i]){loaded=true}}if(!loaded){missing.push(_queue[i])}}if(missing.length){console.log("AssetLoader Files Failed To Load:");console.log(missing)}}function loadAsset(asset){if(!asset){return}var name=asset.split("/");name=name[name.length-1];var split=name.split(".");var ext=split[split.length-1].split("?")[0];switch(ext){case"html":XHR.get(asset,function(contents){Hydra.HTML[split[0]]=contents;assetLoaded(asset)},"text");break;case"js":case"php":case undefined:XHR.get(asset,function(script){script=script.replace("use strict","");eval.call(window,script);assetLoaded(asset)},"text");break;case"csv":case"json":XHR.get(asset,function(contents){Hydra.JSON[split[0]]=contents;assetLoaded(asset)},ext=="csv"?"text":null);break;case"fs":case"vs":XHR.get(asset,function(contents){Shaders.parse(contents,asset);assetLoaded(asset)},"text");break;default:var image=new Image();image.src=asset;image.onload=function(){assetLoaded(asset);if(_images){_images[asset]=image}};break}}function checkQ(){if(_loaded==_qLoad&&_loaded<_total){var start=_qLoad;_qLoad*=2;for(var i=start;i<_qLoad;i++){if(_queue[i]){loadAsset(_queue[i])}}}}function assetLoaded(asset){if(_queue){_loaded++;_this.events.fire(HydraEvents.PROGRESS,{percent:_loaded/_total});_loadedFiles.push(asset);clearTimeout(_output);checkQ();if(_loaded==_total){_this.complete=true;Render.nextFrame(function(){if(_this.events){_this.events.fire(HydraEvents.COMPLETE,null,true)}if(_complete){_complete()}})}else{_output=_this.delayedCall(missingFiles,5000)}}}this.add=function(num){_total+=num;_added+=num};this.trigger=function(num){num=num||1;for(var i=0;i<num;i++){assetLoaded("trigger")}};this.triggerPercent=function(percent,num){num=num||_added;var trigger=Math.ceil(num*percent);if(trigger>_lastTriggered){this.trigger(trigger-_lastTriggered)}_lastTriggered=trigger};this.destroy=function(){_assets=null;_loaded=null;_queue=null;_qLoad=null;return this._destroy()}},function(){AssetLoader.loadAllAssets=function(e,a){a=a||"";var d=[];for(var b=0;b<ASSETS.length;b++){d.push(a+ASSETS[b])}var c=new AssetLoader(d,function(){if(e){e()}c=c.destroy()})};AssetLoader.loadAssets=function(b,c){var a=new AssetLoader(b,function(){if(c){c()}a=a.destroy()})}});Class(function XHR(){var d=this;var b;var c=window.location.href.strpos("file://");this.headers={};function a(f,g){if(typeof g==="object"){for(var e in g){var h=f+"["+e+"]";if(typeof g[e]==="object"){a(h,g[e])}else{b.push(h+"="+g[e])}}}else{b.push(f+"="+g)}}this.get=function(f,j,l,h){if(typeof j==="function"){h=l;l=j;j=null}else{if(typeof j==="object"){var e="?";for(var g in j){e+=g+"="+j[g]+"&"}e=e.slice(0,-1);f+=e}}var k=new XMLHttpRequest();k.open("GET",f,true);for(var g in d.headers){k.setRequestHeader(g,d.headers)}k.send();k.onreadystatechange=function(){if(k.readyState==4&&(c||k.status==200)){if(typeof l==="function"){var m=k.responseText;if(h=="text"){l(m)}else{try{l(JSON.parse(m))}catch(n){console.error("XHR Parse: "+f+" : "+n.message)}}}k=null}}};this.post=function(e,h,l,g,k){if(typeof h==="function"){k=g;g=l;l=h;h=null}else{if(typeof h==="object"){if(l=="json"||g=="json"||k=="json"){h=JSON.stringify(h)}else{b=new Array();for(var f in h){a(f,h[f])}h=b.join("&");h=h.replace(/\[/g,"%5B");h=h.replace(/\]/g,"%5D");b=null}}}var j=new XMLHttpRequest();j.open("POST",e,true);switch(k){case"upload":k="application/upload";break;default:k="application/x-www-form-urlencoded";break}j.setRequestHeader("Content-type",k);for(var f in d.headers){j.setRequestHeader(f,d.headers)}j.onreadystatechange=function(){if(j.readyState==4&&(c||j.status==200)){if(typeof l==="function"){var m=j.responseText;if(g=="text"){l(m)}else{try{l(JSON.parse(m))}catch(n){console.error("XHR Parse: "+e+" : "+n.message)}}}j=null}};j.send(h)}},"Static");Class(function Dev(){var e=this;var a,c;(function(){if(Hydra.LOCAL){Hydra.development(true)}})();function d(){window.onerror=function(j,h,f){var g=j+" ::: "+h+" : "+f;if(c){alert(g)}if(a){XHR.post(a+"/api/data/debug",b(g),"json")}}}function b(f){var g={};g.err=f;g.ua=Device.agent;g.browser={width:Stage.width,height:Stage.height};return g}this.alertErrors=function(f){c=true;if(typeof f==="string"){f=[f]}for(var g=0;g<f.length;g++){if(location.href.strpos(f[g])||location.hash.strpos(f[g])){return d()}}};this.postErrors=function(f,h){a=h;if(typeof f==="string"){f=[f]}for(var g=0;g<f.length;g++){if(location.href.strpos(f[g])){return d()}}};this.expose=function(f,h,g){if(Hydra.LOCAL||g){window[f]=h}}},"Static");window.ASSETS=["assets/images/arrow.png","assets/images/congratulations.png","assets/images/desktop/depth.jpg","assets/images/desktop/scene.jpg","assets/images/mobile/depth.jpg","assets/images/mobile/scene.jpg","assets/images/objective-1.png","assets/images/objective-2.png","assets/images/objective-3.png","assets/images/objective-4.png","assets/images/objective-5.png","assets/images/placeholder/placeholder.png","assets/js/lib/howler.js","assets/js/lib/three.js","assets/shaders/compiled.vs"];Class(function CustomEvents(){this.LOAD_PROGRESS="load_progress";this.LOADED="load_complete";this.LIBS_LOADED="libs_load_complete";this.TUTORIAL_DRAG="tutorial_drag";this.SHOW_GOALS="show_objectives";this.FOCUS="adjust_focus";this.SHOOT="photo_shoot";this.FINISH="finish_game";this.REPLAY="replay_game"},"static");Class(function RandomEulerRotation(b){var e=this;var c=["x","y","z"];var a;this.speed=1;(function(){d()})();function d(){a={};a.x=Utils.doRandom(0,2);a.y=Utils.doRandom(0,2);a.z=Utils.doRandom(0,2);a.vx=Utils.doRandom(-5,5)*0.0025;a.vy=Utils.doRandom(-5,5)*0.0025;a.vz=Utils.doRandom(-5,5)*0.0025}this.update=function(){var h=Render.TIME;for(var g=0;g<3;g++){var f=c[g];switch(a[f]){case 0:b.rotation[f]+=Math.cos(Math.sin(h*0.25))*a["v"+f]*e.speed;break;case 1:b.rotation[f]+=Math.cos(Math.sin(h*0.25))*a["v"+f]*e.speed;break;case 2:b.rotation[f]+=Math.cos(Math.cos(h*0.25))*a["v"+f]*e.speed;break}}}});Class(function Shader(f,b,a,d){Inherit(this,Component);var e=this;(function(){if(Hydra.LOCAL&&a){c()}if(d){e.uniforms=d.uniforms;e.attributes=d.attributes}})();function c(){Dev.expose(a,e)}this.get("material",function(){if(!d){var g={};g.vertexShader=Shaders.getShader(f+".vs");g.fragmentShader=Shaders.getShader(b+".fs");if(e.attributes){g.attributes=e.attributes}if(e.uniforms){g.uniforms=e.uniforms}d=new THREE.ShaderMaterial(g);d.shader=e}return d});this.set=function(g,h){if(typeof h!=="undefined"){e.uniforms[g].value=h}return e.uniforms[g].value};this.getValues=function(){var g={};for(var h in e.uniforms){g[h]=e.uniforms[h].value}return g};this.copyUniformsTo=function(h){for(var g in e.uniforms){h.uniforms[g]=e.uniforms[g]}};this.tween=function(h,j,k,l,g,n,m){TweenManager.tween(e.uniforms[h],{value:j},k,l,g,n,m)};this.clone=function(g){return new Shader(f,b,g||a,e.material.clone())}});Class(function Utils3D(){var d=this;var c,b;var a={};this.PATH="";this.decompose=function(e,f){e.matrixWorld.decompose(f.position,f.quaternion,f.scale)};this.createDebug=function(h,e){var g=new THREE.IcosahedronGeometry(h||40,1);var f=e?new THREE.MeshBasicMaterial({color:e}):new THREE.MeshNormalMaterial();return new THREE.Mesh(g,f)};this.getTexture=function(f,e){if(!a[f]){THREE.ImageUtils.crossOrigin="anonymous";a[f]=THREE.ImageUtils.loadTexture(d.PATH+f);if(!e){a[f].minFilter=THREE.LinearFilter}}return a[f]};this.visibility=function(e,g){if(e.visible==g){return}e.visible=g;if(e.material){e.material.visible=g}for(var f=0;f<e.children.length;f++){var h=e.children[f];if(h.children){d.visibility(h,g)}if(h.material){h.material.visible=g}}};this.setInfinity=function(e){var f=Number.POSITIVE_INFINITY;e.set(f,f,f);return e};this.freezeMatrix=function(e){e.matrixAutoUpdate=false;e.updateMatrix()};this.getCubemap=function(j){var h="cube_"+(Array.isArray(j)?j[0]:j);if(!a[h]){var e=[];for(var g=0;g<6;g++){var f=new Image();f.src=d.PATH+Array.isArray(j)?j[g]:j;e.push(f);f.onload=function(){a[j].needsUpdate=true}}a[h]=new THREE.Texture();a[h].image=e;a[h].minFilter=THREE.LinearFilter}return a[h]};this.loadObject=function(e){if(!c){c=new THREE.ObjectLoader()}return c.parse(Hydra.JSON[e])};this.loadGeometry=function(e){if(!b){b=new THREE.JSONLoader()}return b.parse(Hydra.JSON[e].data).geometry};this.disposeAllTextures=function(){for(var e in a){a[e].dispose()}};this.disableWarnings=function(){window.console.warn=function(f,e){};window.console.error=function(){}}},"static");Class(function Raycaster(f){Inherit(this,Component);var g=this;var e=new THREE.Vector3();var b=new THREE.Raycaster();var d=null;(function(){})();function a(j){var h;if(Array.isArray(j)){h=b.intersectObjects(j)}else{h=b.intersectObject(j)}if(d){c()}return h}function c(){var h=d.geometry.vertices;h[0].copy(b.ray.origin.clone());h[1].copy(b.ray.origin.clone().add(b.ray.direction.clone().multiplyScalar(10000)));h[0].x+=1;d.geometry.verticesNeedUpdate=true}this.set("camera",function(h){f=h});this.debug=function(k){var j=new THREE.Geometry();j.vertices.push(new THREE.Vector3(-100,0,0));j.vertices.push(new THREE.Vector3(100,0,0));var h=new THREE.LineBasicMaterial({color:16711680});d=new THREE.Line(j,h);k.add(d)};this.checkHit=function(k,h){h=h||Mouse;var j=g.rect||Stage;e.x=(h.x/j.width)*2-1;e.y=-(h.y/j.height)*2+1;b.setFromCamera(e,f);return a(k)};this.checkFromValues=function(j,h,k){b.set(h,k,0,Number.POSITIVE_INFINITY);return a(j)}});Class(function ScreenProjection(c){Inherit(this,Component);var d=this;var b=new THREE.Vector3();var a=new THREE.Vector3();(function(){})();this.set("camera",function(e){c=e});this.unproject=function(e){var f=d.rect||Stage;b.set((e.x/f.width)*2-1,-(e.y/f.height)*2+1,0.5);b.unproject(c);var h=c.position;b.sub(h).normalize();var g=-h.z/b.z;a.copy(h).add(b.multiplyScalar(g));return a};this.project=function(f,e){e=e||Stage;if(f instanceof THREE.Object3D){f.updateMatrixWorld();b.set(0,0,0).setFromMatrixPosition(f.matrixWorld)}else{b.copy(f)}b.project(c);b.x=(b.x+1)/2*e.width;b.y=-(b.y-1)/2*e.height;return b}});Class(function BasicPass(){Inherit(this,NukePass);var a=this;this.fragmentShader=["varying vec2 vUv;","uniform sampler2D tDiffuse;","void main() {","gl_FragColor = texture2D(tDiffuse, vUv);","}"];this.init(this.fragmentShader)});Class(function NukePass(a){Inherit(this,Component);var b=this;this.init=function(c){b=this;var e=c||this.constructor.toString().match(/function ([^\(]+)/)[1];var d=Array.isArray(c)?c.join(""):null;b.uniforms=b.uniforms||{};b.uniforms.tDiffuse={type:"t",value:null};b.pass=new THREE.ShaderMaterial({uniforms:b.uniforms,vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4(position, 1.0); }",fragmentShader:d||Shaders[e+".fs"]});b.uniforms=b.pass.uniforms};this.set=function(c,d){this.uniforms[c].value=d};this.tween=function(d,e,f,g,c,j,h){TweenManager.tween(b.uniforms[d],{value:e},f,g,c,j,h)};if(typeof a==="string"){this.init(a)}});Class(function Nuke(l,m){Inherit(this,Component);var h=this;if(!m.renderer){console.error("Nuke :: Must define renderer")}h.stage=l;h.renderer=m.renderer;h.camera=m.camera;h.scene=m.scene;h.rtt=m.rtt;h.enabled=m.enabled||true;h.passes=m.passes||[];var a=m.dpr||Device.pixelRatio;var f,k,o,d,c;var n={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:false};(function(){g();j()})();function g(){var r=h.stage.width*a;var p=h.stage.height*a;f=new THREE.WebGLRenderTarget(r,p,n);k=new THREE.WebGLRenderTarget(r,p,n);c=new THREE.OrthographicCamera(h.stage.width/-2,h.stage.width/2,h.stage.height/2,h.stage.height/-2,1,1000);o=new THREE.Scene();var q=new THREE.PlaneBufferGeometry(2,2,1,1);d=new THREE.Mesh(q,new THREE.MeshBasicMaterial());o.add(d)}function e(q,p){if(h.rtt){h.renderer.render(q,p||h.camera,h.rtt,true)}else{h.renderer.render(q,p||h.camera)}}function j(){h.events.subscribe(HydraEvents.RESIZE,b)}function b(){var q=h.stage.width*a;var p=h.stage.height*a;f=new THREE.WebGLRenderTarget(q,p,n);k=new THREE.WebGLRenderTarget(q,p,n);c.left=h.stage.width/-2;c.right=h.stage.width/2;c.top=h.stage.height/2;c.bottom=h.stage.height/-2;c.updateProjectionMatrix()}h.add=function(q,p){if(typeof p=="number"){h.passes.splice(p,0,q);return}h.passes.push(q)};h.remove=function(p){if(typeof p=="number"){h.passes.splice(p)}else{h.passes.findAndRemove(p)}};h.renderToTexture=function(q,p){h.renderer.render(h.scene,h.camera,p||f,typeof q=="boolean"?q:true)};h.render=function(){if(!h.enabled||!h.passes.length){e(h.scene);return}if(!h.multiRender){h.renderer.render(h.scene,h.camera,f,true)}var q=true;for(var p=0;p<h.passes.length-1;p++){d.material=h.passes[p].pass;d.material.uniforms.tDiffuse.value=q?f:k;h.renderer.render(o,c,q?k:f);q=!q}d.material=h.passes[h.passes.length-1].pass;d.material.uniforms.tDiffuse.value=q?f:k;e(o,c)};h.set("dpr",function(p){a=p||Device.pixelRatio;b()})});Interaction.Class(function ScrollUtil(){var c=this;(function(){b()})();function b(){("mousewheel DOMMouseScroll wheel MozMousePixelScroll".split(" ")).forEach(function(d){window.addEventListener(d,a,false)})}function a(d){d=d.originalEvent||d;var f=0;if(d.wheelDelta){f=d.wheelDelta}else{if(d.deltaY){f=d.deltaY*-40}else{if((d.detail)||d.detail===0){f=d.detail*-40}}}if(typeof c.onScroll=="function"){c.onScroll(f)}}});Class(function AssetUtil(){var d=this;var c={};var b=["!!!"];this.PATH="";function a(f){for(var e=0;e<b.length;e++){var g=b[e];if(f.strpos(g)){return false}}return true}this.loadAssets=function(j){var h=this.get(j);var e=[];for(var f=h.length-1;f>-1;f--){var g=h[f];if(!c[g]){e.push(d.PATH+g);c[g]=1}}return e};this.get=function(l){if(!Array.isArray(l)){l=[l]}var k=[];for(var g=ASSETS.length-1;g>-1;g--){var h=ASSETS[g];for(var f=l.length-1;f>-1;f--){var e=l[f];if(h.strpos(e)){if(a(h)){k.push(h)}}}}return k};this.exclude=function(f){if(!Array.isArray(f)){f=[f]}for(var e=0;e<f.length;e++){b.push(f[e])}};this.loadAllAssets=function(g){var f=d.loadAssets(g||"/");var e=new AssetLoader(f)}},"Static");Class(function Sound(){Inherit(this,Model);var g=this;var c=["wind","focus","shoot","success_1","success_2","success_final",];(function(){f();g.events.subscribe(CustomEvents.LIBS_LOADED,e)})();function f(){c.forEach(function(h){g[h]={_rate:1,play:function(){}}})}function e(){d();b(c,function(){g.wind.loop(true);g.wind.volume(0.8);g.wind.play();g.focus.loop(true);g.focus.volume(0.2);g.focus.play()})}function b(l,o){if(typeof l==="string"){l=[l]}var k=0;var h=function(){k++;if(k==l.length&&typeof o=="function"){o()}};for(var j=0;j<l.length;j++){var n=l[j];var m="assets/audio/"+n;g[n]=new Howl({urls:[m+".mp3"],onload:h})}}function d(){g.events.subscribe(HydraEvents.BROWSER_FOCUS,a)}function a(h){if(h.type=="blur"){g.forced=Howler.volume();g.mute()}else{if(g.forced){g.unmute()}}}this.mute=function(){if(!Howler){return}Howler.mute()};this.unmute=function(){if(!Howler){return}Howler.unmute()}},"Static");Class(function Tutorial(){Inherit(this,Controller);var h=this;var k,f,c,g,e;(function(){d();b();j()})();function d(){k=h.container;k.css({position:"static"})}function b(){f=h.initClass(TutorialLookView);c=h.initClass(TutorialFocusView);g=h.initClass(TutorialShootView);e=h.initClass(TutorialFindView);if(Device.mobile){h.delayedCall(c.start,2000)}else{h.delayedCall(f.start,2000)}}function j(){f.events.add(HydraEvents.COMPLETE,c.start);c.events.add(HydraEvents.COMPLETE,g.start);g.events.add(HydraEvents.COMPLETE,e.start);e.events.add(HydraEvents.COMPLETE,a)}function a(){h.events.fire(HydraEvents.COMPLETE)}});Class(function WorldInteraction(){Inherit(this,Component);var u=this;var e,s,d;var a=new Vector2();var q=new Vector2();var f=0.75;var b=0.75;var h=new Vector2();var j=[{focus:0.5954999999999983,rotation:{x:0.026594568324555635,y:2.127325774598736,z:0}},{focus:0.7954999999999964,rotation:{x:-0.01851442880946888,y:0.21977332837368646,z:0}},{focus:0.2880000000000002,rotation:{x:-0.07916014185742591,y:1.3528459228549172,z:0}},{focus:0.6855,rotation:{x:-0.05743249354560697,y:3.7203322789233635,z:0}},{focus:0.5789999999999983,rotation:{x:-0.014524216083779046,y:5.599523184113893,z:0}},];var o=0;(function(){p();Render.start(w)})();function w(){if(e){e.update()}}function p(){if(Device.mobile){e=new THREE.DeviceOrientationControls(Camera.instance().camera)}s=u.initClass(Interaction.Input,Stage);s.onStart=v;s.onUpdate=t;s.onEnd=l;d=u.initClass(Interaction.ScrollUtil);d.onScroll=k;__window.bind("keypress",r);u.events.subscribe(CustomEvents.SHOW_GOALS,m);u.events.subscribe(CustomEvents.REPLAY,x)}function v(y){a.set(0,0);q.set(0,0);h.set(Stage.width*0.5,Stage.height*0.5);h.sub(y);if(h.length()<Stage.width*(Device.mobile?0.15:0.05)){c()}if(y.x/Stage.width<0.3){return u.focusLock=false}if(y.x/Stage.width>0.7){return u.focusLock=false}if(y.y/Stage.height<(Mobile.os=="iOS"?0.7:0.85)){return u.focusLock=false}f=(y.x-0.3*Stage.width)/(0.4*Stage.width);f=Utils.clamp(f,0,1);u.events.fire(CustomEvents.FOCUS,{focus:f});b=f;u.focusLock=true}function t(y){if(u.focusLock){f=b+y.x/(0.4*Stage.width);f=Utils.clamp(f,0,1);u.events.fire(CustomEvents.FOCUS,{focus:f});return}u.events.fire(CustomEvents.TUTORIAL_DRAG);a.copyFrom(y);a.sub(q);Camera.instance().updateVelocity(a,true);q.copyFrom(y)}function l(){a.set(0,0);q.set(0,0);Camera.instance().updateVelocity(a,false);u.focusLock=false}function k(y){if(u.focusLock){return}f+=y*0.0005;f=Utils.clamp(f,0,1);u.events.fire(CustomEvents.FOCUS,{focus:f})}function c(){if(u.finished){return}Sound.shoot._rate=Math.random()*0.1+0.95;Sound.shoot.play();if(!u.canShoot){u.events.fire(CustomEvents.SHOOT);return}var y=-1;j.every(function(A,z){if(n(A.rotation)>0.1){return true}if(g(A.focus)>0.2){return true}y=z});if(y>-1){if(!j[y].hit){o++;if(o==j.length){Sound.success_final.volume(0.3);Sound.success_final.play()}else{if(o<3){Sound.success_1.volume(0.3);Sound.success_1._rate=Math.random()*0.15+0.7+o*0.1;Sound.success_1.play()}else{Sound.success_2.volume(0.3);Sound.success_2._rate=Math.random()*0.15+0.7+(o-2)*0.1;Sound.success_2.play()}}}j[y].hit=true}if(o==j.length){u.finished=true;u.events.fire(CustomEvents.FINISH)}u.events.fire(CustomEvents.SHOOT,{index:y+1})}function n(z){var y=Camera.instance().camera.rotation;y.y+=y.y>Math.PI*2?-Math.PI*2:y.y<0?Math.PI*2:0;var A=Math.max(Math.abs(y.x-z.x),Math.abs(y.y-z.y));return A}function g(y){return Math.abs(f-y)}function r(y){if(y.keyCode==32){c()}}function m(){u.delayedCall(function(){u.canShoot=true},2000)}function x(){u.delayedCall(function(){o=0;u.finished=false;j.forEach(function(y){y.hit=false})},1000)}},"singleton");Class(function Camera(){Inherit(this,Component);var l=this;var d;var m=new Vector2();var b=new Vector2();var o={max:0.8,min:-0.8};var f=new Vector2();var g=new Vector2();var e=new Vector2();var j=0.001;var c=0.1;var n=1;(function(){h();p();Mouse.capture();Render.start(k)})();function h(){l.camera=new THREE.PerspectiveCamera(40,Stage.width/Stage.height,1,1000);d=l.camera.rotation;d.order="YXZ"}function k(q,r){m.lerp(b,l.dragging?0.7:0.1);d.y+=m.x*0.001;d.x+=m.y*0.001;if(d.x>o.max){d.x+=(o.max-d.x)*0.2}if(d.x<o.min){d.x+=(o.min-d.x)*0.2}if(l.dragging){b.multiply(0.5)}if(Device.mobile){return}f.set(Utils.range(Mouse.x,0,Stage.width,j,-j),Utils.range(Mouse.y,0,Stage.height,j,-j));g.copyFrom(f);g.sub(e);e.lerp(f,0.08);d.y+=g.x;d.x+=g.y;d.y+=c*0.001*Math.sin(r*n*0.001);d.x+=c*0.001*Math.sin(r*n*0.001*0.7)}function p(){l.events.subscribe(HydraEvents.RESIZE,a)}function a(){l.camera.aspect=Stage.width/Stage.height;l.camera.updateProjectionMatrix()}this.updateVelocity=function(q,r){l.dragging=r;b.copyFrom(q)}},"singleton");Class(function Container(){Inherit(this,Controller);var h=this;var m,f,b;(function(){c();d();j();l()})();function c(){m=h.container;m.size("100%");Stage.add(m)}function d(){m.add(Renderer.instance().container)}function j(){AssetUtil.exclude(["lib","shaders"]);AssetUtil.exclude(Device.mobile?["desktop"]:["mobile"]);var n=AssetUtil.loadAssets(["assets"]);b=h.initClass(AssetLoader,n);b.events.add(HydraEvents.PROGRESS,a);b.events.add(HydraEvents.COMPLETE,e)}function a(n){h.events.fire(CustomEvents.LOAD_PROGRESS,{percent:n.percent})}function e(){h.events.fire(CustomEvents.LIBS_LOADED)}function l(){h.events.subscribe(CustomEvents.LOADED,k)}function k(){f=h.initClass(Tutorial);f.events.add(HydraEvents.COMPLETE,g);h.initClass(FinishView)}function g(){f=f.destroy()}},"singleton");Class(function Renderer(){Inherit(this,Controller);var e=this;var m;var h,l,g;(function(){b();k();d();j();f();Render.start(c)})();function b(){m=e.container;m.size("100%").mouseEnabled(false)}function k(){h=new THREE.WebGLRenderer({antialias:false});h.setPixelRatio(Math.min(2,Device.pixelRatio));h.setSize(Stage.width,Stage.height);m.add(h.domElement)}function d(){var n={renderer:h,camera:Camera.instance().camera,scene:Scene.instance().scene};l=e.initClass(Nuke,Stage,n)}function j(){g=e.initClass(UILayer,l)}function c(){l.render()}function f(){e.events.subscribe(HydraEvents.RESIZE,a)}function a(){h.setSize(Stage.width,Stage.height)}},"singleton");Class(function Scene(){Inherit(this,Component);var c=this;var b;this.scene=new THREE.Scene();(function(){a()})();function a(){b=c.initClass(SphereView);c.scene.add(b.object3D)}},"singleton");Class(function FinishView(){Inherit(this,View);var j=this;var k,o,n,f,p;(function(){e();a();m();c()})();function e(){k=j.element;o=k.create("Credit");n=k.create("Congratulations");f=k.create("Thanks");p=k.create("Replay")}function a(){k.hide();k.css({position:"static",color:"#fff",textAlign:"center",lineHeight:0});o.html("Made by @gordonnl");f.html("Thanks for playing");p.html("Replay");o.css({top:"12.5%",left:0,right:0,lineHeight:"1em",fontSize:"0.8em",width:"50%",margin:"auto",marginTop:"-0.5em"});f.css({top:"50%",left:0,right:0,marginTop:"2em",fontSize:"0.8em"});p.css({bottom:"12.5%",left:0,right:0,lineHeight:"1em",width:"50%",margin:"auto",marginTop:"-0.5em"});n.bg("assets/images/congratulations.png")}function m(){j.events.subscribe(HydraEvents.RESIZE,c);j.events.subscribe(CustomEvents.FINISH,l);o.interact(h,b);p.interact(h,d)}function c(){k.css({fontSize:Utils.range(Stage.width,300,1200,20,40)});var q=Utils.range(Stage.width,300,1200,0.4,1);n.size(q*633,q*148).center()}function l(){k.show().css({opacity:0}).tween({opacity:1},2000,"easeInOutCubic")}function g(){k.tween({opacity:0},500,"easeOutCubic",function(){k.hide()})}function h(q){}function d(){g();j.events.fire(CustomEvents.REPLAY)}function b(){getURL("https://twitter.com/gordonnl","_blank")}});Class(function UILayer(q){Inherit(this,NukePass);var l=this;var r=0.5;var e=0.5;var m=0;var d=0;this.uniforms={tObjective1:{type:"t",value:Utils3D.getTexture("assets/images/placeholder/placeholder.png",true)},tObjective2:{type:"t",value:Utils3D.getTexture("assets/images/placeholder/placeholder.png",true)},tObjective3:{type:"t",value:Utils3D.getTexture("assets/images/placeholder/placeholder.png",true)},tObjective4:{type:"t",value:Utils3D.getTexture("assets/images/placeholder/placeholder.png",true)},tObjective5:{type:"t",value:Utils3D.getTexture("assets/images/placeholder/placeholder.png",true)},fComplete1:{type:"f",value:-1},fComplete2:{type:"f",value:-1},fComplete3:{type:"f",value:-1},fComplete4:{type:"f",value:-1},fComplete5:{type:"f",value:-1},fLoader1:{type:"f",value:0},fLoader2:{type:"f",value:0},fLoader3:{type:"f",value:0},fLoader4:{type:"f",value:0},fRetina:{type:"f",value:Math.min(2,Device.pixelRatio)},fTransition:{type:"f",value:0.19},fColor:{type:"f",value:0},fFocus:{type:"f",value:e},fFlash:{type:"f",value:0},fDarken:{type:"f",value:0},uResolution:{type:"v2",value:new Vector2(q.renderer.domElement.width,q.renderer.domElement.height)},};(function(){l.init();q.add(l);p();Render.start(j);Render.start(n)})();function j(){e+=(r-e)*0.2;l.set("fFocus",e);if(Sound.focus.volume){Sound.focus.volume(Math.max(0,Sound.focus.volume()-0.05))}if(Sound.focus._rate){Sound.focus._rate=Math.max(0.7,Sound.focus._rate-0.05)}}function n(){if(m==1){defer(function(){h();Render.stop(n)})}m+=(d-m)*0.05;if(m>0.999){m=1}if(m>0.5&&!l.uiVisible){l.uiVisible=true;l.tween("fLoader3",1,2000,"easeInOutCubic",1000);WorldInteraction.instance()}l.set("fLoader1",Utils.range(m,0,0.5,0,1,true));l.set("fLoader2",Utils.range(m,0.5,1,0,1,true))}function p(){l.events.subscribe(HydraEvents.RESIZE,c);l.events.subscribe(CustomEvents.FOCUS,f);l.events.subscribe(CustomEvents.LOAD_PROGRESS,a);l.events.subscribe(CustomEvents.SHOOT,g);l.events.subscribe(CustomEvents.FINISH,o);l.events.subscribe(CustomEvents.REPLAY,k);l.events.subscribe(CustomEvents.SHOW_GOALS,b)}function c(){defer(function(){l.uniforms.uResolution.value.set(q.renderer.domElement.width,q.renderer.domElement.height)})}function f(s){if(Sound.focus.volume){Sound.focus.volume(0.2)}if(Sound.focus._rate){Sound.focus._rate=2}r=s.focus}function a(s){d=s.percent}function h(){l.events.fire(CustomEvents.LOADED);l.tween("fTransition",1,4000,"easeInOutCubic",0);l.tween("fColor",1,2000,"easeInOutCubic",3000);l.set("tObjective1",Utils3D.getTexture("assets/images/objective-1.png",true));l.set("tObjective2",Utils3D.getTexture("assets/images/objective-2.png",true));l.set("tObjective3",Utils3D.getTexture("assets/images/objective-3.png",true));l.set("tObjective4",Utils3D.getTexture("assets/images/objective-4.png",true));l.set("tObjective5",Utils3D.getTexture("assets/images/objective-5.png",true))}function b(){l.tween("fLoader4",1,1000,"easeOutCubic");for(var s=0;s<5;s++){l.tween("fComplete"+(s+1),0,500,"easeOutCubic",30*s*s)}}function g(s){l.set("fFlash",0.8);l.tween("fFlash",0,2000,"easeOutQuint",10);if(s.index>0){l.tween("fComplete"+s.index,1,500,"easeInOutBack")}}function o(){l.tween("fDarken",0.95,1000,"easeInOutCubic")}function k(){l.tween("fDarken",0,1000,"easeInOutCubic");for(var s=0;s<5;s++){l.tween("fComplete"+(s+1),0,500,"easeOutCubic",100*s)}}});Class(function SphereShader(){Inherit(this,Component);var f=this;var a;var j=0.75;var c=0.75;(function(){g();Render.start(e);h()})();function g(){a=new Shader("Sphere","NoiseBlur");a.uniforms={map:{type:"t",value:null},depth:{type:"t",value:null},time:{type:"f",value:0},focus:{type:"f",value:c},fStrength:{type:"f",value:Device.mobile?2:1},};a.material.side=THREE.BackSide;a.set("map",Utils3D.getTexture("assets/images/placeholder/placeholder.png",true));a.set("depth",Utils3D.getTexture("assets/images/placeholder/placeholder.png",true))}function e(k,l){a.set("time",l*0.001);c+=(j-c)*0.2;a.set("focus",c)}function h(){f.events.subscribe(CustomEvents.FOCUS,d);f.events.subscribe(CustomEvents.LOADED,b)}function d(k){j=k.focus}function b(){a.set("map",Utils3D.getTexture("assets/images/"+(Device.mobile?"mobile/":"desktop/")+"scene.jpg",true));a.set("depth",Utils3D.getTexture("assets/images/"+(Device.mobile?"mobile/":"desktop/")+"depth.jpg",true))}this.get("material",function(){return a.material})});Class(function SphereView(){Inherit(this,Component);var e=this;var c,d;this.object3D=new THREE.Object3D();(function(){b()})();function b(){var f=new THREE.SphereBufferGeometry(10,100,100);var g=e.initClass(SphereShader);c=new THREE.Mesh(f,g.material);e.object3D.add(c)}function a(f,g){c.rotation.y+=0.005;c.rotation.x=Math.sin(g*0.001)*0.3}});Class(function TutorialFindView(){Inherit(this,View);var f=this;var g,j,c,h,k;(function(){d();a();l();b()})();function d(){g=f.element;j=g.create("Text");c=j.create("First");h=j.create("Second");k=g.create("Arrow")}function a(){g.css({position:"static",opacity:0});j.css({color:"#fff",lineHeight:0,textAlign:"center"});c.html("Find all of these items");h.html("Make sure they're in focus!");c.css({whiteSpace:"nowrap"});h.css({whiteSpace:"nowrap",top:"1em"});k.size(50,100).css({bottom:"50%",left:"11%"});k.bg("assets/images/arrow.png");k.transform({rotation:10})}function l(){f.events.subscribe(HydraEvents.RESIZE,b)}function b(){g.css({fontSize:Utils.range(Stage.width,300,1200,20,40)});j.css({top:"12.5%",left:Stage.width/Stage.height>1.5?"12%":"5%"})}function e(){g.tween({opacity:0},500,"easeOutCubic",function(){f.events.fire(HydraEvents.COMPLETE)})}this.start=function(){f.events.fire(CustomEvents.SHOW_GOALS);g.tween({opacity:1},1000,"easeOutCubic",500,function(){f.delayedCall(e,4000)})}});Class(function TutorialFocusView(){Inherit(this,View);var g=this;var f;(function(){d();c();e();a()})();function d(){f=g.element}function c(){f.html(Device.mobile?"Drag here to adjust the focus":"Scroll to adjust the focus");f.css({color:"#fff",lineHeight:0,bottom:"16%",left:0,right:0,textAlign:"center",opacity:0})}function e(){g.events.subscribe(HydraEvents.RESIZE,a)}function a(){f.css({fontSize:Utils.range(Stage.width,300,1200,20,40)})}function b(){g.events.unsubscribe(CustomEvents.FOCUS,b);f.tween({opacity:0},500,"easeOutCubic",function(){g.events.fire(HydraEvents.COMPLETE)})}this.start=function(){f.tween({opacity:1},1000,"easeOutCubic");g.events.subscribe(CustomEvents.FOCUS,b)}});Class(function TutorialLookView(){Inherit(this,View);var g=this;var f;(function(){d();c();e();a()})();function d(){f=g.element}function c(){f.html("Click and drag to look around");f.css({color:"#fff",lineHeight:0,top:"12.5%",left:0,right:0,textAlign:"center",opacity:0})}function e(){g.events.subscribe(HydraEvents.RESIZE,a)}function a(){f.css({fontSize:Utils.range(Stage.width,300,1200,20,40)})}function b(){g.events.unsubscribe(CustomEvents.TUTORIAL_DRAG,b);f.tween({opacity:0},500,"easeOutCubic",function(){g.events.fire(HydraEvents.COMPLETE)})}this.start=function(){f.tween({opacity:1},1000,"easeOutCubic");g.events.subscribe(CustomEvents.TUTORIAL_DRAG,b)}});Class(function TutorialShootView(){Inherit(this,View);var e=this;var g,h,f,j;(function(){c();a();k();b()})();function c(){g=e.element;h=g.create("Text");j=g.create("Arrow")}function a(){g.css({position:"static",color:"#fff",lineHeight:0,textAlign:"center",opacity:0});h.html(Device.mobile?"Tap here to capture":"Click here to capture");h.css({top:Device.mobile?"37%":"33%",left:0,right:0});j.size(50,100).css({left:"58%",top:"50%",marginTop:-79});j.bg("assets/images/arrow.png");j.transform({rotation:40});if(Device.mobile){return}f=h.create("Sub");f.html("(or press space)");f.css({top:"1em",fontSize:"0.8em",left:0,right:0})}function k(){e.events.subscribe(HydraEvents.RESIZE,b)}function b(){g.css({fontSize:Utils.range(Stage.width,300,1200,20,40)})}function d(){e.events.unsubscribe(CustomEvents.SHOOT,d);g.tween({opacity:0},500,"easeOutCubic",function(){e.events.fire(HydraEvents.COMPLETE)})}this.start=function(){g.tween({opacity:1},1000,"easeOutCubic");e.events.subscribe(CustomEvents.SHOOT,d)}});Class(function Main(){Inherit(this,Component);var d=this;var b;(function(){a()})();function a(){var e=AssetUtil.loadAssets(["lib","shaders","placeholder"]);b=d.initClass(AssetLoader,e);b.events.add(HydraEvents.COMPLETE,c)}function c(){Container.instance();if(Mobile.os=="Android"){Mobile.fullscreen()}}});window._MINIFIED_ = true;